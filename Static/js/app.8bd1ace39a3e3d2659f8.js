webpackJsonp([1],{"13sx":function(t,e){},"2GT4":function(t,e){},"4BZX":function(t,e){},"4mUV":function(t,e){},"5UY9":function(t,e){},"5vCr":function(t,e){},"6iJO":function(t,e){},"7QVd":function(t,e){},"9/yg":function(t,e){},Bt7X:function(t,e){},D2Wv:function(t,e){},EKrT:function(t,e){},FvIl:function(t,e){},H8t6:function(t,e){},HHSW:function(t,e){},IIvG:function(t,e){},JfR1:function(t,e){},JnWQ:function(t,e){},NHnr:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=s("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=s("VU/8")({name:"App",created:function(){},updated:function(){var t=this;this.$nextTick(function(){t.$Spin.hide()})}},n,!1,function(t){s("eSef")},null,null).exports,c=s("/ocq"),r=s("bOdI"),l=s.n(r),d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Menu",{staticClass:"menu_height",attrs:{width:"188px",accordion:"","active-name":t.activename,"open-names":t.opennames}},[i("div",{staticClass:"logodiv",staticStyle:{width:"188px","text-align":"center"}},[i("img",{staticClass:"logo",attrs:{src:"data:image/png;base64,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",alt:""}}),t._v(" "),i("div",{staticClass:"hr"})]),t._v(" "),i("MenuItem",{attrs:{name:"1"}},[i("Icon",{staticClass:"icon iconfont icontabBarIcon_main"}),t._v(" "),i("a",{attrs:{href:"https://www.oneapptech.cn",target:"_blank"}},[t._v("壹智能首页")])],1),t._v(" "),i("Submenu",{attrs:{name:"2"}},[i("template",{slot:"title"},[i("Icon",{staticClass:"icon iconfont icontabBarIcon_ztms"}),t._v("\n        制图模式\n      ")],1),t._v(" "),i("MenuItem",{attrs:{name:"2-1",to:"/index?opennames=2&type=1"}},[t._v("全部项目")]),t._v(" "),i("MenuItem",{attrs:{name:"2-2",to:"/index?opennames=2&type=2"}},[t._v("进行中")]),t._v(" "),i("MenuItem",{attrs:{name:"2-3",to:"/index?opennames=2&type=3"}},[t._v("测试")]),t._v(" "),i("MenuItem",{attrs:{name:"2-4",to:"/index?opennames=2&type=4"}},[t._v("已成交")]),t._v(" "),i("MenuItem",{attrs:{name:"2-5",to:"/index?opennames=2&type=5"}},[t._v("失败")])],2),t._v(" "),i("Submenu",{attrs:{name:"3",replace:"true"}},[i("template",{slot:"title"},[i("Icon",{staticClass:"icon iconfont icontabBarIcon_ksms"}),t._v("\n        快速模式\n      ")],1),t._v(" "),i("MenuItem",{attrs:{name:"3-1",to:"/index?opennames=3&type=1"}},[t._v("全部项目")]),t._v(" "),i("MenuItem",{attrs:{name:"3-2",to:"/index?opennames=3&type=2"}},[t._v("进行中")]),t._v(" "),i("MenuItem",{attrs:{name:"3-3",to:"/index?opennames=3&type=3"}},[t._v("测试")]),t._v(" "),i("MenuItem",{attrs:{name:"3-4",to:"/index?opennames=3&type=4"}},[t._v("已成交")]),t._v(" "),i("MenuItem",{attrs:{name:"3-5",to:"/index?opennames=3&type=5"}},[t._v("失败")])],2),t._v(" "),i("Submenu",{attrs:{name:"4"}},[i("template",{slot:"title"},[i("Icon",{staticClass:"icon iconfont icontabBarIcon_znms"}),t._v("\n        智能模式\n      ")],1),t._v(" "),i("MenuItem",{attrs:{name:"4-1",to:"/index?opennames=4&type=1"}},[t._v("全部项目")]),t._v(" "),i("MenuItem",{attrs:{name:"4-2",to:"/index?opennames=4&type=2"}},[t._v("进行中")]),t._v(" "),i("MenuItem",{attrs:{name:"4-3",to:"/index?opennames=4&type=3"}},[t._v("测试")]),t._v(" "),i("MenuItem",{attrs:{name:"4-4",to:"/index?opennames=4&type=4"}},[t._v("已成交")]),t._v(" "),i("MenuItem",{attrs:{name:"4-5",to:"/index?opennames=4&type=5"}},[t._v("失败")])],2),t._v(" "),i("Submenu",{attrs:{name:"5"}},[i("template",{slot:"title"},[i("Icon",{staticClass:"icon iconfont icontabBarIcon_grzx"}),t._v("\n        管理\n      ")],1),t._v(" "),i("MenuItem",{attrs:{name:"5-1",to:"/mitemlist?opennames=5&type=1"}},[t._v("项目管理")]),t._v(" "),i("MenuItem",{attrs:{name:"5-2",to:"/salesman?opennames=5&type=2"}},[t._v("销售员管理")]),t._v(" "),i("MenuItem",{attrs:{name:"5-3",to:"/Jurisdiction?opennames=5&type=3"}},[t._v("账号权限")]),t._v(" "),i("MenuItem",{attrs:{name:"5-4",to:"/Changeinfo?opennames=5&type=4"}},[t._v("账号设置")])],2),t._v(" "),i("MenuItem",{attrs:{name:"6",to:"/message?other=6"}},[i("Icon",{staticClass:"icon iconfont iconquestion"}),t._v("\n      通知中心\n    ")],1)],1)],1)},staticRenderFns:[]};var u=s("VU/8")({name:"NavMenu",data:function(){return{opennames:["2"],activename:"2-1"}},methods:{},created:function(){if(this.$route.query.other>0)return this.opennames=[],this.activename=""+this.$route.query.other,!1;var t=this.$route.query.type,e=this.$route.query.opennames;e&&t&&(this.activename=e+"-"+t,this.opennames=[""+e])}},d,!1,function(t){s("D2Wv")},"data-v-53408db0",null).exports,h={name:"AddItem",data:function(){return{visible:this.value,projectType:this.mold,platform:"",itemcate:"",data:this.itemdata}},props:{value:{type:Boolean,default:!1},mold:{type:[Number],default:2},itemdata:{type:[Object,String],default:function(){return{createtime:"",customeraddress:"",customername:"",customertelephone:"",functionarray:[],platformarray:[],projectname:"",projectstate:"",x_createtime:""}}}},methods:{close:function(){this.visible=!1,this.$emit("closeFn",!1)},checkeditemcate:function(t,e){1==t.default?this.itemcate[e].default=0:this.itemcate[e].default=1},checkedplatform:function(t,e){1==t.default?this.platform[e].default=0:this.platform[e].default=1},btn:function(){var t=this;if(!this.data.projectname)return this.$Message.error("请输入项目名称"),!1;if(!this.data.customername)return this.$Message.error("请输入客户姓名"),!1;var e=this.data.customertelephone;if(!/^1[3456789]\d{9}$/.test(e))return this.$Message.error("手机号码不正确"),!1;if(!this.data.customeraddress)return this.$Message.error("请输入客户地址"),!1;for(var i=this.itemcate,s=[],a=0;a<i.length;a++)i[a].default&&1==i[a].default&&s.push(i[a].id);var n=this.platform,o=[];for(a=0;a<n.length;a++)n[a].default&&1==n[a].default&&o.push(n[a].id);var c={userid:this.storage.getSession("usreInfo").user_id,projectName:this.data.projectname,customerName:this.data.customername,customerTelephone:this.data.customertelephone,customerAddress:this.data.customeraddress,projectType:this.projectType,projectid:this.data.id,projectState:this.data.projectstate,functionArray:s?s.join(","):[],platformArray:o?o.join(","):[]};this.axios.post("index.php?m=Api&c=project&a=addfast",this.Qs.stringify(c)).then(function(e){1==e.data.status?t.$Message.success(e.data.msg):t.$Message.error(e.data.msg),t.close()})}},created:function(){var t=this.storage.getSession("platform");t&&t.forEach(function(t){t.default=0}),this.platform=t;var e=this.storage.getSession("itemcate");e&&e.forEach(function(t){844==t.parent_id?t.staple=1:t.staple=2,t.default=0}),this.itemcate=e;var i=this.$route.query.opennames;2==i?this.projectType=2:3==i?this.projectType=1:4==i&&(this.projectType=0)},watch:{value:function(t){this.visible=t},itemdata:function(t){if(t.id>0){var e=this.itemcate,i=t.functionarray;if(0==this.projectType){var s=this.platform,a=t.platformarray;if(a){for(var n=0;n<s.length;n++){s[n].default=0;for(var o=0;o<a.length;o++)s[n].id==a[o].id&&(s[n].default=1)}this.platform=s}}if(i){for(var c=0;c<e.length;c++){e[c].default=0;for(var r=0;r<i.length;r++)e[c].id==i[r].id&&(e[c].default=1)}this.itemcate=e}this.data=t}else{(s=this.storage.getSession("platform"))&&s.forEach(function(t){t.default=0}),this.platform=s,(e=this.storage.getSession("itemcate"))&&e.forEach(function(t){t.default=0}),this.itemcate=e,this.data={}}},$route:function(t){var e=t.query.opennames;2==e?this.projectType=2:3==e?this.projectType=1:4==e&&(this.projectType=0)},visible:function(t){}}},_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}]},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"ivu-modal-mask"}),t._v(" "),i("div",{staticClass:"body"},[i("div",{staticClass:"box"},[i("div",{staticClass:"box_title"},[i("div",[t._v(t._s(t.data.id?"编辑":"添加")+"项目")]),t._v(" "),i("i",{staticClass:"closeitem icon iconfont iconred_pt cursor",on:{click:t.close}})]),t._v(" "),i("div",{staticClass:"box_center"},[i("div",{staticClass:"box_ul"},[i("div",{staticClass:"box_li"},[i("div",{staticClass:"text-768395"},[t._v("项目名称")]),t._v(" "),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.data.projectname,expression:"data.projectname"}],staticClass:"input_bg ivu-input",attrs:{type:"text",placeholder:"请输入..."},domProps:{value:t.data.projectname},on:{input:function(e){e.target.composing||t.$set(t.data,"projectname",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"box_li"},[i("div",{staticClass:"text-768395"},[t._v("客户姓名")]),t._v(" "),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.data.customername,expression:"data.customername"}],staticClass:"input_bg ivu-input",attrs:{type:"text",placeholder:"请输入..."},domProps:{value:t.data.customername},on:{input:function(e){e.target.composing||t.$set(t.data,"customername",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"box_li"},[i("div",{staticClass:"text-768395"},[t._v("客户电话")]),t._v(" "),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.data.customertelephone,expression:"data.customertelephone"}],staticClass:"input_bg ivu-input",attrs:{type:"text",name:"",placeholder:"请输入..."},domProps:{value:t.data.customertelephone},on:{input:function(e){e.target.composing||t.$set(t.data,"customertelephone",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"box_li"},[i("div",{staticClass:"text-768395"},[t._v("客户地址")]),t._v(" "),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.data.customeraddress,expression:"data.customeraddress"}],staticClass:"input_bg ivu-input",attrs:{type:"text",name:"",placeholder:"请输入..."},domProps:{value:t.data.customeraddress},on:{input:function(e){e.target.composing||t.$set(t.data,"customeraddress",e.target.value)}}})])]),t._v(" "),0==t.projectType?i("div",{staticClass:"box_li"},[i("div",{staticClass:"text-768395"},[t._v("智能平台")]),t._v(" "),i("div",{staticClass:"platform"},t._l(t.platform,function(e,s){return i("div",{key:s,staticClass:"text-9ca9bb platform_text cursor"},[i("div",[i("span",{class:1==e.default?"text-00b9e0 bold":"",on:{click:function(i){return t.checkedplatform(e,s)}}},[t._v(" "+t._s(e.name))])])])}),0)]):t._e(),t._v(" "),0==t.projectType||1==t.projectType?i("div",{staticClass:"box_li"},[i("div",{staticClass:"text-768395"},[t._v("功能选择")]),t._v(" "),i("div",{staticClass:"platform"},t._l(t.itemcate,function(e,s){return 1==e.staple?i("div",{key:s,staticStyle:{width:"25%"}},[i("span",[i("label",{staticClass:"cursor ",class:1==e.default?"text-00b9e0":""},[i("input",{staticClass:"text-00b9e0",attrs:{type:"checkbox",name:"functionarray[]"},domProps:{checked:1==e.default?"checked":"",value:e.id},on:{click:function(i){return t.checkeditemcate(e,s)}}}),t._v("\n                      "+t._s(e.name)+"\n                    ")])])]):t._e()}),0)]):t._e(),t._v(" "),i("div",{staticClass:"box_li btn"},[i("div",{staticClass:"addbtn text-00b9e0 cursor",on:{click:t.btn}},[t._v("确定")])])])])])])])},staticRenderFns:[]};var p=s("VU/8")(h,_,!1,function(t){s("jS86")},"data-v-78f5e01e",null).exports,v={name:"Email",data:function(){return{visible:this.value,projectType:this.mold,userInfo:"",email:"",type:"仅点位图",pointIconSize:"大",icontype:"彩色点位",skeleton:!1,projectid:"1154",disabled:!1,label:"是",data:this.itemdata,opennames:2}},props:{value:{type:Boolean,default:!1},mold:{type:[Number],default:2},sendtype:{type:[Number],default:2},itemdata:{type:[Object,String],default:function(){return{}}}},methods:{close:function(){this.visible=!1,this.$emit("closeFn",!1)},offer:function(t){this.type=t,"仅报价"==t?(this.disabled=!0,this.icontype="",this.pointIconSize="",this.label=""):(this.disabled=!1,this.icontype="彩色点位",this.pointIconSize="大",this.label="是")},btn:function(){var t=this;if(!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.email))return this.$Message.error("请输入正确的邮箱地址"),!1;var e=3;"全部"==this.type?e=3:"仅点位图"==this.type?e=2:"仅报价"==this.type&&(e=1);var i=0;"彩色点位"==this.icontype?i=0:"黑白点位"==this.icontype?i=1:"实物点位"==this.icontype?i=2:"缩略图"==this.icontype&&(i=3);var s=3;"大"==this.pointIconSize?s=3:"中"==this.pointIconSize?s=2:"小"==this.pointIconSize&&(s=1);var a=1;"是"==this.label?a=1:"否"==this.label&&(a=0);var n={userId:this.userInfo.user_id,projectId:this.data.id,type:e,email:this.email,pointIconSize:1!=e?s:"",icontype:1!=e?i:"",label:1!=e?a:""};this.storage.set("email",this.email),this.axios.post("index.php?m=Api&c=project&a=sendProjectPDF",this.Qs.stringify(n)).then(function(e){1==e.data.status?t.$Message.success(e.data.msg):t.$Message.error(e.data.msg),t.close()})}},created:function(){var t=this.storage.get("email");this.email=t;var e=this.$route.query.opennames;this.opennames=e;var i=this.storage.getSession("usreInfo");i&&(this.userInfo=i)},watch:{value:function(t){this.visible=t},itemdata:function(t){this.data=t},$route:function(t){var e=t.query.opennames;this.opennames=e,2==e?this.projectType=2:3==e?this.projectType=1:4==e&&(this.projectType=0)}}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}]},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"ivu-modal-mask"}),t._v(" "),i("div",{staticClass:"body"},[i("div",{staticClass:"box"},[i("div",{staticClass:"box_title"},[i("div",[t._v("发送到邮箱")]),t._v(" "),i("i",{staticClass:"closeitem icon iconfont iconred_pt cursor",on:{click:t.close}})]),t._v(" "),i("div",{staticClass:"box_center"},[i("div",{staticClass:"box_ul"},[2!=t.sendtype?i("div",{staticClass:"box_li"},[i("div",{staticClass:"text-768395 box_li_left"},[t._v("发送方案:")]),t._v(" "),i("div",{staticClass:"box_li_right"},[i("RadioGroup",{on:{"on-change":t.offer},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[i("Radio",{attrs:{value:"3",label:"全部"}}),t._v(" "),i("Radio",{attrs:{value:"2",label:"仅点位图"}}),t._v(" "),i("Radio",{attrs:{value:"1",label:"仅报价"}})],1)],1)]):t._e(),t._v(" "),i("div",{staticClass:"box_li"},[i("div",{staticClass:"text-768395 box_li_left"},[t._v("点位图标:")]),t._v(" "),i("div",{staticClass:"box_li_right"},[i("RadioGroup",{model:{value:t.icontype,callback:function(e){t.icontype=e},expression:"icontype"}},[i("Radio",{attrs:{value:"0",label:"彩色点位",disabled:t.disabled}}),t._v(" "),i("Radio",{attrs:{value:"1",label:"黑白点位",disabled:t.disabled}}),t._v(" "),i("Radio",{attrs:{value:"2",label:"实物点位",disabled:t.disabled}}),t._v(" "),4==t.opennames?i("Radio",{attrs:{value:"3",label:"缩略图"}}):t._e()],1)],1)]),t._v(" "),i("div",{staticClass:"box_li"},[i("div",{staticClass:"text-768395 box_li_left"},[t._v("点位大小:")]),t._v(" "),i("div",{staticClass:"box_li_right"},[i("RadioGroup",{model:{value:t.pointIconSize,callback:function(e){t.pointIconSize=e},expression:"pointIconSize"}},[i("Radio",{attrs:{value:"3",label:"大",disabled:t.disabled}}),t._v(" "),i("Radio",{attrs:{value:"2",label:"中",disabled:t.disabled}}),t._v(" "),i("Radio",{attrs:{value:"1",label:"小",disabled:t.disabled}})],1)],1)]),t._v(" "),i("div",{staticClass:"box_li"},[i("div",{staticClass:"text-768395 box_li_left"},[t._v("图纸标注:")]),t._v(" "),i("div",{staticClass:"box_li_right"},[i("RadioGroup",{model:{value:t.label,callback:function(e){t.label=e},expression:"label"}},[i("Radio",{attrs:{value:"1",label:"是",disabled:t.disabled}}),t._v(" "),i("Radio",{attrs:{value:"0",label:"否",disabled:t.disabled}})],1)],1)]),t._v(" "),i("div",{staticClass:"box_li"},[i("div",{staticClass:"text-768395 box_li_left"},[t._v("邮箱地址:")]),t._v(" "),i("div",{staticClass:"box_li_right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticStyle:{width:"261px",height:"34px","border-radius":"2px","background-color":"#E3E8EF",border:"none"},attrs:{type:"email",placeholder:"请输入邮箱地址.."},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"box_li btn text-center",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"addbtn text-00b9e0 cursor",on:{click:t.btn}},[t._v("发送")])])])])])])])},staticRenderFns:[]};var f=s("VU/8")(v,m,!1,function(t){s("6iJO")},"data-v-c8960ad0",null).exports,g={name:"Pass",data:function(){return{password:"",visible:this.value,projectType:this.mold,userInfo:"",email:"",type:"仅点位图",pointIconSize:"大",icontype:"彩色点位",skeleton:!1,projectid:"1154",disabled:!1,label:"是",data:this.itemdata,opennames:2}},props:{value:{type:Boolean,default:!1},mold:{type:[Number],default:2},sendtype:{type:[Number],default:2},itemdata:{type:[Object,String],default:function(){return{}}}},methods:{close:function(){this.visible=!1,this.password="",this.$emit("closeFn",!1)},btn:function(){var t=this;if(!/^([a-zA-Z0-9]){5,19}$/.test(this.password))return this.$Message.error("请输入6位以上的字母与数字的组合"),!1;var e={user_id:this.userInfo.user_id,project_id:this.data.id,type:1,passwd:this.password};this.axios.post("/index.php?m=Api&c=project&a=setProjectPW",this.Qs.stringify(e)).then(function(e){1==e.data.status?t.$Message.success(e.data.msg):t.$Message.error(e.data.msg),t.close()})}},created:function(){var t=this.storage.getSession("usreInfo");t&&(this.userInfo=t)},watch:{value:function(t){this.visible=t},itemdata:function(t){1==t.is_passwd&&(this.password=t.passwd),this.data=t},$route:function(t){var e=t.query.opennames;this.opennames=e,2==e?this.projectType=2:3==e?this.projectType=1:4==e&&(this.projectType=0)}}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}]},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"ivu-modal-mask"}),t._v(" "),i("div",{staticClass:"body"},[i("div",{staticClass:"box"},[i("div",{staticClass:"box_title"},[i("div",[t._v("分享加密")]),t._v(" "),i("i",{staticClass:"closeitem icon iconfont iconred_pt cursor",on:{click:t.close}})]),t._v(" "),i("div",{staticClass:"box_center"},[i("div",{staticClass:"box_ul"},[i("div",{staticClass:"box_li"},[i("div",{staticStyle:{width:"100%"}},[t._v("项目密码为该项目分享后打开所需的密码。")]),t._v(" "),i("div",{staticStyle:{width:"100%","line-height":"1.5"}},[t._v("为了保证您的项目安全，请设定项目密码并将密码妥善保管。")]),t._v(" "),i("div",{staticStyle:{width:"100%"}},[t._v("设定项目密码之后，如将密码进行更改，原密码将失效。")]),t._v(" "),i("div",{staticStyle:{width:"100%",display:"flex","align-items":"center","justify-content":"space-between","margin-top":"5px"}},[i("div",[t._v("项目密码")]),t._v(" "),i("Input",{staticStyle:{width:"83%"},attrs:{maxlength:"20",type:"password",autofocus:"",password:"",placeholder:"请输入密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)]),t._v(" "),i("div",{staticClass:"box_li btn text-center",staticStyle:{"justify-content":"center","align-items":"center"}},[i("div",{staticClass:"addbtn text-00b9e0 cursor",on:{click:t.btn}},[t._v("确定")])])])])])])])},staticRenderFns:[]};var C=s("VU/8")(g,y,!1,function(t){s("c4xX")},"data-v-5ed69c9e",null).exports,x=s("mvHQ"),w=s.n(x),b={data:function(){return{functionArray:[],itemlist:[{id:10,name:"网络产品",default:0,type_id:845},{id:11,name:"远程监控",default:0,type_id:849},{id:12,name:"安防感应",default:0,type_id:850},{id:13,name:"背景音乐",default:0,type_id:851},{id:14,name:"电动窗帘",default:0,type_id:852},{id:15,name:"可视对讲",default:0,type_id:853},{id:16,name:"环境控制",default:0,type_id:854},{id:17,name:"智能照明",default:0,type_id:855},{id:18,name:"家庭影院",default:0,type_id:857},{id:19,name:"智能中控",default:0,type_id:856},{id:20,name:"智能家电",default:0,type_id:856},{id:21,name:"卡拉OK",default:0,type_id:856},{id:22,name:"配件",default:0,type_id:922}],otherCost:[{name:"",cost:""}],valueAddedTaxRate:[],installCost:[],debugCost:[],debugcosttable:[{typeId:845,rate:null,canDiscount:0,fixedCost:null,name:"网络覆盖"},{typeId:849,rate:null,canDiscount:0,fixedCost:null,name:"远程监控"},{typeId:850,rate:null,canDiscount:0,fixedCost:null,name:"安防感应"},{typeId:851,rate:null,canDiscount:0,fixedCost:null,name:"背景音乐"},{typeId:852,rate:null,canDiscount:0,fixedCost:null,name:"电动窗帘"},{typeId:853,rate:null,canDiscount:0,fixedCost:null,name:"可视对讲"},{typeId:854,rate:null,canDiscount:0,fixedCost:null,name:"环境控制"},{typeId:855,rate:null,canDiscount:0,fixedCost:null,name:"智能照明"},{typeId:857,rate:null,canDiscount:0,fixedCost:null,name:"家庭影院"},{typeId:856,rate:null,canDiscount:0,fixedCost:null,name:"智能中控"},{typeId:1012,rate:null,canDiscount:0,fixedCost:null,name:"智能家电"},{typeId:1011,rate:null,canDiscount:0,fixedCost:null,name:"卡拉OK"},{typeId:922,rate:null,canDiscount:0,fixedCost:null,name:"配件"}],installcosttable:[{typeId:845,rate:null,canDiscount:0,fixedCost:null,name:"网络覆盖"},{typeId:849,rate:null,canDiscount:0,fixedCost:null,name:"远程监控"},{typeId:850,rate:null,canDiscount:0,fixedCost:null,name:"安防感应"},{typeId:851,rate:null,canDiscount:0,fixedCost:null,name:"背景音乐"},{typeId:852,rate:null,canDiscount:0,fixedCost:null,name:"电动窗帘"},{typeId:853,rate:null,canDiscount:0,fixedCost:null,name:"可视对讲"},{typeId:854,rate:null,canDiscount:0,fixedCost:null,name:"环境控制"},{typeId:855,rate:null,canDiscount:0,fixedCost:null,name:"智能照明"},{typeId:857,rate:null,canDiscount:0,fixedCost:null,name:"家庭影院"},{typeId:856,rate:null,canDiscount:0,fixedCost:null,name:"智能中控"},{typeId:1012,rate:null,canDiscount:0,fixedCost:null,name:"智能家电"},{typeId:1011,rate:null,canDiscount:0,fixedCost:null,name:"卡拉OK"},{typeId:922,rate:null,canDiscount:0,fixedCost:null,name:"配件"}],userInfo:"",visible:!0}},props:["settindata"],methods:{discount:function(t,e,i){var s=i.target.value;s&&("install"==e&&(0==t&&(this.installCost.canDiscount=0),1==t&&(this.installCost.canDiscount=1),this.installCost.allTypeRate=s),"debug"==e&&(0==t&&(this.debugCost.canDiscount=0),1==t&&(this.debugCost.canDiscount=1),this.debugCost.allTypeRate=s))},colseBtn:function(){this.visible=!1,this.$emit("closeFn",!1)},dedugfixedprice:function(t,e,i){var s=e.target.value;s&&(s<0&&(s=null),"debug"==i&&(this.debugcosttable[t].rate="",this.debugcosttable[t].fixedCost=s,this.debugcosttable[t].canDiscount=0),"install"==i&&(this.installcosttable[t].rate="",this.installcosttable[t].fixedCost=s,this.installcosttable[t].canDiscount=0))},dedugrate:function(t,e,i){var s=e.target.value;s&&(s>100&&(s=100),s<0&&(s=0),"debug"==i&&(this.debugcosttable[t].fixedCost="",this.debugcosttable[t].rate=s),"install"==i&&(this.installcosttable[t].fixedCost="",this.installcosttable[t].rate=s))},addicon:function(){this.otherCost.push({name:"",cost:""})},del:function(t){this.otherCost.splice(t,1)},btn:function(){var t=this,e="";if(2==this.installCost.canDiscount)for(e=this.installcosttable,i=0;i<e.length;i++)845==e[i].typeId?e.push({typeId:866,rate:e[i].rate,canDiscount:e[i].canDiscount,fixedCost:e[i].fixedCost}):849==e[i].typeId?e.push({typeId:872,rate:e[i].rate,canDiscount:e[i].canDiscount,fixedCost:e[i].fixedCost}):850==e[i].typeId?e.push({typeId:883,rate:e[i].rate,canDiscount:e[i].canDiscount,fixedCost:e[i].fixedCost}):851==e[i].typeId?e.push({typeId:890,rate:e[i].rate,canDiscount:e[i].canDiscount,fixedCost:e[i].fixedCost}):852==e[i].typeId?e.push({typeId:916,rate:e[i].rate,canDiscount:e[i].canDiscount,fixedCost:e[i].fixedCost}):853==e[i].typeId?e.push({typeId:962,rate:e[i].rate,canDiscount:e[i].canDiscount,fixedCost:e[i].fixedCost}):854==e[i].typeId?e.push({typeId:956,rate:e[i].rate,canDiscount:e[i].canDiscount,fixedCost:e[i].fixedCost}):855==e[i].typeId?e.push({typeId:907,rate:e[i].rate,canDiscount:e[i].canDiscount,fixedCost:e[i].fixedCost}):856==e[i].typeId?e.push({typeId:916,rate:e[i].rate,canDiscount:e[i].canDiscount,fixedCost:e[i].fixedCost}):857==e[i].typeId&&e.push({typeId:960,rate:e[i].rate,canDiscount:e[i].canDiscount,fixedCost:e[i].fixedCost});var i,s="";if(2==this.debugCost.canDiscount)for(s=this.debugcosttable,i=0;i<s.length;i++)845==s[i].typeId?s.push({typeId:866,rate:s[i].rate,canDiscount:s[i].canDiscount,fixedCost:s[i].fixedCost}):849==s[i].typeId?s.push({typeId:872,rate:s[i].rate,canDiscount:s[i].canDiscount,fixedCost:s[i].fixedCost}):850==s[i].typeId?s.push({typeId:883,rate:s[i].rate,canDiscount:s[i].canDiscount,fixedCost:s[i].fixedCost}):851==s[i].typeId?s.push({typeId:890,rate:s[i].rate,canDiscount:s[i].canDiscount,fixedCost:s[i].fixedCost}):852==s[i].typeId?s.push({typeId:916,rate:s[i].rate,canDiscount:s[i].canDiscount,fixedCost:s[i].fixedCost}):853==s[i].typeId?s.push({typeId:962,rate:s[i].rate,canDiscount:s[i].canDiscount,fixedCost:s[i].fixedCost}):854==s[i].typeId?s.push({typeId:956,rate:s[i].rate,canDiscount:s[i].canDiscount,fixedCost:s[i].fixedCost}):855==s[i].typeId?s.push({typeId:907,rate:s[i].rate,canDiscount:s[i].canDiscount,fixedCost:s[i].fixedCost}):856==s[i].typeId?s.push({typeId:916,rate:s[i].rate,canDiscount:s[i].canDiscount,fixedCost:s[i].fixedCost}):857==s[i].typeId&&s.push({typeId:960,rate:s[i].rate,canDiscount:s[i].canDiscount,fixedCost:s[i].fixedCost});var a={installCost:{allTypeRate:2==this.installCost.canDiscount?0:this.installCost.allTypeRate,canDiscount:this.installCost.canDiscount,eachTypeCost:e},debugCost:{allTypeRate:2==this.debugCost.canDiscount?0:this.debugCost.allTypeRate,canDiscount:this.debugCost.canDiscount,eachTypeCost:s},valueAddedTaxRate:{useDefault:this.valueAddedTaxRate.useDefault,customRate:this.valueAddedTaxRate.customRate},otherCost:this.otherCost};console.log(a);var n={projectId:this.settindata.id,userId:this.userInfo.user_id,offerSetupJson:w()(a)};this.axios.post("/index.php?m=Api&c=project&a=projectPriceSystem",this.Qs.stringify(n)).then(function(e){1==e.data.status?t.$Message.success(e.data.msg):t.$Message.error(e.data.msg),t.visible=!1,t.$emit("closeFn",!1)})}},created:function(){var t=this,e=this.settindata,i=this.storage.getSession("usreInfo"),s=i.user_id;this.userInfo=i;var a=e.id;a&&a&&this.axios.get("/index.php?m=Api&c=project&a=projectPriceSystem&userId="+s+"&projectId="+a).then(function(e){var i=e.data.valueAddedTaxRate;0==i.customRate?i.customRate="":i.customRate,t.valueAddedTaxRate=i,t.otherCost=e.data.otherCost?e.data.otherCost:[];var s=e.data.debugCost,a=e.data.installCost,n=s.eachTypeCost;if(0!=n.length){s.canDiscount=2;for(var o=t.debugcosttable,c=0;c<n.length;c++)for(var r=0;r<o.length;r++)o[r].typeId==n[c].typeId&&(o[r].rate=n[c].rate,o[r].canDiscount=n[c].canDiscount,o[r].fixedCost=n[c].fixedCost)}else t.debugcosttable=[{typeId:845,rate:null,canDiscount:0,fixedCost:null,name:"网络覆盖"},{typeId:849,rate:null,canDiscount:0,fixedCost:null,name:"远程监控"},{typeId:850,rate:null,canDiscount:0,fixedCost:null,name:"安防感应"},{typeId:851,rate:null,canDiscount:0,fixedCost:null,name:"背景音乐"},{typeId:852,rate:null,canDiscount:0,fixedCost:null,name:"电动窗帘"},{typeId:853,rate:null,canDiscount:0,fixedCost:null,name:"可视对讲"},{typeId:854,rate:null,canDiscount:0,fixedCost:null,name:"环境控制"},{typeId:855,rate:null,canDiscount:0,fixedCost:null,name:"智能照明"},{typeId:857,rate:null,canDiscount:0,fixedCost:null,name:"家庭影院"},{typeId:856,rate:null,canDiscount:0,fixedCost:null,name:"智能中控"},{typeId:1012,rate:null,canDiscount:0,fixedCost:null,name:"智能家电"},{typeId:1011,rate:null,canDiscount:0,fixedCost:null,name:"卡拉OK"},{typeId:922,rate:null,canDiscount:0,fixedCost:null,name:"配件"}];t.debugCost=s;var l=a.eachTypeCost;if(0!=l.length){a.canDiscount=2;var d=t.installcosttable;console.log(d);for(c=0;c<l.length;c++)for(r=0;r<d.length;r++)d[r].typeId==l[c].typeId&&(d[r].rate=l[c].rate,d[r].canDiscount=l[c].canDiscount,d[r].fixedCost=l[c].fixedCost)}else t.installcosttable=[{typeId:845,rate:null,canDiscount:0,fixedCost:null,name:"网络覆盖"},{typeId:849,rate:null,canDiscount:0,fixedCost:null,name:"远程监控"},{typeId:850,rate:null,canDiscount:0,fixedCost:null,name:"安防感应"},{typeId:851,rate:null,canDiscount:0,fixedCost:null,name:"背景音乐"},{typeId:852,rate:null,canDiscount:0,fixedCost:null,name:"电动窗帘"},{typeId:853,rate:null,canDiscount:0,fixedCost:null,name:"可视对讲"},{typeId:854,rate:null,canDiscount:0,fixedCost:null,name:"环境控制"},{typeId:855,rate:null,canDiscount:0,fixedCost:null,name:"智能照明"},{typeId:857,rate:null,canDiscount:0,fixedCost:null,name:"家庭影院"},{typeId:856,rate:null,canDiscount:0,fixedCost:null,name:"智能中控"},{typeId:1012,rate:null,canDiscount:0,fixedCost:null,name:"智能家电"},{typeId:1011,rate:null,canDiscount:0,fixedCost:null,name:"卡拉OK"},{typeId:922,rate:null,canDiscount:0,fixedCost:null,name:"配件"}];t.installCost=a})}},k={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"ivu-modal-mask"}),t._v(" "),i("div",{staticClass:"body"},[i("div",{staticClass:"s_content"},[i("div",{staticClass:"s_title"},[i("div",{staticClass:"s_t_text",staticStyle:{width:"344px"}},[t._v("\n          报价设置\n        ")]),t._v(" "),i("i",{staticClass:"close icon iconfont iconred_pt",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.colseBtn()}}})]),t._v(" "),i("div",{staticStyle:{clear:"both"}}),t._v(" "),i("div",{staticClass:"s_install"},[i("div",{staticClass:"s_install_title"},[t._v("设备安装费")]),t._v(" "),i("div",{staticClass:"s_install_list"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.installCost.canDiscount,expression:"installCost.canDiscount"}],staticClass:"aui-radio",attrs:{type:"radio",name:"inscanDiscount",value:"1"},domProps:{checked:t._q(t.installCost.canDiscount,"1")},on:{change:function(e){return t.$set(t.installCost,"canDiscount","1")}}}),t._v(" "),i("span",{staticClass:"text-768395"},[t._v("总设备价格的  "),i("input",{staticClass:"s_install_num",attrs:{type:"text"},domProps:{value:1==t.installCost.canDiscount?t.installCost.allTypeRate:""},on:{blur:function(e){return t.discount(1,"install",e)}}}),t._v(" %,且参与折扣")])]),t._v(" "),i("div",{staticClass:"s_install_list"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.installCost.canDiscount,expression:"installCost.canDiscount"}],staticClass:"aui-radio",attrs:{type:"radio",name:"inscanDiscount",value:"0"},domProps:{checked:t._q(t.installCost.canDiscount,"0")},on:{change:function(e){return t.$set(t.installCost,"canDiscount","0")}}}),t._v(" "),i("span",{staticClass:"text-768395"},[t._v("总设备价格的\n          "),i("input",{staticClass:"s_install_num",attrs:{type:"text"},domProps:{value:0==t.installCost.canDiscount?t.installCost.allTypeRate:""},on:{blur:function(e){return t.discount(0,"install",e)}}}),t._v("\n          %,不参与折扣")])]),t._v(" "),i("div",{staticClass:"s_install_list"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.installCost.canDiscount,expression:"installCost.canDiscount"}],staticClass:"aui-radio",attrs:{type:"radio",name:"inscanDiscount",value:"2"},domProps:{checked:t._q(t.installCost.canDiscount,"2")},on:{change:function(e){return t.$set(t.installCost,"canDiscount","2")}}}),t._v(" "),i("span",{staticClass:"text-768395"},[t._v("按照分类单独设置")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2==t.installCost.canDiscount,expression:"installCost.canDiscount==2"}],staticClass:"s_install_list_table"},[t._m(0),t._v(" "),t._l(t.installcosttable,function(e,s){return i("div",{staticClass:"s_install_table_centon"},[i("div",{staticClass:"text-768395 s_install_table_centon_nav"},[i("i",{staticClass:"icon iconfont ",class:"iconx-"+e.typeId,staticStyle:{margin:"0 5px"}}),t._v(t._s(e.name)+"\n            ")]),t._v(" "),i("div",{staticClass:"s_install_table_centon_per"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.installcosttable[s].rate,expression:"installcosttable[key].rate "}],staticClass:"s_install_table_centon_per_input table_input",attrs:{placeholder:"请输入",type:"text"},domProps:{value:t.installcosttable[s].rate},on:{blur:function(e){return t.dedugrate(s,e,"install")},input:function(e){e.target.composing||t.$set(t.installcosttable[s],"rate",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"s_install_table_centon_discount"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.installcosttable[s].canDiscount,expression:"installcosttable[key].canDiscount"}],ref:"fixedCost_k",refInFor:!0,staticClass:"aui-checkbox",staticStyle:{"margin-top":"8px"},attrs:{type:"checkbox",disabled:t.installcosttable[s].fixedCost>0,value:"1"},domProps:{checked:1==t.installcosttable[s].canDiscount&&t.installcosttable[s].fixedCost?"checked":"",checked:Array.isArray(t.installcosttable[s].canDiscount)?t._i(t.installcosttable[s].canDiscount,"1")>-1:t.installcosttable[s].canDiscount},on:{change:function(e){var i=t.installcosttable[s].canDiscount,a=e.target,n=!!a.checked;if(Array.isArray(i)){var o=t._i(i,"1");a.checked?o<0&&t.$set(t.installcosttable[s],"canDiscount",i.concat(["1"])):o>-1&&t.$set(t.installcosttable[s],"canDiscount",i.slice(0,o).concat(i.slice(o+1)))}else t.$set(t.installcosttable[s],"canDiscount",n)}}})]),t._v(" "),i("div",{staticClass:"s_install_table_centon_fix"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.installcosttable[s].fixedCost,expression:"installcosttable[key].fixedCost"}],staticClass:"table_input s_install_table_centon_per_input",attrs:{placeholder:"请输入",type:"text"},domProps:{value:t.installcosttable[s].fixedCost},on:{blur:function(e){return t.dedugfixedprice(s,e,"install")},input:function(e){e.target.composing||t.$set(t.installcosttable[s],"fixedCost",e.target.value)}}})]),t._v(" "),i("div",{staticStyle:{clear:"both"}})])})],2)]),t._v(" "),i("div",{staticClass:"hr"}),t._v(" "),i("div",{staticClass:"s_install"},[i("div",{staticClass:"s_install_title"},[t._v("设备调试费")]),t._v(" "),i("div",{staticClass:"s_install_list"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.debugCost.canDiscount,expression:"debugCost.canDiscount"}],staticClass:"aui-radio",attrs:{type:"radio",name:"canDiscount",value:"1"},domProps:{checked:t._q(t.debugCost.canDiscount,"1")},on:{change:function(e){return t.$set(t.debugCost,"canDiscount","1")}}}),t._v(" "),i("span",{staticClass:"text-768395"},[t._v("总设备价格的  "),i("input",{staticClass:"s_install_num",attrs:{type:"text"},domProps:{value:1==t.debugCost.canDiscount?t.debugCost.allTypeRate:""},on:{blur:function(e){return t.discount(1,"debug",e)}}}),t._v(" %,且参与折扣")])]),t._v(" "),i("div",{staticClass:"s_install_list"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.debugCost.canDiscount,expression:"debugCost.canDiscount"}],staticClass:"aui-radio",attrs:{type:"radio",name:"canDiscount",value:"0"},domProps:{checked:t._q(t.debugCost.canDiscount,"0")},on:{change:function(e){return t.$set(t.debugCost,"canDiscount","0")}}}),t._v(" "),i("span",{staticClass:"text-768395"},[t._v("总设备价格的\n          "),i("input",{staticClass:"s_install_num",attrs:{type:"text"},domProps:{value:0==t.debugCost.canDiscount?t.debugCost.allTypeRate:""},on:{blur:function(e){return t.discount(0,"debug",e)}}}),t._v("\n          %,不参与折扣")])]),t._v(" "),i("div",{staticClass:"s_install_list"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.debugCost.canDiscount,expression:"debugCost.canDiscount"}],staticClass:"aui-radio",attrs:{type:"radio",name:"canDiscount",value:"2"},domProps:{checked:t._q(t.debugCost.canDiscount,"2")},on:{change:function(e){return t.$set(t.debugCost,"canDiscount","2")}}}),t._v(" "),i("span",{staticClass:"text-768395"},[t._v("按照分类单独设置")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2==t.debugCost.canDiscount,expression:"debugCost.canDiscount==2"}],staticClass:"s_install_list_table"},[t._m(1),t._v(" "),t._l(t.debugcosttable,function(e,s){return i("div",{staticClass:"s_install_table_centon"},[i("div",{staticClass:"text-768395 s_install_table_centon_nav"},[i("i",{staticClass:"icon iconfont icon-left-menu-icon--x-845",class:"icon-left-menu-icon--x-"+e.typeId,staticStyle:{margin:"0 5px"}}),t._v(t._s(e.name)+"\n            ")]),t._v(" "),i("div",{staticClass:"s_install_table_centon_per"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.debugcosttable[s].rate,expression:"debugcosttable[key].rate "}],staticClass:"s_install_table_centon_per_input table_input",attrs:{placeholder:"请输入",type:"text"},domProps:{value:t.debugcosttable[s].rate},on:{blur:function(e){return t.dedugrate(s,e,"debug")},input:function(e){e.target.composing||t.$set(t.debugcosttable[s],"rate",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"s_install_table_centon_discount"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.debugcosttable[s].canDiscount,expression:"debugcosttable[key].canDiscount"}],ref:"fixedCost_k",refInFor:!0,staticClass:"aui-checkbox",staticStyle:{"margin-top":"8px"},attrs:{type:"checkbox",disabled:t.debugcosttable[s].fixedCost>0,value:"1"},domProps:{checked:1==t.debugcosttable[s].canDiscount&&t.debugcosttable[s].fixedCost>0?"checked":"",checked:Array.isArray(t.debugcosttable[s].canDiscount)?t._i(t.debugcosttable[s].canDiscount,"1")>-1:t.debugcosttable[s].canDiscount},on:{change:function(e){var i=t.debugcosttable[s].canDiscount,a=e.target,n=!!a.checked;if(Array.isArray(i)){var o=t._i(i,"1");a.checked?o<0&&t.$set(t.debugcosttable[s],"canDiscount",i.concat(["1"])):o>-1&&t.$set(t.debugcosttable[s],"canDiscount",i.slice(0,o).concat(i.slice(o+1)))}else t.$set(t.debugcosttable[s],"canDiscount",n)}}})]),t._v(" "),i("div",{staticClass:"s_install_table_centon_fix"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.debugcosttable[s].fixedCost,expression:"debugcosttable[key].fixedCost"}],staticClass:"table_input s_install_table_centon_per_input",attrs:{placeholder:"请输入",type:"text"},domProps:{value:t.debugcosttable[s].fixedCost},on:{blur:function(e){return t.dedugfixedprice(s,e,"debug")},input:function(e){e.target.composing||t.$set(t.debugcosttable[s],"fixedCost",e.target.value)}}})]),t._v(" "),i("div",{staticStyle:{clear:"both"}})])})],2)]),t._v(" "),i("div",{staticClass:"hr"}),t._v(" "),i("div",{staticClass:"s_install"},[i("div",{staticClass:"s_install_title"},[t._v("增值税率")]),t._v(" "),i("div",{staticClass:"s_install_list"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.valueAddedTaxRate.useDefault,expression:"valueAddedTaxRate.useDefault"}],staticClass:"aui-radio",attrs:{type:"radio",value:"1",name:"valueAddedTaxRatetype"},domProps:{checked:t._q(t.valueAddedTaxRate.useDefault,"1")},on:{change:function(e){return t.$set(t.valueAddedTaxRate,"useDefault","1")}}}),t._v(" "),i("span",{staticClass:"text-768395"},[t._v("默认 "+t._s(t.valueAddedTaxRate.defaultRate)+"%")])]),t._v(" "),i("div",{staticClass:"s_install_list"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.valueAddedTaxRate.useDefault,expression:"valueAddedTaxRate.useDefault"}],staticClass:"aui-radio",attrs:{type:"radio",value:"0",name:"valueAddedTaxRatetype"},domProps:{checked:t._q(t.valueAddedTaxRate.useDefault,"0")},on:{change:function(e){return t.$set(t.valueAddedTaxRate,"useDefault","0")}}}),t._v(" "),i("span",{staticClass:"text-768395"},[t._v("修改为\n          "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.valueAddedTaxRate.customRate,expression:"valueAddedTaxRate.customRate"}],staticClass:"s_install_num",attrs:{type:"text"},domProps:{value:t.valueAddedTaxRate.customRate},on:{input:function(e){e.target.composing||t.$set(t.valueAddedTaxRate,"customRate",e.target.value)}}}),t._v("\n          %\n        ")])])]),t._v(" "),i("div",{staticClass:"hr"}),t._v(" "),i("div",{staticClass:"s_install"},[i("div",{staticClass:"s_install_title"},[t._v("其它费用")]),t._v(" "),t._l(t.otherCost,function(e,s){return i("div",{staticClass:"s_add",staticStyle:{"margin-top":"5px"}},[i("div",{staticClass:"s_add_conten"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"i.name"}],staticClass:"table_input s_add_name",attrs:{type:"text",placeholder:"费用名称"},domProps:{value:e.name},on:{input:function(i){i.target.composing||t.$set(e,"name",i.target.value)}}}),t._v(" "),i("span",{staticStyle:{float:"left",margin:"0 10px"}},[t._v("|")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.cost,expression:"i.cost"}],staticClass:"table_input s_add_price",attrs:{type:"text",placeholder:"金额"},domProps:{value:e.cost},on:{input:function(i){i.target.composing||t.$set(e,"cost",i.target.value)}}})]),t._v(" "),i("div",{staticClass:"s_add_save",on:{click:function(e){return t.del(s)}}},[t._v("\n            删除\n          ")]),t._v(" "),i("div",{staticStyle:{clear:"both"}})])}),t._v(" "),i("div",{staticClass:"s_add_icon"},[i("i",{staticClass:"icon iconfont icongrayAdd1",staticStyle:{"font-size":"14px",float:"left",width:"24px",height:"24px",background:"#E3E8EF","text-align":"center"},on:{click:function(e){return t.addicon()}}}),t._v(" "),i("span",{staticClass:"s_add_icon_plus"},[t._v(" 填完后记得保存哦！")])])],2),t._v(" "),i("div",{staticStyle:{width:"100%",height:"30px",padding:"20px 0"}},[i("a",{staticClass:"s_btn",on:{click:function(e){return t.btn()}}},[t._v("\n          确认\n        ")])])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"s_install_table_title text-768395"},[i("div",{staticClass:"s_install_table_title_top s_install_table_title_top1"},[t._v("功能分类")]),t._v(" "),i("div",{staticClass:"s_install_table_title_top s_install_table_title_top2"},[t._v("设备总价百分比")]),t._v(" "),i("div",{staticClass:"s_install_table_title_top s_install_table_title_top3"},[t._v("参与折扣")]),t._v(" "),i("div",{staticClass:"s_install_table_title_top s_install_table_title_top4"},[t._v("一口价")]),t._v(" "),i("div",{staticStyle:{clear:"both"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"s_install_table_title text-768395"},[i("div",{staticClass:"s_install_table_title_top s_install_table_title_top1"},[t._v("功能分类")]),t._v(" "),i("div",{staticClass:"s_install_table_title_top s_install_table_title_top2"},[t._v("设备总价百分比")]),t._v(" "),i("div",{staticClass:"s_install_table_title_top s_install_table_title_top3"},[t._v("参与折扣")]),t._v(" "),i("div",{staticClass:"s_install_table_title_top s_install_table_title_top4"},[t._v("一口价")]),t._v(" "),i("div",{staticStyle:{clear:"both"}})])}]};var I=s("VU/8")(b,k,!1,function(t){s("vhKi")},"data-v-2cd84682",null).exports,S={name:"Info",data:function(){return{userInfo:"",isdetails:!1}},methods:{details:function(){this.isdetails=!this.isdetails},outlogin:function(){window.sessionStorage.clear(),window.location.reload(),this.$router.push({path:"/login"})}},created:function(){var t=this.storage.getSession("usreInfo");this.userInfo=t}},j={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("img",{staticClass:"otips",attrs:{src:t.hosturl+t.userInfo.head_pic},on:{click:t.details}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isdetails,expression:"isdetails"}],staticClass:"user_details "},[i("div",{staticClass:"u_box"},[i("div",{staticClass:"u_name"},[t._v(t._s(t.userInfo.nickname))]),t._v(" "),i("div",{staticClass:"comen"},[t._v(t._s(t.userInfo.usercompany))]),t._v(" "),i("div",{staticClass:"comen"},[i("router-link",{staticClass:"comen_a",attrs:{to:"/Changeinfo?opennames=5&type=4"}},[t._v("账号设置")])],1),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"comen cursor",on:{click:function(e){return t.outlogin()}}},[i("a",{staticClass:"comen_a",attrs:{href:"javascript:;"}},[t._v("退出登录")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"comen cursor"},[e("a",{staticClass:"comen_a",attrs:{target:"_blank",href:"http://www.oneapptech.cn"}},[this._v("下载壹智能APP")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"comen cursor"},[e("a",{staticClass:"comen_a",attrs:{target:"_blank",href:"http://dealer.oneapptech.cn"}},[this._v("进入经销商后台")])])}]};var D=s("VU/8")(S,j,!1,function(t){s("FvIl")},"data-v-55b25e6b",null).exports,F=s("71e1"),A=s.n(F),E={name:"Index",data:function(){return{usreInfo:null,state:"",opennames:2,projectType:1,items:[],newProject:"",keyword:"",dleshow:!1,dleitemid:0,delitemkey:-1,additemmodal:!1,additemdata:{},settingshow:!1,settingdata:"",projectstateid:0,freemailid:0,sendemaildata:"",sendemailshow:!1,wxfreedata:"",wxfreeshow:!1,wxcodeurl:"",passdata:"",passshow:!1,itemcopyshow:!1,itemcopydata:"",recently:"",sum:0}},filters:{bgstate:function(t){var e="";return 0==t?e="bgstate1":1==t?e="bgstate2":2==t?e="bgstate3":3==t&&(e="bgstate4"),e}},components:{NavMenu:u,AddItem:p,Setting:I,Info:D,Email:f,Pass:C},methods:{itemcopy:function(t){this.itemcopyshow=!0,this.itemcopydata=t},cancelitemcopy:function(){this.itemcopyshow=!1,this.itemcopydata=""},verifyitemcopy:function(){var t=this;this.axios.post("/index.php?m=Api&c=project&a=projectCp",this.Qs.stringify({userId:this.userInfo.user_id,projectId:this.itemcopydata.id})).then(function(e){1==e.data.status?t.$Message.success(e.data.msg):t.$Message.error(e.data.msg),t.itemcopyshow=!1,t.itemcopydata="",t.getitemlist("","","")})},itempass:function(t){this.passdata=t,this.passshow=!0},closepass:function(){this.passdata="",this.passshow=!1},wxfree:function(t){var e=this;if(this.wxfreedata.id==t.id)this.wxcodeurl="",this.wxfreedata="",this.wxfreeshow=!1;else{var i=0;if(2==this.opennames)i=1;var s=this.hosturl+"/index.php?m=Mobile&c=Project&a=projectTotal&id="+t.id+"&type="+i;A.a.toDataURL(s,{errorCorrectionLevel:"H"},function(t,i){e.wxcodeurl=i}),this.wxfreedata=t,this.wxfreeshow=!0}},freeemail:function(t,e){this.freemailid==t.id?this.freemailid=0:this.freemailid=t.id},sendemail:function(t){this.sendemaildata.id==t.id?(this.sendemaildata="",this.sendemailshow=!1):(this.sendemaildata=t,this.sendemailshow=!0)},projectstate:function(t){this.projectstateid==t.id?this.projectstateid=0:this.projectstateid=t.id},pickprojectstate:function(t,e,i){var s,a=this;this.items[e].projectstate=t;var n=i.platformarray;if(n){var o=[];n&&n.forEach(function(t,e){o.push(t.id)})}var c=i.functionarray;if(c){var r=[];c&&c.forEach(function(t,e){r.push(t.id)})}this.axios.post("/index.php?m=Api&c=project&a=addfast",this.Qs.stringify((s={userid:this.userInfo.user_id,projectName:i.projectname,customerName:i.customername,customerTelephone:i.customertelephone,customerAddress:i.customeraddress,functionArray:i.functionarray,projectState:t,projectid:i.id},l()(s,"functionArray",r?r.join(","):[]),l()(s,"platformArray",o?o.join(","):[]),s))).then(function(t){1==t.data.status?a.$Message.success("修改状态成功"):a.$Message.error("修改状态失败"),a.projectstateid=0})},closeset:function(t){this.settingdata="",this.settingshow=!1},itemsetting:function(t){this.settingshow=!0,this.settingdata=t},closeadditem:function(){this.additemdata={},this.additemmodal=!1,this.getitemlist("","","")},closesendemail:function(){this.freemailid=0,this.sendemaildata="",this.sendemailshow=!1},additem:function(t,e){t&&(this.additemdata=t),this.additemmodal=!0},navigate:function(t){t.id=t.project_id?t.project_id:t.id,2==this.opennames&&this.$router.push({path:"/drawing/bitmap",query:{id:t.id}}),3==this.opennames&&this.$router.push({path:"/cate",query:{id:t.id}}),4==this.opennames&&this.$router.push({path:"/detailMap",query:{id:t.id}})},common_navigate:function(t,e){e&&this.$router.push({path:"/"+e,query:{id:t.id,opennames:this.opennames}})},dleitem:function(t,e){this.dleitemid=t,this.delitemkey=e,this.dleshow=!0},verifydleitem:function(){var t=this;if(this.dleitemid>0){var e={user_id:this.userInfo.user_id,projectid:this.dleitemid};this.axios.post("index.php?m=Api&c=project&a=projectdel",this.Qs.stringify(e)).then(function(e){1==e.data.status?(t.items.splice(t.delitemkey,1),t.dleitemid=0,t.delitemkey=-1,t.$Message.success(e.data.msg)):t.$Message.error(e.data.msg)})}},canceldleitem:function(){this.dleitemid=0,this.delitemkey=-1},search:function(){var t=this.keyword;this.getitemlist("",t)},getitemlist:function(t,e,i){var s=this,a=this.storage.getSession("itemcate"),n=this.storage.getSession("platform");this.axios.post("/index.php?m=Api&c=project&a=projectInfo",this.Qs.stringify({user_id:this.userInfo.user_id,projectType:t||this.projectType,keyWord:e||this.keyword,projectState:i||this.state})).then(function(t){var e=t.data.result;2!=s.projectType&&e&&e.forEach(function(t){if(t.functionarray&&null!=t.functionarray){var e=t.functionarray.split(","),i=[];e&&e.forEach(function(t){a&&a.forEach(function(e){e.id==t&&i.push(e)})}),t.functionarray=i}if(t.platformarray&&null!=t.platformarray&&0==s.projectType){var o=t.platformarray.split(","),c=[];o&&o.forEach(function(t){n&&n.forEach(function(e){e.id==t&&c.push(e)})}),t.platformarray=c}}),s.items=e,s.newProject=t.data.newProject,s.recently=t.data.recently})},itemcate:function(){var t=this,e=this.storage.getSession("itemcate");e||this.axios.post("/index.php?m=Api&c=goods&a=goodsCategoryInfo",this.Qs.stringify({type:!0})).then(function(e){e.data.result&&e.data.result.forEach(function(t){844==t.parent_id?t.staple=1:t.staple=2}),t.storage.setSession("itemcate",e.data.result)})},platform:function(){var t=this,e=this.storage.getSession("platform");e||this.axios.post("/index.php?m=Api&c=Goods&a=getPlatform",this.Qs.stringify({user_id:this.userInfo.user_id})).then(function(e){t.storage.setSession("platform",e.data.result)})}},updated:function(){var t=this;this.$nextTick(function(){t.$Spin.hide()})},created:function(){var t=this;this.$Spin.show();var e=this.$route.query.type;1==e?e="":2==e?e=0:3==e?e=1:4==e?e=2:5==e&&(e=3);var i=this.storage.getSession("usreInfo");this.axios.get("/index.php?m=Api&c=user&a=message&user_id="+i.user_id).then(function(e){var i=0,s=e.data.list;s&&s.forEach(function(t){0==t.isread&&(i+=1)}),t.sum=i});var s=this.$route.query.opennames;2==s?(this.opennames=2,this.projectType=2):3==s?(this.opennames=3,this.projectType=1):4==s&&(this.opennames=4,this.projectType=0),this.state=e,(i=this.storage.getSession("usreInfo"))&&(this.userInfo=i,this.getitemlist("","",""),this.itemcate(),this.platform())},watch:{$route:function(t){var e=t.query.type;1==e?e="":2==e?e=0:3==e?e=1:4==e?e=2:5==e&&(e=3),this.state=e;var i=t.query.opennames;2==i?this.projectType=2:3==i?this.projectType=1:4==i&&(this.projectType=0),this.opennames=parseInt(i),this.getitemlist()}}},z={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",staticStyle:{overflow:"hidden"},style:[t.pageheight,t.pagewidth,t.pagebg]},[i("AddItem",{attrs:{itemdata:t.additemdata,value:t.additemmodal},on:{closeFn:t.closeadditem}}),t._v(" "),i("Email",{attrs:{sendtype:t.opennames,itemdata:t.sendemaildata,value:t.sendemailshow},on:{closeFn:t.closesendemail}}),t._v(" "),i("Pass",{attrs:{sendtype:t.opennames,itemdata:t.passdata,value:t.passshow},on:{closeFn:t.closepass}}),t._v(" "),i("NavMenu",{staticClass:"nav"}),t._v(" "),i("div",{staticClass:"center"},[i("div",{staticClass:"center_top"},[i("div",{staticClass:"center_top_left"}),t._v(" "),i("div",{staticClass:"center_top_right"},[i("div",{staticClass:"center_top_right_input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"center_top_right_input_search",attrs:{type:"text",placeholder:"项目名/客户名/电话"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),t._v(" "),i("Icon",{staticClass:"center_top_right_input_search_ico",attrs:{type:"ios-search"},on:{click:t.search}})],1),t._v(" "),i("div",{staticClass:"center_top_right_message"},[i("router-link",{staticClass:"center_top_right_message_btn",attrs:{to:{path:"/message?other=6"}}},[i("Icon",{staticStyle:{color:"#00B9E0","font-size":"30px"},attrs:{type:"ios-notifications-outline"}}),t._v(" "),t.sum>0?i("span",{staticClass:"total"},[t._v(t._s(t.sum))]):t._e()],1)],1),t._v(" "),i("Info",{staticClass:"center_top_right_info"}),t._v(" "),i("div",{staticStyle:{width:"3%"}})],1)]),t._v(" "),i("div",{staticClass:"center_buttom"},[i("div",{staticClass:"center_buttom_left"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.items.length<=0,expression:"items.length <=0"}],staticClass:"center_buttom_left_list_tip"},[t._v("\n          点击右侧“新建项目”\n        ")]),t._v(" "),i("div",{staticClass:"center_buttom_left_list"},t._l(t.items,function(e,s){return i("div",{key:s,staticClass:"center_buttom_left_list_li",class:t._f("bgstate")(e.projectstate)},[i("div",{staticClass:"item_title"},[i("div",{staticClass:"item_title_text"},[t._v("\n                "+t._s(e.projectname)+"\n              ")]),t._v(" "),i("div",{staticClass:"item_state"},[i("div",{staticClass:"size12 text-9ca9bb"},[t._v("No."+t._s(e.id))]),t._v(" "),i("div",{staticClass:"size12 text-00b9e0  cursor projectstatetext",on:{click:function(i){return t.projectstate(e,s)}}},[0==e.projectstate?i("span",[t._v("进行中 ")]):1==e.projectstate?i("span",[t._v("测试 ")]):2==e.projectstate?i("span",[t._v("已成交 ")]):3==e.projectstate?i("span",[t._v("失败 ")]):t._e(),t._v(" "),i("i",{staticClass:"icon iconfont iconblue1 size12"})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.projectstateid==e.id,expression:"projectstateid==item.id"}],staticClass:"projectstatename cursor"},[i("div",{staticClass:"projectstatename_li text-center",class:0==e.projectstate?"text-00b9e0":"",on:{click:function(i){return t.pickprojectstate(0,s,e)}}},[t._v("进行中")]),t._v(" "),i("div",{staticClass:"projectstatename_li text-center",class:1==e.projectstate?"text-00b9e0":"",on:{click:function(i){return t.pickprojectstate(1,s,e)}}},[t._v("测试")]),t._v(" "),i("div",{staticClass:"projectstatename_li text-center",class:2==e.projectstate?"text-00b9e0":"",on:{click:function(i){return t.pickprojectstate(2,s,e)}}},[t._v("已成交")]),t._v(" "),i("div",{staticClass:"projectstatename_li text-center",class:3==e.projectstate?"text-00b9e0":"",on:{click:function(i){return t.pickprojectstate(3,s,e)}}},[t._v("失败")])])])]),t._v(" "),i("div",{staticClass:"item_centenr cursor",on:{click:function(i){return t.navigate(e)}}},[i("div",{staticClass:"item_centenr_li"},[i("div",{staticClass:"item_centenr_li_name text-9ca9bb"},[t._v("客户姓名：")]),t._v(" "),i("div",{staticClass:"item_centenr_li_text"},[t._v(t._s(e.customername))])]),t._v(" "),i("div",{staticClass:"item_centenr_li"},[i("div",{staticClass:"item_centenr_li_name text-9ca9bb"},[t._v("客户电话：")]),t._v(" "),i("div",{staticClass:"item_centenr_li_text"},[t._v(t._s(e.customertelephone))])]),t._v(" "),i("div",{staticClass:"item_centenr_li"},[i("div",{staticClass:"item_centenr_li_name text-9ca9bb"},[t._v("客户地址：")]),t._v(" "),i("div",{staticClass:"item_centenr_li_text ellipsis-2"},[t._v(t._s(e.customeraddress))])]),t._v(" "),4==t.opennames||3==t.opennames?i("div",{staticClass:"item_centenr_li opennames3"},[i("div",{staticClass:"item_centenr_li_name text-9ca9bb"},[t._v("已选功能：")]),t._v(" "),i("div",{staticClass:"item_centenr_li_text platform"},[i("div",{staticClass:"platform_ul"},t._l(e.functionarray,function(e,s){return i("div",{key:s,staticClass:"platform_li"},[t._v("\n                      "+t._s(e.name)+"\n                    ")])}),0)])]):t._e(),t._v(" "),4==t.opennames?i("div",{staticClass:"item_centenr_li opennames4"},[i("div",{staticClass:"item_centenr_li_name text-9ca9bb"},[t._v("智能平台：")]),t._v(" "),i("div",{staticClass:"item_centenr_li_text platform"},[i("div",{staticClass:"platform_ul"},t._l(e.platformarray,function(e,s){return i("div",{key:s,staticClass:"platform_li"},[t._v("\n                      "+t._s(e.name)+"\n                    ")])}),0)])]):t._e()]),t._v(" "),i("div",{staticClass:"item_footer"},[i("div",{staticClass:"item_footer_left cursor"},[i("div",{staticClass:"icon "},[i("i",{staticClass:"icon iconfont iconlock",on:{click:function(i){return t.itempass(e)}}})]),t._v(" "),2!=t.opennames?i("div",{staticClass:"icon",on:{click:function(i){return t.common_navigate(e,"offer")}}},[i("i",{staticClass:"icon iconfont iconquote"})]):t._e(),t._v(" "),i("div",{staticClass:"icon",on:{click:function(i){return t.common_navigate(e,"preview")}}},[i("i",{staticClass:"icon iconfont iconnormal"})]),t._v(" "),2!=t.opennames?i("div",{staticClass:"icon",on:{click:function(i){return t.itemsetting(e,"setting")}}},[i("i",{staticClass:"icon iconfont iconsetting_blue"})]):t._e(),t._v(" "),i("div",{staticClass:"icon share"},[i("i",{staticClass:"icon iconfont iconsharept_blue",on:{click:function(i){return t.freeemail(e,s)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.freemailid==e.id,expression:"freemailid==item.id"}],staticClass:"share_center size14 text-768395"},[i("div",{staticStyle:{"border-bottom":"solid 1px #E3E8EF",position:"relative"},on:{click:function(i){return t.wxfree(e)}}},[t._v("\n                      发送到微信\n                      "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.wxfreedata.id==e.id,expression:"wxfreedata.id==item.id"}],staticClass:"wxcode"},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center",width:"100%",height:"100%","flex-direction":"column"}},[i("img",{staticStyle:{margin:"10px",background:"#EAEFF5","margin-bottom":"0px"},attrs:{width:"120",height:"120",src:t.wxcodeurl,alt:""}}),t._v(" "),i("div",{staticStyle:{"line-height":"20px"}},[t._v("手机微信扫码查看")])])])]),t._v(" "),i("div",{on:{click:function(i){return t.sendemail(e)}}},[t._v("发送到邮箱")])])]),t._v(" "),i("div",{staticClass:"icon"},[i("i",{staticClass:"icon iconfont iconduplicate",on:{click:function(i){return t.itemcopy(e)}}})]),t._v(" "),i("div",{staticClass:"icon",on:{click:function(i){return t.additem(e,s)}}},[i("i",{staticClass:"icon iconfont iconmodify"})]),t._v(" "),i("div",{staticClass:"icon",on:{click:function(i){return t.dleitem(e.id,s)}}},[i("i",{staticClass:"icon iconfont iconred_pt size12"})])]),t._v(" "),i("div",{staticClass:"item_footer_right size12 text-9ca9bb"},[t._v("创建："+t._s(e.x_createtime))])])])}),0)]),t._v(" "),i("div",{staticClass:"center_buttom_right"},[i("div",{staticClass:"c_b_right_top"},[i("div",{staticClass:"c_b_right_top_btn text-00b9e0 size14 cursor",on:{click:function(e){return t.additem("","")}}},[i("i",{staticClass:"icon iconfont icongrayAdd size20 ",staticStyle:{"margin-right":"10px"}}),t._v("\n            新建项目\n          ")])]),t._v(" "),t.recently?i("div",{staticClass:"c_b_right_footer"},[i("div",{staticClass:"c_b_right_footer_item"},[i("div",{staticClass:"c_b_right_footer_item_title text-768395"},[t._v("最近打开")]),t._v(" "),t._l(t.recently,function(e,s){return i("div",{key:s,staticClass:"text-9ca9bb size12 cursor ellipsis ",staticStyle:{margin:"3px auto"},on:{click:function(i){return t.navigate(e)}}},[t._v(t._s(e.project_name)+"\n            ")])})],2)]):t._e(),t._v(" "),t.newProject?i("div",{staticClass:"c_b_right_footer"},[i("div",{staticClass:"c_b_right_footer_item"},[i("div",{staticClass:"c_b_right_footer_item_title text-768395"},[t._v("最新项目")]),t._v(" "),t._l(t.newProject,function(e,s){return i("div",{key:s,staticClass:"text-9ca9bb size12 cursor ellipsis ",staticStyle:{margin:"3px auto"},on:{click:function(i){return t.navigate(e)}}},[t._v(t._s(e.projectname)+"\n            ")])})],2)]):t._e()])])]),t._v(" "),i("Modal",{staticClass:"text-center",attrs:{width:"300px",title:"提示","mask-closable":!1},on:{"on-cancel":t.canceldleitem,"on-ok":t.verifydleitem},model:{value:t.dleshow,callback:function(e){t.dleshow=e},expression:"dleshow"}},[i("div",[t._v("\n      确认删除该项目吗？\n    ")])]),t._v(" "),i("Modal",{staticClass:"text-center",attrs:{width:"300px",title:"提示","mask-closable":!1},on:{"on-cancel":t.cancelitemcopy,"on-ok":t.verifyitemcopy},model:{value:t.itemcopyshow,callback:function(e){t.itemcopyshow=e},expression:"itemcopyshow"}},[i("div",[t._v("\n      项目复制将复制项目中所有的内容，包括原项目中使用的商品、制作的点位图、进行的项目设置等。包括已被删除或下架的商品。请知悉。\n    ")])]),t._v(" "),t.settingshow&&t.settingdata?i("Setting",{attrs:{settindata:t.settingdata},on:{closeFn:t.closeset}}):t._e()],1)},staticRenderFns:[]};var M=s("VU/8")(E,z,!1,function(t){s("5vCr")},"data-v-2b9378dc",null).exports,N=s("Xxa5"),T=s.n(N),P=s("exGp"),R=s.n(P),B={name:"Arrow",props:["imgwidth","imgheight","x1","y1","x2","y2","color","h","canvas_id","data"],beforeUpdate:function(){var t=this;this.$nextTick(function(){var e,i,s,a,n,o,c,r,l=t.imgwidth,d=t.imgheight,u=t.x1,h=t.x2,_=t.y1,p=t.y2,v=t.color,m=h*l,f=p*d,g=u*l,y=_*d,C=t.canvas_id,x=document.getElementById(C).getContext("2d");x.beginPath(),e=x,o=(a=g)-(i=m),c=(n=y)-(s=f),r=Math.atan2(c,o),e.strokeStyle="rgb("+v+")",e.fillStyle="rgb("+v+")",e.lineWidth=4,e.moveTo(i,s),e.lineTo(a,n),e.lineTo(a-20*Math.cos(r-Math.PI/6)-4,n-20*Math.sin(r-Math.PI/6)-3),e.moveTo(a,n),e.lineTo(a-20*Math.cos(r+Math.PI/6)+4,n-20*Math.sin(r+Math.PI/6)+4),x.closePath(),x.stroke()})},mounted:function(){var t=this;this.$nextTick(function(){var e,i,s,a,n,o,c,r,l=t.imgwidth,d=t.imgheight,u=t.x1,h=t.x2,_=t.y1,p=t.y2,v=t.color,m=h*l,f=p*d,g=u*l,y=_*d,C=t.canvas_id,x=document.getElementById(C).getContext("2d");x.beginPath(),e=x,o=(a=g)-(i=m),c=(n=y)-(s=f),r=Math.atan2(c,o),e.strokeStyle="rgb("+v+")",e.lineWidth=4,e.moveTo(i,s),e.lineTo(a,n),e.lineTo(a-20*Math.cos(r-Math.PI/6)-4,n-20*Math.sin(r-Math.PI/6)-3),e.moveTo(a,n),e.lineTo(a-20*Math.cos(r+Math.PI/6)+4,n-20*Math.sin(r+Math.PI/6)+4),x.closePath(),x.stroke()})}},$={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("canvas",{attrs:{id:this.canvas_id,height:this.imgheight+"px",width:this.imgwidth+"px"}})])},staticRenderFns:[]};var L=s("VU/8")(B,$,!1,function(t){s("VXkj")},"data-v-741ca22e",null).exports,Q=s("mtWM"),q=s.n(Q),H={name:"Bitmap",data:function(){return{sideLeft:0,sideTop:0,usreInfo:"",project_id:"",cate:"",layer:"",defaultlayer:"",defaultlayerkey:0,activecateid:0,alreadyshow:!1,floorswitchshow:!1,addfoolsshow:!1,specialcateid:0,catenextdata:"",catenextdatakey:0,addfoolsdata:"",addfoolsname:"",addfoolsid:"",dlefloorshow:!1,dlefloordata:"",imageheight:0,imagewidtn:0,imageratio:"",isimageratio:!1,imagesite:{top:0,left:0,right:0,bottom:0},iconsize:20,iconssmall:"小",mattertype:0,isrmicon:!1,isiconhide:!1,issearchicon:!1,searchiconid:0,sendemaildata:"",sendemailshow:!1,maphideshop:1,opennames:2,sliderdata:40,slidernum:1}},components:{Email:f,Arrow:L},methods:{imgMoseeWheel:function(t){var e=this,i=this.$refs.img2,s=t.currentTarget,a=t||window.event,n=i.getAttribute("src"),o=new Image;o.src=n;var c=0,r=0;o.onload=function(){c=o.width,r=o.height;var t=!0;t=a.detail?a.detail>0:a.wheelDelta<0,a.preventDefault&&a.preventDefault();var i=s.offsetWidth,n=s.offsetHeight,l=s.offsetLeft,d=s.offsetTop,u=(a.clientX-l)/i,h=(a.clientY-d)/n,_=(parseFloat(s.style.width),parseFloat(s.style.height));if(t)if(r>c)if(_>700)e.imagewidtn=.95*s.offsetWidth,e.imageheight=.95*s.offsetHeight;else{var p=700/r;e.imageheight=700,e.imagewidtn=c*p}else if(c>r)e.imagewidtn>1e3&&(e.imagewidtn=.95*s.offsetWidth,e.imageheight=.95*s.offsetHeight);else if(r>700&&c>700){var v=700/r;e.imagewidtn=v*c,e.imageheight=700}else e.imagewidtn=c,e.imageheighth=r;else e.imagewidtn<c&&(e.imagewidtn=1.1*s.offsetWidth,e.imageheight=1.1*s.offsetHeight);return s.style.left=l-u*(e.imagewidtn-i)+"px",s.style.top=d-h*(e.imageheight-n)+"px",a.preventDefault?(a.preventDefault(),a.stopPropagation()):(a.cancelBubble=!0,a.returnValue=!1),!1}},moveBox:function(t){t.preventDefault(),this.downX=t.clientX,this.downY=t.clientY;var e=this.$refs.img2,i=this.$refs.mainbox;e.style.cursor="move";var s=i.getBoundingClientRect().left,a=i.getBoundingClientRect().top,n=t.clientX-s,o=t.clientY-a;document.onmousemove=function(t){return i.style.left=t.clientX-n-document.querySelector(".left").getBoundingClientRect().right+"px",i.style.top=t.pageY-o+"px",!1},document.onmouseup=function(){e.style.cursor="default",document.onmousemove=null}},sliderval:function(t){40==t&&(this.slidernum=1.2),60==t&&(this.slidernum=1.4),80==t&&(this.slidernum=1.6),100==t&&(this.slidernum=1.8),console.log(t)},maphide:function(){var t=1==this.maphideshop?0:1;return this.maphideshop=t,!1},transform:function(t){console.log(t)},sendemail:function(t){var e={createtime:1574054122,customeraddress:"111",customername:"1",customertelephone:"15123456789",functionarray:"",id:this.project_id,platformarray:"",projectname:"1",projectstate:0,x_createtime:"2019.11.18"};this.sendemaildata=e,this.sendemailshow=!0},closesendemail:function(){this.sendemaildata="",this.sendemailshow=!1},specialactivecatenum:function(t,e,i){this.catenextdatakey=e},FullScreen:function(t){(t=this.$refs.data).requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},searchicon:function(){if(1==this.issearchicon)for(var t=this.defaultlayer.icon,e=0;e<t.length;e++)t[e].ispreview=!1;this.issearchicon=!this.issearchicon},mapcate:function(t){var e=this.defaultlayer,i=e.icon;i&&i.forEach(function(e,i){e.ispreview=!1,t&&(e.parent_id!=t.id?e.ispreview=!0:e.ispreview=!1)}),this.defaultlayer=e},iconhide:function(){this.isiconhide=!this.isiconhide,this.$router.push({path:"/drawing/lable",query:{id:this.project_id,key:this.defaultlayerkey,opennames:this.opennames}})},rmicon:function(){this.isrmicon=!this.isrmicon},navpre:function(t){this.$router.push({path:"/preview",query:{id:t}})},small:function(t){"大"==t&&(this.iconsize=30),"中"==t&&(this.iconsize=25),"小"==t&&(this.iconsize=20),this.posticon()},matter:function(t){this.mattertype==t?this.mattertype=0:this.mattertype=t,this.posticon()},posticon:function(){var t=this;if("大"==this.iconssmall)var e=3;if("中"==this.iconssmall)e=2;if("小"==this.iconssmall)e=1;var i={userId:this.usreInfo.user_id,projectId:this.project_id,floorId:this.defaultlayer.floorid,icontype:this.mattertype,pointIconSize:e};this.axios.post("index.php?m=Api&c=project&a=changeIconProject",this.Qs.stringify(i)).then(function(e){t.$Message.success(e.data.msg)})},addicons:function(t){var e=this;t.preventDefault&&t.preventDefault();var i=this.catenextdata,s=this.defaultlayer,a=this.catenextdatakey,n=this.$refs.mainbox.getBoundingClientRect().left,o=this.$refs.mainbox.getBoundingClientRect().top;if(this.isrmicon)return!1;if(!i)return this.$Message.error("请选择分类"),!1;var c=(t.clientX-n)/this.imagewidtn,r=(t.clientY-o)/this.imageheight,l={iconid:"p1558516974017",iconname:i.iconname,id:109208,image:i.image[a],image1:i.image1[a],image2:i.image2[a],name:i.name,onegoodscategoryid:i.id,parent_id:i.parent_id,portid:i.type,portnum:i.type?a:"",posx:c,posy:r,ispreview:!1};s.icon.push(l),this.defaultlayer=s;var d=s.cate,u=0;d&&d.forEach(function(t,e){i.id==t.icon&&(t.num+=1,u=1)}),0==u&&d.push({codes:i.codes,icon:i.id,iconname:i.iconname,image:i.image[0],name:i.name,num:1,parent_id:i.parent_id});var h=this.cate;h&&h.forEach(function(t,e){var s=t.child;s&&s.forEach(function(e,s){i.id==e.id&&(i.type?(e.num+=a+1,t.num+=a+1):(e.num+=1,t.num+=1))})}),this.cate=h,this.axios.post("index.php?m=Api&c=project&a=changeIconProject",this.Qs.stringify({userId:this.usreInfo.user_id,projectId:this.project_id,floorId:s.floorid,pointIconSize:1,operate:1,typeId:i.type?"":i.id,portId:i.type,posx:c,posy:r,pointId:"wp"+this.storage.gettime(),portNum:i.type?a+1:""})).then(function(t){1!=t.data.status&&e.$Message.error(t.data.msg)})},moveIcons:function(t,e,i,s){var a=this.defaultlayer.icon[e],n=this.imageheight,o=this.imagewidtn;this.imagesite;t.preventDefault&&t.preventDefault();var c=this;if(this.isrmicon){c.handleicon(a,3),c.defaultlayer.icon.splice(e,1);var r=c.defaultlayer.cate;r&&r.forEach(function(t,e){a.onegoodscategoryid==t.icon&&(t.num-=1)});var l=this.cate;return l&&l.forEach(function(t,e){var i=t.child;i&&i.forEach(function(e,i){a.onegoodscategoryid==e.id&&(a.portid?(e.num=e.num-a.portnum,t.num=t.num-a.portnum):(e.num=e.num-1,t.num=t.num-1))})}),this.cate=l,!1}var d=null,u=null,h=(document.querySelector(".right").offsetLeft,c=this,t.currentTarget);t.clientX,h.offsetLeft,t.clientY,h.offsetTop;document.onmousemove=function(t){var e=c.$refs.mainbox.getBoundingClientRect().left,i=c.$refs.mainbox.getBoundingClientRect().top,s=t.clientX,r=t.clientY;d=(s-e)/o,u=(r-i)/n,s-e<=o&&s-e>=0&&(a.posx=d),r-i<=n&&r-i>=0&&(a.posy=u)},document.onmouseup=function(t){return document.onmousemove=null,document.onmousemove=null,c.handleicon(a,2),!1}},handleicon:function(t,e){var i=this;this.axios.post("/index.php?m=Api&c=project&a=changeIconProject",this.Qs.stringify({userId:this.usreInfo.user_id,projectId:this.project_id,floorId:this.defaultlayer.floorid,operate:e||1,typeId:t.onegoodscategoryid,portId:t.onegoodscategoryid?"":t.portid,posx:t.posx,posy:t.posy,pointId:t.iconid,portNum:t.onegoodscategoryid?"":t.portnum})).then(function(t){if(1!=t.data.status)return i.$Message.error(t.data.msg),!1})},loadImage:function(t){var e=this,i=t.currentTarget.getAttribute("src"),s=t.currentTarget.parentNode;s.style.left=0,s.style.top=0;var a=new Image,n=0,o=0;a.src=i,a.onload=function(){if(n=a.height,(o=a.width)>n)if(o>998){var t=998/o,i=798/n;n*t>798?(e.imageheight=798,e.imagewidtn=o*i):(e.imagewidtn=998,e.imageheight=n*t)}else e.imagewidtn=o,e.imageheight=n;else if(n>o)if(n>798){i=798/n;e.imagewidtn=o*i,e.imageheight="798"}else e.imagewidtn=o,e.imageheight=n;else if(o>798&&n>798){var s=798/n;e.imagewidtn=o*s,e.imageheight=798}else e.imagewidtn=o,e.imageheight=n;e.isload=!0,e.sideLeft=(998-e.imagewidtn)/2,e.sideTop=(798-e.imageheight)/2}},floor_switch:function(){this.floorswitchshow=!this.floorswitchshow},addfools:function(t){t&&(this.addfoolsdata=t,this.addfoolsname=t.layername),this.addfoolsshow=!this.addfoolsshow},addfoolsbtn:function(t){var e=this;if(!this.addfoolsname)return this.$Message.error("请填写楼层名称"),!1;if(this.addfoolsdata)var i={userId:this.usreInfo.user_id,projectId:this.project_id,floorId:this.addfoolsdata.floorid,floorName:this.addfoolsname,time:this.storage.gettime()};else i={userId:this.usreInfo.user_id,projectId:this.project_id,floorId:"li"+(new Date).getTime(),floorName:this.addfoolsname,time:this.storage.gettime()};this.axios.post("/index.php?m=Api&c=project&a=projectAddFloor",this.Qs.stringify(i)).then(function(t){1==t.data.status?(e.$Message.success(t.data.msg),e.addfools(),e.getfools()):e.$Message.error(t.data.msg),e.addfoolsname=""}),this.floor_switch()},already:function(t){this.alreadyshow=t},back:function(){this.$router.push({path:"/index",query:{opennames:2,type:1}})},activecate:function(t){this.activecateid==t.id?(this.activecateid="",this.specialcateid=0,1==this.issearchicon&&this.mapcate("")):(1==this.issearchicon&&this.mapcate(t),this.activecateid=t.id)},catenext:function(t){this.catenextdatakey=0,t.id==this.catenextdata.id?this.catenextdata="":(this.specialcateid=0,this.catenextdata=t)},specialactivecate:function(t){this.specialcateid==t.id?(this.specialcateid=0,this.catenextdata=""):(this.catenextdata=t,this.specialcateid=t.id)},getfools:function(t,e){var i=this,s=this,a={userId:s.usreInfo.user_id,projectId:s.project_id,layer:!0};q.a.all([q.a.post(s.hosturl+"/index.php?m=Api&c=project&a=getIconsProjectPC",s.Qs.stringify(a)),q.a.post(s.hosturl+"/index.php?m=Api&c=project&a=projectIconCategory",s.Qs.stringify(a))]).then(q.a.spread(function(t,e){var a=e.data.result;i.mattertype=t.data.icontype,1==t.data.pointIconSize&&(i.iconsize=20,i.iconssmall="小"),2==t.data.pointIconSize&&(i.iconsize=25,i.iconssmall="中"),3==t.data.pointIconSize&&(i.iconsize=30,i.iconssmall="大");var n=t.data.layer;if(n){n&&n.forEach(function(t,e){var i=t.marks.marks;if(i)for(var s=0;i.length>s;s++)14==i[s].type&&(i[s].info.a=2*Math.PI-parseFloat(i[s].info.a))}),s.layer=n;var o=n[i.defaultlayerkey];i.maphideshop=1==o.marks.hide?1:0;var c=o.icon;c&&c.forEach(function(t,e){t.ispreview=!1}),s.defaultlayer=o;var r=""+i.hosturl+n[i.defaultlayerkey].image,l=new Image;l.src=r,l.onload=R()(T.a.mark(function t(){var e,s;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.height;case 2:return e=t.sent,t.next=5,l.width;case 5:s=t.sent,1e3/s,i.isimageratio=!0,e>s&&e>800&&(i.imageratio=1);case 9:case"end":return t.stop()}},t,i)})),i.isimageratio=!0;var d=[];n&&n.forEach(function(t,e){var i=t.icon;i&&i.forEach(function(t,e){t.ispreview=!1,d.push(t)})}),a&&a.forEach(function(t,e){d&&d.forEach(function(e,i){var s=t.child;s&&s.forEach(function(t,i){e.onegoodscategoryid==t.id&&(""!=e.portid?t.num+=e.portnum:t.num+=1)})});var i=t.child;i&&i.forEach(function(e,i){t.num+=e.num})})}else s.floorswitchshow=!0,s.defaultlayer="",s.imageheight=0,s.layer="";s.cate=a}))},comcatenum:function(){var t=this.layer,e=this.cate;if(t){var i=[];t&&t.forEach(function(t,e){var s=t.icon;s&&s.forEach(function(t,e){i.push(t)})}),e&&e.forEach(function(t,e){i&&i.forEach(function(e,i){var s=t.child;s&&s.forEach(function(t,i){e.onegoodscategoryid==t.id&&(""!=e.portid?t.num+=e.portnum:t.num+=1)})});var s=t.child;s&&s.forEach(function(e,i){t.num+=e.num})})}this.cate=e},foolsdel:function(t,e){this.dlefloorshow=!0,this.dlefloordata=t},canceldlefloor:function(){this.dlefloordata="",this.dlefloorshow=!1},verifydlefloor:function(){var t=this;if(this.dlefloordata){var e={projectId:this.project_id,userId:this.usreInfo.user_id,floorId:this.dlefloordata.floorid};this.axios.post("/index.php?m=Api&c=project&a=projectDelFloor",this.Qs.stringify(e)).then(function(e){1==e.data.status?(t.$Message.success(e.data.msg),t.getfools()):t.$Message.error(e.data.msg)})}},activefools:function(t,e){var i=this;if(this.imageheight=0,this.imagewidtn=0,this.sideTop=0,this.sideLeft=0,this.defaultlayerkey=e,this.catenextdata="",this.imageratio=0,this.defaultlayer=t,t.image){this.$Spin.show();var s=""+this.hosturl+t.image,a=new Image;a.src=s,a.onload=R()(T.a.mark(function t(){var e,s;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.height;case 2:return e=t.sent,t.next=5,a.width;case 5:s=t.sent,1e3/s,i.isimageratio=!0,e>s&&e>800&&(i.imageratio=1);case 9:case"end":return t.stop()}},t,i)})),this.$Spin.hide()}this.floor_switch(),this.$Spin.hide()},imgUpload:function(t){if(!this.defaultlayer)return this.$Message.error("请先添加楼层"),!1;var e=t.target.files[0],i=new FormData;i.append("file",e),i.append("chunk","0");var s=this;this.axios.post("/index.php?m=Api&c=Upload&a=imageUp",i).then(function(t){if("SUCCESS"==t.data.result.state){var e=t.data.result.url;s.floorimg=e;var i={userId:s.usreInfo.user_id,projectId:s.project_id,floorId:s.defaultlayer.floorid,photoUrl:e,time:s.storage.gettime()};s.axios.post("/index.php?m=Api&c=project&a=editPhotoProject",s.Qs.stringify(i)).then(function(t){s.axios.post("/index.php?m=Api&c=project&a=getIconsProject",s.Qs.stringify({userId:s.usreInfo.user_id,projectId:s.project_id,layer:!0})).then(function(e){1==e.data.status?s.$Message.success(t.data.msg):s.$Message.error("上传错误2"),s.getfools()}).catch(function(t){console.log(t)})})}})}},updated:function(){this.$refs.mainbox.addEventListener("mousewheel",this.imgMoseeWheel,!1),this.$refs.mainbox.addEventListener("DOMMouseScroll",this.imgMoseeWheel,!1)},mounted:function(){var t=this;this.$nextTick(function(){t.$Spin.hide()})},created:function(){this.$Spin.show();var t=this.storage.getSession("usreInfo");if(!t)return this.$router.replace("/login"),!1;this.usreInfo=t;var e=this.$route.query.id;this.project_id=e;var i=this.$route.query.key?this.$route.query.key:0;this.defaultlayerkey=i;var s=this.$route.query.opennames;this.opennames=s||2,this.getfools("created",i)},filters:{picture:function(t,e){if(t>0&&e>0){if(t>e&&t>800)return{height:"800px"};if(t<e&&e>1e3)return{width:"1000px"}}},transform:function(t){return"transform: rotate("+180*(2*Math.PI-parseFloat(t))+"deg)"},textnbr:function(t){console.log(t)}}},O={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"data",staticClass:"center",style:[t.pageheight,t.pagewidth,t.pagebg]},[i("div",{staticClass:"left"},[i("div",{staticClass:"left_top"},[i("div",{staticClass:"text-00b9e0  cursor",on:{click:t.back}},[i("i",{staticClass:"icon iconfont iconblue_pt1"}),t._v("返回")]),t._v(" "),i("div",{staticClass:"text-00b9e0  cursor",on:{click:function(e){return t.sendemail(t.project_id)}}},[t._v("发送"),i("i",{staticClass:"icon iconfont iconsharept_blue",staticStyle:{"margin-left":"3px"}})])]),t._v(" "),i("div",{staticClass:"left_buttom"},[i("div",{staticClass:"left_buttom_floor"},[i("div",{staticClass:"text-768395 size12"},[t._v("\n          楼层\n        ")]),t._v(" "),i("div",{staticClass:"text-00b9e0 cursor ellipsis text-center",staticStyle:{width:"95px"},on:{click:function(e){return t.floor_switch()}}},[t._v("\n          "+t._s(t.defaultlayer.layername?t.defaultlayer.layername:"请选择楼层")+"\n        ")]),t._v(" "),i("div",{on:{click:function(e){return t.floor_switch()}}},[i("i",{staticClass:"text-9ca9bb icon iconfont iconswitcher_gray cursor"})])]),t._v(" "),i("div",{staticClass:"left_buttom_nav"},[i("div",{staticClass:"left_buttom_nav_top size12"},[t._v("功能分类（选图标放置点位")]),t._v(" "),i("div",{staticClass:"left_buttom_nav_buttom"},t._l(t.cate,function(e,s){return i("div",{key:s,staticClass:"left_buttom_nav_buttom_item"},[i("div",{staticClass:"left_buttom_nav_buttom_item_li cursor",class:t.activecateid==e.id?"text-00b9e0":"",on:{click:function(i){return t.activecate(e)}}},[i("i",{staticClass:"icon iconfont  size22",class:"iconx-"+e.id,staticStyle:{"margin-right":"3px"}}),t._v(" "),i("div",[t._v(t._s(e.name))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.num>0,expression:"i.num > 0"}],staticClass:"ellipsis text-center",staticStyle:{position:"absolute",right:"5px",background:"#D0021B",width:"20px",height:"20px",color:"#FFF","border-radius":"50%"}},[t._v(t._s(e.num))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.activecateid==e.id&&0==t.issearchicon,expression:"activecateid == i.id && issearchicon==false"}],staticClass:"left_buttom_nav_buttom_item_bit "},t._l(e.child,function(e,s){return i("div",{directives:[{name:"show",rawName:"v-show",value:0!=e.image,expression:"c.image!=false"}],key:s,staticClass:"left_buttom_nav_buttom_item_bit_li cursor"},[913==e.id||914==e.id||915==e.id?i("div",{staticClass:"left_buttom_nav_buttom_item_bit_li_yy"},[891==e.id||913==e.id?i("div",{staticClass:"text-00b9e0 text-center size12 hide",staticStyle:{width:"96px"}},[t._v("以下图标请根据\n                    实际需求放置点位\n                  ")]):t._e(),t._v(" "),i("div",{staticClass:"left_buttom_nav_buttom_item_bit_li_yy_name",staticStyle:{"padding-left":"15px"},on:{click:function(i){return t.specialactivecate(e)}}},[i("div",{staticClass:"left_buttom_nav_buttom_item_bit_li_active "}),t._v(" "),i("div",{staticClass:"left_buttom_nav_buttom_item_bit_li_img"},[i("img",{attrs:{width:"20",height:"20",src:t.hosturl+e.image[0],alt:""}})]),t._v(" "),i("div",{staticClass:"ellipsis left_buttom_nav_buttom_item_bit_li_text"},[t._v(t._s(e.name)+"\n                      "),i("i",{directives:[{name:"show",rawName:"v-show",value:t.specialcateid==e.id,expression:"specialcateid==c.id"}],staticClass:"icon iconfont iconblue1 text-00b9e0 "})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.num>0,expression:"c.num > 0"}],staticClass:"left_buttom_nav_buttom_item_bit_li_num ellipsis"},[t._v(t._s(e.num))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.specialcateid==e.id,expression:"specialcateid==c.id"}],staticClass:"left_buttom_nav_buttom_item_bit_li_yy_name",staticStyle:{"background-color":"#D4DBE6",height:"60px","padding-left":"-15px"}},t._l(e.image,function(s,a){return i("div",{key:a,staticClass:"left_buttom_nav_buttom_item_bit_li_yy_name_img"},[i("img",{attrs:{width:"20",height:"20",src:t.hosturl+s,alt:""},on:{click:function(i){return t.specialactivecatenum(s,a,e)}}}),t._v(" "),i("div",{class:t.catenextdatakey==a?"text-00b9e0":""},[t._v(t._s(a+1)+"路")])])}),0)]):i("div",{staticClass:"left_buttom_nav_buttom_item_bit_li_zc"},[i("div",{staticClass:"left_buttom_nav_buttom_item_bit_li_active ",staticStyle:{"margin-right":"3px"}},[i("i",{directives:[{name:"show",rawName:"v-show",value:t.catenextdata.id==e.id,expression:"catenextdata.id==c.id"}],staticClass:"icontriangle"})]),t._v(" "),i("div",{staticClass:"left_buttom_nav_buttom_item_bit_li_img"},[i("img",{attrs:{width:"20",height:"20",src:t.hosturl+e.image[0],alt:""}})]),t._v(" "),i("div",{staticClass:"ellipsis left_buttom_nav_buttom_item_bit_li_text",on:{click:function(i){return t.catenext(e)}}},[t._v(t._s(e.name))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.num>0,expression:"c.num > 0"}],staticClass:"left_buttom_nav_buttom_item_bit_li_num ellipsis"},[t._v(t._s(e.num))])])])}),0)])}),0)]),t._v(" "),i("div",{staticClass:"left_buttom_other"},[i("div",{staticClass:"left_buttom_other_size"},[i("div",{staticClass:"left_buttom_other_size_left size12 text-center"},[t._v("尺寸")]),t._v(" "),i("div",{staticClass:"left_buttom_other_size_right"},[i("RadioGroup",{directives:[{name:"show",rawName:"v-show",value:2!=t.mattertype,expression:"mattertype!=2"}],on:{"on-change":t.small},model:{value:t.iconssmall,callback:function(e){t.iconssmall=e},expression:"iconssmall"}},[i("Radio",{attrs:{value:"3",label:"小"}}),t._v(" "),i("Radio",{attrs:{value:"2",label:"中"}}),t._v(" "),i("Radio",{attrs:{value:"1",label:"大"}})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2==t.mattertype,expression:"mattertype==2"}]},[t._v("不可使用")])],1)]),t._v(" "),i("div",{staticClass:"left_buttom_other_point"},[i("div",{staticClass:"left_buttom_other_point_left size12 text-center"},[t._v("点位")]),t._v(" "),i("div",{staticClass:"left_buttom_other_point_right"},[i("div",{staticClass:"left_buttom_other_point_right_item"},[i("label",{staticClass:"ivu-radio-wrapper ivu-radio-group-item ivu-radio-default ",class:1==t.mattertype?"ivu-radio-checked":"",on:{click:function(e){return t.matter(1)}}},[t._m(0),t._v("\n                黑白点位\n              ")])]),t._v(" "),i("div",{staticClass:"left_buttom_other_point_right_item"},[i("label",{staticClass:"ivu-radio-wrapper ivu-radio-group-item ivu-radio-default ",class:2==t.mattertype?"ivu-radio-checked":"",on:{click:function(e){return t.matter(2)}}},[t._m(1),t._v("\n                实物点位\n              ")])])])])]),t._v(" "),i("div",{staticClass:"left_buttom_edit text-center"},[i("div",{staticClass:"left_buttom_edit_img cursor"},[i("label",[i("i",{staticClass:"icon iconfont iconnormal3"}),t._v(" "),""!=t.defaultlayer?i("input",{staticStyle:{display:"none"},attrs:{type:"file",accept:"image/x-png,image/jpeg,image/bmp",name:"file"},on:{change:function(e){return t.imgUpload(e)}}}):t._e()])]),t._v(" "),i("div",{staticClass:"left_buttom_edit_search cursor",class:t.issearchicon?"text-00b9e0":""},[i("i",{staticClass:"icon iconfont iconnormal",on:{click:function(e){return t.searchicon()}}})]),t._v(" "),i("div",{staticClass:"left_buttom_edit_del cursor ",class:t.isrmicon?"text-00b9e0":"",on:{click:function(e){return t.rmicon()}}},[i("i",{staticClass:"icon iconfont iconnormal4"})])])])]),t._v(" "),i("div",{staticClass:"right"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.floorswitchshow,expression:"floorswitchshow"}],staticClass:"left_buttom_floor_switch "},[i("div",{staticClass:"left_buttom_floor_switch_list cursor"},[t._l(t.layer,function(e,s){return i("div",{key:s,staticClass:"left_buttom_floor_switch_list_li text-center ellipsis text-768395",class:e.id==t.defaultlayer.id?"checked":""},[i("div",{on:{click:function(i){return t.activefools(e,s)}}},[t._v(t._s(e.layername))]),t._v(" "),i("i",{staticClass:"size12 icon iconfont iconred_pt left_buttom_floor_switch_list_li_close text-bfc8d4",on:{click:function(i){return t.foolsdel(e,s)}}})])}),t._v(" "),i("div",{staticClass:"left_buttom_floor_switch_list_li text-center ellipsis text-bfc8d4",on:{click:function(e){return t.addfools("")}}},[i("i",{staticClass:"size14 icon iconfont icongrayAdd1"}),t._v("\n          添加\n        ")]),t._v(" "),i("div",{staticClass:"left_buttom_floor_switch_list_li text-center ellipsis text-bfc8d4",on:{click:function(e){return t.addfools(t.defaultlayer)}}},[t._v("修改楼层名称")])],2)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.addfoolsshow,expression:"addfoolsshow"}],staticClass:"right_addfoolsshow"},[i("div",{staticClass:"right_addfoolsshow_title cursor"},[t._v("\n        添加楼层\n        "),i("i",{staticClass:"size14 icon iconfont iconred_pt right_addfoolsshow_title_close ",on:{click:t.addfools}})]),t._v(" "),i("div",{staticClass:"right_addfoolsshow_in",staticStyle:{width:"300px",margin:"auto"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.addfoolsname,expression:"addfoolsname"}],staticClass:"right_addfoolsshow_input",attrs:{placeholder:"请输入楼层名称",type:"text"},domProps:{value:t.addfoolsname},on:{input:function(e){e.target.composing||(t.addfoolsname=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"right_addfoolsshow_btn text-center text-00b9e0 cursor text-center",on:{click:function(e){return t.addfoolsbtn()}}},[t._v("确定")])]),t._v(" "),i("div",{ref:"mainbox",staticClass:"right_img",class:0==t.imageheight?"imgadd":"",style:{height:t.imageheight+"px",width:t.imagewidtn+"px",left:t.sideLeft+"px",top:t.sideTop+"px"}},[t.defaultlayer.image?i("div",{ref:"imagebox",staticClass:"moveBox"},[i("div",{staticStyle:{border:"1px solid #EAEFF5"}},[i("img",{ref:"img2",attrs:{width:t.imagewidtn,height:t.imageheight,src:t.hosturl+t.defaultlayer.image,alt:""},on:{load:function(e){return t.loadImage(e)},mouseup:function(e){return t.addicons(e)},mousedown:t.moveBox}}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.imageheight>0,expression:"imageheight >0"}]},t._l(t.defaultlayer.icon,function(e,s){return i("span",{key:s},[i("img",{directives:[{name:"show",rawName:"v-show",value:0==t.mattertype&&0==e.ispreview,expression:"mattertype==0 && i.ispreview==false"}],staticClass:"cursor",staticStyle:{"z-index":"99",position:"absolute"},style:{top:e.posy*t.imageheight-t.iconsize/2+"px",left:e.posx*t.imagewidtn-t.iconsize/2+"px"},attrs:{src:t.hosturl+e.image,width:t.iconsize,height:t.iconsize},on:{mousedown:function(i){return t.moveIcons(i,s,e.id,e)}}}),t._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:1==t.mattertype&&0==e.ispreview,expression:"mattertype==1 && i.ispreview==false"}],staticClass:"cursor",staticStyle:{position:"absolute","z-index":"99"},style:{top:e.posy*t.imageheight-t.iconsize/2+"px",left:e.posx*t.imagewidtn-t.iconsize/2+"px"},attrs:{src:t.hosturl+e.image1,width:t.iconsize,height:t.iconsize},on:{mousedown:function(i){return t.moveIcons(i,s,e.id,e)}}}),t._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:2==t.mattertype&&0==e.ispreview,expression:"mattertype==2 && i.ispreview==false"}],staticClass:"cursor",staticStyle:{position:"absolute","z-index":"99"},style:{top:e.posy*t.imageheight-15+"px",left:e.posx*t.imagewidtn-15+"px"},attrs:{src:t.hosturl+e.image2,width:30,height:30},on:{mousedown:function(i){return t.moveIcons(i,s,e.id,e)}}})])}),0),t._v(" "),t._l(t.defaultlayer.marks.marks,function(e,s){return i("span",{directives:[{name:"show",rawName:"v-show",value:0==t.maphideshop,expression:"maphideshop == 0"}],key:s,staticStyle:{"z-index":"1"}},[14==e.type?i("span",{staticStyle:{position:"absolute","transform-origin":"left bottom","z-index":"10"},style:{top:e.info.y*t.imageheight-t.imagewidtn*e.info.r-4+"px",left:e.info.x*t.imagewidtn-4+"px",transform:"rotate("+e.info.a*(180/Math.PI)+"deg)"},on:{mouseup:function(e){return t.addicons(e)}}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:e.info.r*t.imagewidtn+2,height:e.info.r*t.imagewidtn+2}},[i("path",{staticStyle:{"stroke-width":"4"},attrs:{d:["M1 "+e.info.r*t.imagewidtn+" L1 1 A"+e.info.r*t.imagewidtn+" "+e.info.r*t.imagewidtn+" 0 0 1 "+e.info.r*t.imagewidtn+" "+e.info.r*t.imagewidtn+"  Z"],fill:"none",stroke:"rgb("+e.color+")","stroke-dasharray":"8 4"}})])]):t._e(),t._v(" "),11==e.type?i("span",{staticStyle:{position:"absolute","transform-origin":"left bottom","z-index":"1"},style:{top:e.info.y*t.imageheight-t.imageheight*e.info.h/2+"px",left:e.info.x*t.imagewidtn-t.imagewidtn*e.info.w/2+"px",transform:"rotate("+e.info.a*(180/Math.PI)+"deg)"},on:{mouseup:function(e){return t.addicons(e)}}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:e.info.w*t.imagewidtn,height:e.info.h*t.imageheight}},[i("rect",{staticStyle:{fill:"none","stroke-width":"4px"},style:{stroke:"rgb("+e.color+")"},attrs:{width:e.info.w*t.imagewidtn,height:e.info.h*t.imageheight}})])]):t._e(),t._v(" "),12==e.type||15==e.type?i("span",{staticStyle:{position:"absolute","transform-origin":"left bottom","z-index":"1"},style:{top:e.info.y*t.imageheight-t.imagewidtn*e.info.w/2+"px",left:e.info.x*t.imagewidtn-t.imageheight*e.info.h/2+"px",transform:"rotate("+e.info.a*(180/Math.PI)+"deg)"},on:{mouseup:function(e){return t.addicons(e)}}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:e.info.w*t.imagewidtn+8,height:e.info.h*t.imageheight+8}},[12==e.type?i("ellipse",{staticStyle:{"stroke-width":"4"},attrs:{cx:e.info.w/2*t.imagewidtn+4,cy:e.info.h/2*t.imageheight+4,rx:e.info.w/2*t.imagewidtn,ry:e.info.h/2*t.imageheight,fill:"none",stroke:"rgb("+e.color+")"}}):t._e(),t._v(" "),15==e.type?i("ellipse",{staticStyle:{"stroke-width":"4"},attrs:{cx:e.info.w/2*t.imagewidtn+4,cy:e.info.h/2*t.imageheight+4,rx:e.info.w/2*t.imagewidtn,ry:e.info.h/2*t.imageheight,fill:"none",stroke:"rgb("+e.color+")","stroke-dasharray":"4 5"}}):t._e()])]):t._e(),t._v(" "),10==e.type?i("span",{staticStyle:{position:"absolute","transform-origin":"left bottom","z-index":"1"},style:{top:e.info.y*t.imageheight+"px",left:e.info.x*t.imagewidtn+"px"},on:{mouseup:function(e){return t.addicons(e)}}},[i("pre",{staticStyle:{"line-height":"1.5"},style:{color:"rgb("+e.color+")"}},[t._v(t._s(e.info.text))])]):t._e(),t._v(" "),13==e.type?i("span",{staticStyle:{position:"absolute","transform-origin":"left bottom",top:"0",left:"0","z-index":"1"},on:{mouseup:function(e){return t.addicons(e)},mousedown:t.moveBox}},[i("Arrow",{attrs:{imgwidth:t.imagewidtn,h:e.info.y2-e.info.y1,imgheight:t.imageheight,x1:e.info.x1,y1:e.info.y1,x2:e.info.x2,y2:e.info.y2,canvas_id:"canvas_id"+s,color:e.color,data:e}})],1):t._e()])})],2),t._v(" "),i("div",{staticStyle:{position:"absolute",right:"10%",top:"0",height:"40px",width:"80%"}})]):t._e(),t._v(" "),t.defaultlayer.image?t._e():i("div",{staticClass:"right_img_iconlineDark cursor"},[i("label",{staticClass:"right_img_iconlineDark cursor"},[t.defaultlayer?i("i",{staticClass:"icon iconfont iconlineDark",staticStyle:{"font-size":"30px"}}):t._e(),t._v(" "),i("div",{staticClass:"text-center",staticStyle:{width:"100%"}},[t._v(" "+t._s(t.defaultlayer?"添加图片":"请先添加楼层"))]),t._v(" "),t.defaultlayer?i("input",{staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png,image/jpeg,image/jpg",name:"file"},on:{change:function(e){return t.imgUpload(e)}}}):t._e()])])]),t._v(" "),i("div",{staticClass:"right_btn-description-reveal"},[i("i",{directives:[{name:"show",rawName:"v-show",value:!t.alreadyshow,expression:"!alreadyshow"}],staticClass:"icon iconfont iconreveal text-00b9e0 cursor ",staticStyle:{"font-size":"32px"},on:{click:function(e){return t.already(!0)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.alreadyshow,expression:"alreadyshow"}]},[i("div",{staticClass:"right_btn-description-reveal_list "},[i("div",{staticClass:"right_btn-description-reveal_list_top text-center"},[t._v("\n            已放置点位\n            "),i("i",{staticClass:"icon iconfont icongraySub1 right_btn-description-reveal_list_top_icongraySub1 cursor",on:{click:function(e){return t.already(!1)}}})]),t._v(" "),i("div",{staticClass:"right_btn-description-reveal_list_ul"},t._l(t.defaultlayer.cate,function(e,s){return i("div",{directives:[{name:"show",rawName:"v-show",value:e.num>0,expression:"i.num >0"}],key:s,staticClass:"right_btn-description-reveal_list_ul_li"},[i("div",{staticClass:"text-00b9e0 "},[t._v(t._s(e.iconname))]),t._v(" "),i("div",{staticClass:" ellipsis",staticStyle:{width:"72px"}},[t._v(t._s(e.name))]),t._v(" "),i("div",[t._v(t._s(e.num))])])}),0)])])]),t._v(" "),t.defaultlayer?i("div",{staticClass:"right_btn_description_zoomin",staticStyle:{right:"70px"}},[i("i",{staticClass:"icon iconfont iconhide_blue  cursor ",class:0==t.maphideshop?"text-00b9e0":"text-768395",staticStyle:{"font-size":"36px"},on:{click:function(e){return t.maphide()}}})]):t._e(),t._v(" "),t.defaultlayer?i("div",{staticClass:"right_btn_description_zoomin"},[i("i",{staticClass:"icon iconfont iconzoomin text-768395 cursor  ",staticStyle:{"font-size":"36px"},on:{click:function(e){return t.iconhide()}}})]):t._e()]),t._v(" "),i("Modal",{staticClass:"text-center",attrs:{width:"300px",title:"提示",closable:!1,"mask-closable":!1},on:{"on-cancel":t.canceldlefloor,"on-ok":t.verifydlefloor},model:{value:t.dlefloorshow,callback:function(e){t.dlefloorshow=e},expression:"dlefloorshow"}},[i("div",[t._v("\n      确认删除该楼层吗？\n    ")])]),t._v(" "),i("Email",{attrs:{sendtype:2,itemdata:t.sendemaildata,value:t.sendemailshow},on:{closeFn:t.closesendemail}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"ivu-radio",staticStyle:{"margin-right":"0"}},[e("span",{staticClass:"ivu-radio-inner"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"ivu-radio",staticStyle:{"margin-right":"0"}},[e("span",{staticClass:"ivu-radio-inner"})])}]};var Y=s("VU/8")(H,O,!1,function(t){s("StqT")},"data-v-24f113d3",null).exports,V={name:"Lable",data:function(){return{usreInfo:"",project_id:"",logo:"",canvaswidth:0,canvasheight:0,canvas:null,imgh:0,imgw:0,canvasurl:"",key:0,layer:null,marks:null,ismarks:!1,size:20,ishideicon:!1,iconcolourdata:{type:1,color:"7ED321",rgb:"126,211,33"},ishide:!1,icontype:0,layblehide:0}},computed:{showCatType:function(){return 4==this.$route.query.opennames}},methods:{next_tabel:function(){this.$router.push({path:"/tableCell",query:{id:this.project_id,key:0,opennames:4}})},saveicon:function(){var t=this,e=this.canvas.getObjects();function i(t){var e="";return"rgb(126,211,33)"==t&&(e="126,211,33"),"rgb(144,19,254)"==t&&(e="144,19,254"),"rgb(208,2,27)"==t&&(e="208,2,27"),e}var s=this.imgh,a=this.imgw,n=[];if(e)for(var o=0;o<e.length;o++){if(10==e[o].dataid){var c={type:10,color:i(e[o].fill),sort:1,info:{y:e[o].top/s,x:e[o].left/a,text:e[o].text}};n.push(c)}if(11==e[o].dataid){c={type:11,color:i(e[o].stroke),sort:2,info:{x:e[o].left/a+e[o].width*e[o].scaleX/a/2,y:e[o].top/s+e[o].height*e[o].scaleY/s/2,w:e[o].width*e[o].scaleX/a,h:e[o].height*e[o].scaleY/s}};n.push(c)}if(12==e[o].dataid){c={type:12,color:i(e[o].stroke),sort:2,info:{x:e[o].left/a+e[o].width*e[o].scaleX/a/2,y:e[o].top/s+e[o].height*e[o].scaleY/s/2,w:e[o].width*e[o].scaleX/a,h:e[o].height*e[o].scaleY/s}};n.push(c)}if(13==e[o].dataid){c={type:13,color:i(e[o].stroke),sort:2,info:{x2:e[o].oCoords.mb.x/a,y2:e[o].oCoords.mb.y/s,x1:e[o].oCoords.mt.x/a,y1:e[o].oCoords.mt.y/s}};n.push(c)}if(14==e[o].dataid){c={type:14,color:i(e[o].stroke),sort:2,info:{x:(e[o].left+e[o].strokeWidth/2)/a,y:(e[o].top+e[o].strokeWidth/2)/s,r:e[o].width*e[o].scaleX/a,a:2*(360-e[o].angle)*Math.PI/360}};n.push(c)}if(15==e[o].dataid){c={type:15,color:i(e[o].stroke),sort:2,info:{x:e[o].left/a+e[o].width*e[o].scaleX/a/2,y:e[o].top/s+e[o].height*e[o].scaleY/s/2,w:e[o].width*e[o].scaleX/a,h:e[o].height*e[o].scaleY/s}};n.push(c)}}var r={marks:n,hide:1==this.ishide?1:0,v:0};c={userId:this.usreInfo.user_id,projectId:this.project_id,floorId:this.layer.floorid,time:this.storage.gettime(),markJson:w()(r)};this.axios.post("/index.php?m=Api&c=project&a=projectIconMarks",this.Qs.stringify(c)).then(function(e){1==e.data.status?t.$Message.success(e.data.msg):t.$Message.error(e.data.msg)})},hide:function(){var t=this.ishide;this.ishide=!this.ishide;var e=this.canvas.getObjects();if(e)for(var i=0;i<e.length;i++)e[i].visible=t,this.canvas.renderAll()},rmicon:function(){return void 0!=this.canvas.getActiveObject()?(this.canvas.remove(this.canvas.getActiveObject()),!1):(this.$Message.error("请选择要删除的图形"),!1)},addicontype:function(t){var e=this.iconcolourdata;if(1==t){var i=new fabric.IText("请输入文字",{top:100,left:420,fontSize:14,fill:"rgb("+e.rgb+")",editingBorderColor:"rgb("+e.rgb+")",cornerSize:0,hasRotatingPoint:!1,hoverCursor:"",moveCursor:"",lockMovementY:!1,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockSkewingY:!0,lockUniScaling:!0,MIN_TEXT_WIDTH:1,lineHeight:1.5,textAlign:"left",dataid:10});return this.canvas.add(i),this.canvas.renderAll(),!1}if(2==t){var s=new fabric.Rect({left:100,top:100,originX:"left",originY:"top",width:150,height:120,stroke:"rgb("+e.rgb+")",transparentCorners:!1,fill:"transparent",strokeWidth:4,dataid:11});return this.canvas.add(s),this.canvas.renderAll(),!1}if(3==t){var a=new fabric.Ellipse({rx:50,ry:50,fill:"transparent",top:50,left:100,stroke:"rgb("+e.rgb+")",strokeWidth:2,dataid:12});return this.canvas.add(a),this.canvas.renderAll(),!1}if(4==t){var n=new fabric.Path("M1 150 L1 1 A150 150 0 0 1 150 150  Z",{left:380,top:180,originX:"left",originY:"bottom",centeredScaling:!1,stroke:"rgb("+e.rgb+")",strokeDashArray:[4,5],strokeWidth:2,centeredRotation:!1,fill:"transparent",lockUniScaling:!0,minScaleLimit:.1,visible:!0,angle:0,dataid:14});return this.canvas.add(n),this.canvas.renderAll(),!1}if(5==t){a=new fabric.Ellipse({rx:50,ry:50,fill:"transparent",left:230,top:50,stroke:"rgb("+e.rgb+")",strokeWidth:2,strokeDashArray:[4,5],dataid:15});return this.canvas.add(a),this.canvas.renderAll(),!1}if(6==t){var o=new fabric.Path("M0,15  L11.5,0 L23,16 L14,16 L14,100 L9,100 L9,16 L0,16 Z",{stroke:"rgb("+e.rgb+")",fill:"rgb("+e.rgb+")",originX:"center",originY:"bottom",lockUniScaling:!0,centeredRotation:!1,centeredScaling:!1,strokeWidth:1,dataid:13,angle:0});return this.canvas.add(o),this.canvas.renderAll(),!1}},iconcolour:function(t,e,i){this.iconcolourdata={type:t,color:e,rgb:i}},hideicon:function(t){this.ishideicon=t;var e=t,i=this.canvas.getObjects();if(i)for(var s=0;s<i.length;s++)i[s].hasControls=e,i[s].lockMovementY=!e,i[s].lockMovementX=!e,this.canvas.renderAll()},back:function(){2==this.opennames?this.$router.push({path:"/drawing/bitmap",query:{id:this.project_id,key:this.key}}):3==this.opennames?this.$router.push({path:"/sbitmap",query:{id:this.project_id,key:this.key}}):4==this.opennames&&this.$router.push({path:"/detailMap",query:{id:this.project_id,key:this.key}})},FullScreen:function(t){(t=this.$refs.data).requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},toggleFullScreen:function(t){this.isFullscreen=!this.isFullscreen;var e=t.srcElement||t.target;this.FullScreen(e)},createdcanvas:function(){var t=this,e=this.imgw,i=this.imgh;this.canvas=new fabric.Canvas("canvas",{preserveObjectStacking:!0});var s=this.canvas,a=""+this.hosturl+this.canvasurl,n=this.marks,o="";if(n&&(o=n.marks))for(var c=0;o.length>c;c++)14==o[c].type&&(o[c].info.a=2*Math.PI-parseFloat(o[c].info.a),o[c].info.y=o[c].info.y-o[c].info.r);function r(t,e,i,s){var a=Math.abs(t-i),n=Math.abs(e-s),o=(Math.sqrt(Math.pow(a,2)+Math.pow(n,2)),a/n),c=Math.atan(o),r=Math.floor(180/(Math.PI/c))||0;return i>t&&s>e&&(r*=-1),i==t&&s>e&&(r=0),i<t&&s>e&&(r=r),i<t&&s==e&&(r=90),i<t&&s<e&&(r=180-r),i==t&&s<e&&(r=180),i>t&&s<e&&(r=180+r),i>t&&s==e&&(r=-90),r}function d(t){var s=o[u].info.x1*e,a=o[u].info.y1*i,n=o[u].info.x2*e-s,c=o[u].info.y2*i-a;return Math.pow(n*n+c*c,.5)}if(this.$Spin.hide(),fabric.Image.fromURL(a,function(e){console.log(e);var i,a,n=t.imgwidth-200,o=t.imgheight-50,c=1,r=e.width,l=e.height;a=n/r,i=o/l,0==n&&0==o?c=1:0==n?i<1&&(c=i):0==o?a<1&&(c=a):(a<1||i<1)&&(c=a<=i?a:i),c<1&&(r*=c,l*=c),t.canvaswidth=r,t.canvasheight=l,e.set({scaleX:r/e.width,scaleY:l/e.height}),console.log(e.width+";"+r),s.setBackgroundImage(e,s.renderAll.bind(s)),s.renderAll()}),o)for(var u=0;u<o.length;u++){if(10===o[u].type){var h,_=new fabric.IText(o[u].info.text,(h={top:o[u].info.y*i,left:o[u].info.x*e,fontSize:14,fill:"rgb("+o[u].color+")",editingBorderColor:"rgb("+o[u].color+")",cornerSize:0,hasRotatingPoint:!1,lockMovementY:!1,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockSkewingY:!0,lockUniScaling:!0,dataid:o[u].type,lineHeight:1.5,hasControls:!1},l()(h,"lockMovementY",!0),l()(h,"lockMovementX",!0),l()(h,"visible",!this.ishide),h));s.add(_),s.renderAll()}if(11===o[u].type){var p=new fabric.Rect({top:o[u].info.y*i-o[u].info.h*i/2,left:o[u].info.x*e-o[u].info.w*e/2,originX:"left",originY:"top",width:o[u].info.w*e,height:o[u].info.h*i,stroke:"rgb("+o[u].color+")",fill:"transparent",strokeWidth:2,hasRotatingPoint:!1,lockRotation:!0,dataid:o[u].type,hasControls:!1,lockMovementY:!0,lockMovementX:!0,visible:!this.ishide});s.add(p),s.renderAll()}if(12===o[u].type){var v=new fabric.Ellipse({ry:o[u].info.h*i/2,rx:o[u].info.w*e/2,fill:"transparent",top:o[u].info.y*i-o[u].info.h*i/2,left:o[u].info.x*e-o[u].info.w*e/2,stroke:"rgb("+o[u].color+")",strokeWidth:2,hasRotatingPoint:!1,lockRotation:!0,dataid:o[u].type,hasControls:!1,lockMovementY:!0,lockMovementX:!0,visible:!this.ishide});s.add(v),s.renderAll()}if(13===o[u].type){var m=r(o[u].info.x1*e,o[u].info.y1*i,o[u].info.x2*e,o[u].info.y2*i),f=new fabric.Path("M0,16  L11.5,0 L23,16 L14,16 L14,"+d()+" L9,"+d()+" L9,16 L0,16 Z",{top:o[u].info.y2*i,left:o[u].info.x2*e,angle:m,stroke:"rgb("+o[u].color+")",fill:"rgb("+o[u].color+")",originX:"center",originY:"bottom",lockUniScaling:!0,strokeWidth:2,dataid:o[u].type,centeredRotation:!1,centeredScaling:!1,hasControls:!1,lockMovementY:!0,lockMovementX:!0,visible:!this.ishide});s.add(f),s.renderAll()}if(14===o[u].type){var g=new fabric.Path("M1 "+o[u].info.r*e+" L1 1 A"+o[u].info.r*e+" "+o[u].info.r*e+" 0 0 1 "+o[u].info.r*e+" "+o[u].info.r*e+"  Z",{top:o[u].info.y*i+o[u].info.r*i,left:o[u].info.x*e,stroke:"rgb("+o[u].color+")",originX:"left",originY:"bottom",centeredScaling:!1,strokeDashArray:[4,5],strokeWidth:2,centeredRotation:!1,fill:"transparent",lockUniScaling:!0,minScaleLimit:.1,visible:!this.ishide,angle:o[u].info.a*(180/Math.PI),dataid:14,hasControls:!1,lockMovementY:!0,lockMovementX:!0});s.add(g),s.renderAll()}if(15===o[u].type){v=new fabric.Ellipse({rx:o[u].info.h*i/2,ry:o[u].info.w*e/2,fill:"transparent",top:o[u].info.y*i-o[u].info.h*i/2,left:o[u].info.x*e-o[u].info.w*e/2,stroke:"rgb("+o[u].color+")",strokeDashArray:[4,4],strokeWidth:2,hasRotatingPoint:!1,lockRotation:!0,dataid:o[u].type,hasControls:!1,lockMovementY:!0,lockMovementX:!0,visible:!this.ishide});s.add(v),s.renderAll()}}},getitem:function(t,e,i){var s=this;this.axios.post("/index.php?m=Api&c=project&a=getIconsProject",this.Qs.stringify({userId:t?t.user_id:this.usreInfo.user_id,projectId:e||this.project_id,layer:!0})).then(function(t){s.logo=t.data.logo;var e=e||s.key;if(""==t.data.layer||void 0==t.data.layer||!t.data.layer)return s.$Message.error("请添加楼层"),s.$router.back(),!1;var i=t.data.layer[e];s.icontype=t.data.icontype;var a=t.data.pointIconSize;if(1==a)var n=20;if(2==a)n=25;if(3==a)n=30;s.size=n;i.icon;if(i&&i.image){if(s.canvasurl=i.image,i.marks){var o=JSON.parse(i.marks);s.marks=o,s.layblehide=o.hide,s.ishide=1==o.hide}s.layer=i}})}},mounted:function(){1==this.ismarks&&this.createdcanvas(),this.$nextTick(function(){})},created:function(){this.$Spin.show();var t=this.storage.getSession("usreInfo");this.usreInfo=t;var e=this.$route.query.id,i=this.$route.query.key,s=this.$route.query.opennames;this.opennames=s,this.project_id=e,this.key=i||0,this.getitem(t,e,i),this.canvaswidth=this.imgwidth-200,this.canvasheight=this.imgheight-50},watch:{marks:function(t){},layer:function(t){return!1},canvasurl:function(t){var e=this;if(t){var i=new Image;i.src=""+this.hosturl+t,i.onload=function(){var t,s,a=e.imgwidth-200,n=e.imgheight-50,o=1,c=i.width,r=i.height;s=a/c,t=n/r,0==a&&0==n?o=1:0==a?t<1&&(o=t):0==n?s<1&&(o=s):(s<1||t<1)&&(o=s<=t?s:t),o<1&&(c*=o,r*=o),e.imgh=r,e.imgw=c,e.ismarks=!0,e.createdcanvas()}}}}},U={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"data",style:[t.pageheight,t.pagewidth,t.pagebg]},[i("div",{staticClass:"center"},[i("div",{staticClass:"top"},[i("div",{staticClass:"text-00b9e0 cursor top_left",on:{click:t.back}},[i("i",{staticClass:"icon iconfont iconblue_pt1"}),t._v("返回\n      ")]),t._v(" "),i("div",{staticClass:"top_center"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.ishideicon,expression:"!ishideicon"}]},[t._v(t._s(t.ismarks?t.layer.layername:""))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.ishideicon,expression:"ishideicon"}],staticClass:"top_center_ico cursor"},[i("div",{staticClass:"top_center_ico_left"},[i("i",{staticClass:"icon iconfont iconovalBlue_selected size22",staticStyle:{color:"#7ED321"},on:{click:function(e){return t.iconcolour(1,"7ed321","126,211,33")}}}),t._v(" "),i("i",{staticClass:"icon iconfont iconovalBlue_selected size22",staticStyle:{color:"#9013FE"},on:{click:function(e){return t.iconcolour(2,"9013fe","144,19,254")}}}),t._v(" "),i("i",{staticClass:"icon iconfont iconovalBlue_selected size22",staticStyle:{color:"#D0021B"},on:{click:function(e){return t.iconcolour(3,"d0021b","208,2,27")}}})]),t._v(" "),i("div",{staticClass:"top_center_ico_center"},[i("i",{staticClass:"icon iconfont icontext1 size22",on:{click:function(e){return t.addicontype(1)}}}),t._v(" "),i("i",{staticClass:"icon iconfont iconrectangle size22",on:{click:function(e){return t.addicontype(2)}}}),t._v(" "),i("i",{staticClass:"icon iconfont iconoval1 size22",on:{click:function(e){return t.addicontype(3)}}}),t._v(" "),i("i",{staticClass:"icon iconfont iconsector size22",on:{click:function(e){return t.addicontype(4)}}}),t._v(" "),i("i",{staticClass:"icon iconfont iconoval size22",on:{click:function(e){return t.addicontype(5)}}}),t._v(" "),i("i",{staticClass:"icon iconfont iconarrow size22",on:{click:function(e){return t.addicontype(6)}}})]),t._v(" "),i("div",{staticClass:"top_center_ico_right"},[i("i",{staticClass:"icon iconfont iconeraser cursor size24",on:{click:function(e){return t.rmicon()}}}),t._v(" "),i("i",{staticClass:"icon iconfont cursor size24",class:t.ishide?"iconhide":"iconhide_blue1",on:{click:function(e){return t.hide()}}})])])]),t._v(" "),i("div",{staticClass:"top_right"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.ishideicon,expression:"!ishideicon"}],staticClass:"cursor text-00b9e0 top_right_edit_ico",on:{click:function(e){return t.hideicon(!0)}}},[i("i",{staticClass:"icon iconfont iconmark size18",staticStyle:{"margin-right":"3px"}}),t._v("\n          标注\n        ")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.ishideicon,expression:"ishideicon"}],staticClass:"top_right_edit size12"},[i("div",{staticClass:"cursor text-00b9e0",staticStyle:{width:"60%"},on:{click:function(e){return t.saveicon()}}},[t._v("保存标注")]),t._v(" "),i("div",{staticClass:"cursor",staticStyle:{width:"40%"},on:{click:function(e){return t.hideicon(!1)}}},[t._v("取消")])])])]),t._v(" "),i("div",{staticClass:"buttom"},[i("div",{staticClass:"buttom_left"},[t.canvaswidth>0?[i("canvas",{staticClass:"canvas",attrs:{id:"canvas",width:t.imgwidth-200,height:t.imgheight-50}}),t._v(" "),1==t.ismarks?i("div",t._l(t.layer.icon,function(e,s){return i("span",{key:s},[e&&0==t.icontype?i("img",{staticStyle:{cursor:"default",position:"absolute"},style:{top:e.posy*t.imgh-t.size/2+"px",left:e.posx*t.imgw-t.size/2+"px"},attrs:{src:t.hosturl+e.image,width:t.size,height:t.size}}):t._e(),t._v(" "),e&&1==t.icontype?i("img",{staticStyle:{cursor:"default",position:"absolute"},style:{top:e.posy*t.imgh-t.size/2+"px",left:e.posx*t.imgw-t.size/2+"px"},attrs:{src:t.hosturl+e.image1,width:t.size,height:t.size}}):t._e(),t._v(" "),e&&2==t.icontype?i("img",{staticStyle:{cursor:"default",position:"absolute"},style:{top:e.posy*t.imgh-t.size/2+"px",left:e.posx*t.imgw-t.size/2+"px"},attrs:{src:t.hosturl+e.image2,width:t.size,height:t.size}}):t._e()])}),0):t._e()]:t._e(),t._v(" "),t.showCatType?i("div",{staticClass:"next_img",on:{click:t.next_tabel}}):t._e()],2),t._v(" "),i("div",{staticClass:"buttom_right"},[i("div",{staticClass:"p_center_right"},[i("div",{staticClass:"p_center_right_ul"},[i("div",{staticClass:"p_center_right_ul_top"},[t.logo?i("img",{staticStyle:{width:"90%"},attrs:{src:t.hosturl+t.logo,alt:"logo"}}):t._e(),t._v(" "),t.logo?t._e():i("img",{staticStyle:{width:"90%"},attrs:{src:"https://cdn.zeplin.io/5a3a303748258f1e7e4bea6b/assets/F1871A63-549D-4E48-9513-9F44C044C7E1.png",alt:""}})]),t._v(" "),1==t.ismarks?i("div",{staticClass:"p_center_right_ul_center"},t._l(t.layer.cate,function(e,s){return i("div",{key:s,staticClass:"p_center_right_ul_center_li size12"},[i("div",{staticClass:"p_center_right_ul_center_li_type text-center text-00b9e0 ellipsis"},[t._v(t._s(e.iconname))]),t._v(" "),i("div",{staticClass:"p_center_right_ul_center_li_name ellipsis"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"p_center_right_ul_center_li_num text-center"},[t._v(t._s(e.num))])])}),0):t._e(),t._v(" "),i("div",{staticClass:"p_center_right_ul_buttom size12"},[i("div",{staticClass:"p_center_right_ul_buttom_li"},[i("div",{staticClass:"p_center_right_ul_buttom_company text-00b9e0"},[t._v("公司名")]),t._v(" "),i("div",{staticClass:"p_center_right_ul_buttom_company_text ellipsis-2",staticStyle:{"line-height":"1"}},[t._v(t._s(t.ismarks?t.layer.usercompany:""))])]),t._v(" "),i("div",{staticClass:"p_center_right_ul_buttom_li"},[i("div",{staticClass:"p_center_right_ul_buttom_company text-00b9e0"},[t._v("制图人")]),t._v(" "),i("div",{staticClass:"p_center_right_ul_buttom_company_text ellipsis"},[t._v(t._s(t.ismarks?t.layer.username:""))])]),t._v(" "),i("div",{staticClass:"p_center_right_ul_buttom_li"},[i("div",{staticClass:"p_center_right_ul_buttom_company text-00b9e0"},[t._v("DATE")]),t._v(" "),i("div",{staticClass:"p_center_right_ul_buttom_company_text ellipsis"},[t._v(t._s(t.ismarks?t.layer.createtime:""))])])])])])])])])])},staticRenderFns:[]};var W=s("VU/8")(V,U,!1,function(t){s("k2bj")},"data-v-638c6ee5",null).exports,J={name:"Index",data:function(){return{usreInfo:null,state:"",opennames:2,projectType:1,items:[],newProject:"",keyword:"",dleshow:!1,dleitemid:0,delitemkey:-1,additemmodal:!1,additemdata:{},settingshow:!1,settingdata:"",projectstateid:0,freemailid:0,sendemaildata:"",sendemailshow:!1,wxfreedata:"",wxfreeshow:!1,wxcodeurl:""}},filters:{bgstate:function(t){var e="";return 0==t?e="bgstate1":1==t?e="bgstate2":2==t?e="bgstate3":3==t&&(e="bgstate4"),e}},components:{NavMenu:u,AddItem:p,Setting:I,Info:D,Email:f},methods:{wxfree:function(t){var e=this;if(this.wxfreedata.id==t.id)this.wxcodeurl="",this.wxfreedata="",this.wxfreeshow=!1;else{var i=this.hosturl+"/index.php?m=Mobile&c=Project&a=projectTotal&id="+t.id;A.a.toDataURL(i,{errorCorrectionLevel:"H"},function(t,i){e.wxcodeurl=i}),this.wxfreedata=t,this.wxfreeshow=!0}},freeemail:function(t,e){this.freemailid==t.id?this.freemailid=0:this.freemailid=t.id},sendemail:function(t){this.sendemaildata.id==t.id?(this.sendemaildata="",this.sendemailshow=!1):(this.sendemaildata=t,this.sendemailshow=!0)},projectstate:function(t){this.projectstateid==t.id?this.projectstateid=0:this.projectstateid=t.id},pickprojectstate:function(t,e,i){var s,a=this;this.items[e].projectstate=t;var n=i.platformarray;if(n){var o=[];n&&n.forEach(function(t,e){o.push(t.id)})}var c=i.functionarray;if(c){var r=[];c&&c.forEach(function(t,e){r.push(t.id)})}this.axios.post("/index.php?m=Api&c=project&a=addfast",this.Qs.stringify((s={userid:this.userInfo.user_id,projectName:i.projectname,customerName:i.customername,customerTelephone:i.customertelephone,customerAddress:i.customeraddress,functionArray:i.functionarray,projectState:t,projectid:i.id},l()(s,"functionArray",r?r.join(","):[]),l()(s,"platformArray",o?o.join(","):[]),s))).then(function(t){1==t.data.status?a.$Message.success("修改状态成功"):a.$Message.error("修改状态失败"),a.projectstateid=0})},closeset:function(t){this.settingdata="",this.settingshow=!1},itemsetting:function(t){this.settingshow=!0,this.settingdata=t},closeadditem:function(){this.additemdata={},this.additemmodal=!1,this.getitemlist("","","")},closesendemail:function(){this.freemailid=0,this.sendemaildata="",this.sendemailshow=!1},additem:function(t,e){t&&(this.additemdata=t),this.additemmodal=!0},navigate:function(t){2==this.opennames&&this.$router.push({path:"/drawing/bitmap",query:{id:t.id}}),3==this.opennames&&this.$router.push({path:"/cate",query:{id:t.id}}),4==this.opennames&&this.$Notice.open({title:"智能模式暂未全面开放",desc:"感谢您的关注，我们正在快马加鞭制作中。",duration:3})},common_navigate:function(t,e){e&&this.$router.push({path:"/"+e,query:{id:t.id}})},dleitem:function(t,e){this.dleitemid=t,this.delitemkey=e,this.dleshow=!0},verifydleitem:function(){var t=this;if(this.dleitemid>0){var e={user_id:this.userInfo.user_id,projectid:this.dleitemid};this.axios.post("index.php?m=Api&c=project&a=projectdel",this.Qs.stringify(e)).then(function(e){1==e.data.status?(t.items.splice(t.delitemkey,1),t.dleitemid=0,t.delitemkey=-1,t.$Message.success(e.data.msg)):t.$Message.error(e.data.msg)})}},canceldleitem:function(){this.dleitemid=0,this.delitemkey=-1},search:function(){var t=this.keyword;this.getitemlist("",t)},getitemlist:function(t,e,i){var s=this,a=this.storage.getSession("itemcate"),n=this.storage.getSession("platform");this.axios.post("/index.php?m=Api&c=project&a=projectInfo",this.Qs.stringify({user_id:this.userInfo.user_id,projectType:t||this.projectType,keyWord:e||this.keyword,projectState:i||this.state})).then(function(t){var e=t.data.result;2!=s.projectType&&e&&e.forEach(function(t){if(t.functionarray&&null!=t.functionarray){var e=t.functionarray.split(","),i=[];e&&e.forEach(function(t){a&&a.forEach(function(e){e.id==t&&i.push(e)})}),t.functionarray=i}if(t.platformarray&&null!=t.platformarray&&0==s.projectType){var o=t.platformarray.split(","),c=[];o&&o.forEach(function(t){n&&n.forEach(function(e){e.id==t&&c.push(e)})}),t.platformarray=c}}),s.items=e,s.newProject=t.data.newProject})},itemcate:function(){var t=this,e=this.storage.getSession("itemcate");e||this.axios.post("/index.php?m=Api&c=goods&a=goodsCategoryInfo",this.Qs.stringify({type:!0})).then(function(e){e.data.result&&e.data.result.forEach(function(t){844==t.parent_id?t.staple=1:t.staple=2}),t.storage.setSession("itemcate",e.data.result)})},platform:function(){var t=this,e=this.storage.getSession("platform");e||this.axios.post("/index.php?m=Api&c=Goods&a=getPlatform",this.Qs.stringify({user_id:this.userInfo.user_id})).then(function(e){t.storage.setSession("platform",e.data.result)})}},updated:function(){var t=this;this.$nextTick(function(){t.$Spin.hide()})},created:function(){this.$Spin.show();var t=this.$route.query.type;1==t?t="":2==t?t=0:3==t?t=1:4==t?t=2:5==t&&(t=3);var e=this.$route.query.opennames;2==e?(this.opennames=2,this.projectType=2):3==e?(this.opennames=3,this.projectType=1):4==e&&(this.opennames=4,this.projectType=0),this.state=t;var i=this.storage.getSession("usreInfo");i&&(this.userInfo=i,this.getitemlist("","",""),this.itemcate(),this.platform())},watch:{$route:function(t){var e=t.query.type;1==e?e="":2==e?e=0:3==e?e=1:4==e?e=2:5==e&&(e=3),this.state=e;var i=t.query.opennames;2==i?this.projectType=2:3==i?this.projectType=1:4==i&&(this.projectType=0),this.opennames=parseInt(i),this.getitemlist()}}},X={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("AddItem",{attrs:{itemdata:t.additemdata,value:t.additemmodal},on:{closeFn:t.closeadditem}}),t._v(" "),i("Email",{attrs:{sendtype:t.opennames,itemdata:t.sendemaildata,value:t.sendemailshow},on:{closeFn:t.closesendemail}}),t._v(" "),i("NavMenu",{staticClass:"nav"}),t._v(" "),i("div",{staticClass:"center"},[i("div",{staticClass:"center_top"},[i("div",{staticClass:"center_top_left"}),t._v(" "),i("div",{staticClass:"center_top_right"},[i("div",{staticClass:"center_top_right_input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"center_top_right_input_search",attrs:{type:"text",placeholder:"项目名/客户名/电话"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),t._v(" "),i("Icon",{staticClass:"center_top_right_input_search_ico",attrs:{type:"ios-search"},on:{click:t.search}})],1),t._v(" "),i("div",{staticClass:"center_top_right_message"},[i("div",{staticClass:"center_top_right_message_btn"},[i("Icon",{staticStyle:{color:"#00B9E0","font-size":"30px"},attrs:{type:"ios-notifications-outline"}})],1)]),t._v(" "),i("Info",{staticClass:"center_top_right_info"}),t._v(" "),i("div",{staticStyle:{width:"3%"}})],1)]),t._v(" "),i("div",{staticClass:"center_buttom"},[i("div",{staticClass:"center_buttom_left"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.items.length<=0,expression:"items.length <=0"}],staticClass:"center_buttom_left_list_tip"},[t._v("\n          点击右侧“新建项目”\n        ")]),t._v(" "),i("div",{staticClass:"center_buttom_left_list"},t._l(t.items,function(e,s){return i("div",{key:s,staticClass:"center_buttom_left_list_li",class:t._f("bgstate")(e.projectstate)},[i("div",{staticClass:"item_title"},[i("div",{staticClass:"item_title_text"},[t._v(t._s(e.projectname))]),t._v(" "),i("div",{staticClass:"item_state"},[i("div",{staticClass:"size12 text-9ca9bb"},[t._v("No."+t._s(e.id))]),t._v(" "),i("div",{staticClass:"size12 text-00b9e0  cursor projectstatetext",on:{click:function(i){return t.projectstate(e,s)}}},[0==e.projectstate?i("span",[t._v("进行中 ")]):1==e.projectstate?i("span",[t._v("测试 ")]):2==e.projectstate?i("span",[t._v("已成交 ")]):3==e.projectstate?i("span",[t._v("失败 ")]):t._e(),t._v(" "),i("i",{staticClass:"icon iconfont iconblue1 size12"})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.projectstateid==e.id,expression:"projectstateid==item.id"}],staticClass:"projectstatename cursor"},[i("div",{staticClass:"projectstatename_li text-center",class:0==e.projectstate?"text-00b9e0":"",on:{click:function(i){return t.pickprojectstate(0,s,e)}}},[t._v("进行中")]),t._v(" "),i("div",{staticClass:"projectstatename_li text-center",class:1==e.projectstate?"text-00b9e0":"",on:{click:function(i){return t.pickprojectstate(1,s,e)}}},[t._v("测试")]),t._v(" "),i("div",{staticClass:"projectstatename_li text-center",class:2==e.projectstate?"text-00b9e0":"",on:{click:function(i){return t.pickprojectstate(2,s,e)}}},[t._v("已成交")]),t._v(" "),i("div",{staticClass:"projectstatename_li text-center",class:3==e.projectstate?"text-00b9e0":"",on:{click:function(i){return t.pickprojectstate(3,s,e)}}},[t._v("失败")])])])]),t._v(" "),i("div",{staticClass:"item_centenr cursor",on:{click:function(i){return t.navigate(e)}}},[i("div",{staticClass:"item_centenr_li"},[i("div",{staticClass:"item_centenr_li_name text-9ca9bb"},[t._v("客户姓名：")]),t._v(" "),i("div",{staticClass:"item_centenr_li_text"},[t._v(t._s(e.customername))])]),t._v(" "),i("div",{staticClass:"item_centenr_li"},[i("div",{staticClass:"item_centenr_li_name text-9ca9bb"},[t._v("客户电话：")]),t._v(" "),i("div",{staticClass:"item_centenr_li_text"},[t._v(t._s(e.customertelephone))])]),t._v(" "),i("div",{staticClass:"item_centenr_li"},[i("div",{staticClass:"item_centenr_li_name text-9ca9bb"},[t._v("客户地址：")]),t._v(" "),i("div",{staticClass:"item_centenr_li_text ellipsis-2"},[t._v(t._s(e.customeraddress))])]),t._v(" "),4==t.opennames||3==t.opennames?i("div",{staticClass:"item_centenr_li opennames3"},[i("div",{staticClass:"item_centenr_li_name text-9ca9bb"},[t._v("已选功能：")]),t._v(" "),i("div",{staticClass:"item_centenr_li_text platform"},[i("div",{staticClass:"platform_ul"},t._l(e.functionarray,function(e,s){return i("div",{key:s,staticClass:"platform_li"},[t._v("\n                      "+t._s(e.name)+"\n                    ")])}),0)])]):t._e(),t._v(" "),4==t.opennames?i("div",{staticClass:"item_centenr_li opennames4"},[i("div",{staticClass:"item_centenr_li_name text-9ca9bb"},[t._v("智能平台：")]),t._v(" "),i("div",{staticClass:"item_centenr_li_text platform"},[i("div",{staticClass:"platform_ul"},t._l(e.platformarray,function(e,s){return i("div",{key:s,staticClass:"platform_li"},[t._v("\n                      "+t._s(e.name)+"\n                    ")])}),0)])]):t._e()]),t._v(" "),i("div",{staticClass:"item_footer"},[i("div",{staticClass:"item_footer_left cursor"},[2!=t.opennames?i("div",{staticClass:"icon",on:{click:function(i){return t.common_navigate(e,"offer")}}},[i("i",{staticClass:"icon iconfont iconquote"})]):t._e(),t._v(" "),i("div",{staticClass:"icon",on:{click:function(i){return t.common_navigate(e,"preview")}}},[i("i",{staticClass:"icon iconfont iconnormal"})]),t._v(" "),2!=t.opennames?i("div",{staticClass:"icon",on:{click:function(i){return t.itemsetting(e,"setting")}}},[i("i",{staticClass:"icon iconfont iconsetting_blue"})]):t._e(),t._v(" "),i("div",{staticClass:"icon share"},[i("i",{staticClass:"icon iconfont iconsharept_blue",on:{click:function(i){return t.freeemail(e,s)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.freemailid==e.id,expression:"freemailid==item.id"}],staticClass:"share_center size14 text-768395"},[i("div",{staticStyle:{"border-bottom":"solid 1px #E3E8EF",position:"relative"},on:{click:function(i){return t.wxfree(e)}}},[t._v("\n                      发送到微信\n                      "),i("img",{directives:[{name:"show",rawName:"v-show",value:t.wxfreedata.id==e.id,expression:"wxfreedata.id==item.id"}],staticClass:"wxcode",attrs:{src:t.wxcodeurl,alt:""}})]),t._v(" "),i("div",{on:{click:function(i){return t.sendemail(e)}}},[t._v("发送到邮箱")])])]),t._v(" "),i("div",{staticClass:"icon",on:{click:function(i){return t.additem(e,s)}}},[i("i",{staticClass:"icon iconfont iconmodify"})]),t._v(" "),i("div",{staticClass:"icon",on:{click:function(i){return t.dleitem(e.id,s)}}},[i("i",{staticClass:"icon iconfont iconred_pt size12"})])]),t._v(" "),i("div",{staticClass:"item_footer_right size12 text-9ca9bb"},[t._v("创建："+t._s(e.x_createtime))])])])}),0)]),t._v(" "),i("div",{staticClass:"center_buttom_right"},[i("div",{staticClass:"c_b_right_top"},[i("div",{staticClass:"c_b_right_top_btn text-00b9e0 size14 cursor",on:{click:function(e){return t.additem("","")}}},[i("i",{staticClass:"icon iconfont icongrayAdd size20 ",staticStyle:{"margin-right":"10px"}}),t._v("\n            新建项目\n          ")])]),t._v(" "),i("div",{staticClass:"c_b_right_footer"},[i("div",{staticClass:"c_b_right_footer_item"},[i("div",{staticClass:"c_b_right_footer_item_title text-768395"},[t._v("最近打开")]),t._v(" "),t._l(t.newProject,function(e,s){return i("div",{key:s,staticClass:"text-9ca9bb size12 cursor ellipsis ",staticStyle:{margin:"3px auto"},on:{click:function(i){return t.navigate(e)}}},[t._v(t._s(e.projectname)+"\n            ")])})],2)])])])]),t._v(" "),i("Modal",{staticClass:"text-center",attrs:{width:"300px",title:"提示","mask-closable":!1},on:{"on-cancel":t.canceldleitem,"on-ok":t.verifydleitem},model:{value:t.dleshow,callback:function(e){t.dleshow=e},expression:"dleshow"}},[i("div",[t._v("\n      确认删除该项目吗？\n    ")])]),t._v(" "),t.settingshow&&t.settingdata?i("Setting",{attrs:{settindata:t.settingdata},on:{closeFn:t.closeset}}):t._e()],1)},staticRenderFns:[]};var G=s("VU/8")(J,X,!1,function(t){s("9/yg")},"data-v-dbb7a17e",null).exports,Z=s("fZjL"),K=s.n(Z),tt={name:"Cate",data:function(){return{usreInfo:"",project_id:"",cate:"",goods:"",goods1:"",brand:"",detaiurl:"",products:"",goodsdetaidata:"",right_goods_edit_show:!1,nav_one_data:"",nav_two_data:"",itemdetails:"",keyword:"",brandshow:!1,brandid:-1,branditem:""}},methods:{goodsnum:function(t){console.log(t)},clickbrand:function(t){if(t.id==this.brandid)this.brandid=-1,this.branditem="",this.goods=this.goods1;else{this.brandid=t.id,this.branditem=t;var e=this.goods1,i=[];e&&e.forEach(function(e,s){e.brand_id==t.id&&i.push(e)}),this.goods=i}this.brandall()},brandall:function(){this.brandshow=!this.brandshow},right_goods_remove:function(){for(var t=this,e=document.getElementsByClassName("sdels"),i=new Array,s=0;s<e.length;s++)if(e[s].checked){var a={key:e[s].getAttribute("data-key"),productid:e[s].getAttribute("data-productid"),productparenttypeid:e[s].getAttribute("data-productparenttypeid"),productParentId:e[s].getAttribute("data-productParentId"),k:e[s].getAttribute("data-k"),num:1};i.push(a)}if(i.length<=0)return this.$Message.error("请选择要删除商品"),!1;for(var n=0;n<i.length;n++){var o=i[n].k,c=i[n].key;if(!o&&0===this.goods[c].num)return;if(o)var r=this.cate[o].plist[c].num--;else r=this.goods[c].num--;this.cate[o].plist[c].num=0,this.goods[c].num=0,r-=1;var l=this.goods;for(s=0;s<l.length;s++)l[s].goods_id==i[n].productid&&(l[s].num=r);this.axios.post("/index.php?m=Api&c=project&a=projectFastedit",this.Qs.stringify({userId:this.usreInfo.user_id,projectId:this.project_id,productId:i[n].productid,categoryId:i[n].productparenttypeid,newNum:0}))}for(s=0;s<e.length;s++)e[s].checked&&(e[s].checked=!1);setTimeout(function(){t.projectinfos()},1e3)},projectinfos:function(){var t=this;this.axios.post("/index.php?m=Api&c=project&a=projectinfos",this.Qs.stringify({userId:this.usreInfo.user_id,projectId:this.project_id})).then(function(e){for(var i=t.cate,s=e.data.products,a=0;a<i.length;a++){i[a].plist=[];for(var n=0,o=0;o<s.length;o++)i[a].id!==s[o].productParentId&&i[a].fs_id!==s[o].productParentId&&i[a].id!==s[o].productparenttypeid||(i[a].plist.push(s[o]),n+=s[o].num);i[a].cnum=n;for(var c=i[a].cate_parentid,r=0;r<c.length;r++){for(var l=0,d=0;d<s.length;d++)c[r].id==s[d].productparenttypeid&&(l+=s[d].num);c[r].cpnum=l}}t.cate=i})},numedit:function(t,e,i,s,a){var n=this;if("right"==a){if("plus"==t){var o=this.cate[s].plist[e].num+1;this.cate[s].plist[e].num++}if("minus"==t){o=this.cate[s].plist[e].num-1;this.cate[s].plist[e].num--}for(var c={userId:this.usreInfo.user_id,projectId:this.project_id,productId:i.productid,categoryId:i.productparenttypeid,newNum:o},r=this.goods,l=0;l<r.length;l++)r[l].goods_id==i.productid&&(r[l].num=o)}if("left"==a){if("plus"==t){o=this.goods[e].num+1;this.goods[e].num++}if("minus"==t){o=this.goods[e].num-1;this.goods[e].num--}c={userId:this.usreInfo.user_id,projectId:this.project_id,productId:i.goods_id,categoryId:i.cat_id,newNum:o}}this.axios.post("/index.php?m=Api&c=project&a=projectFastedit",this.Qs.stringify(c)).then(function(t){if(1!=t.data.status)return n.$Message.error(t.data.msg),!1;n.projectinfos()})},search:function(t){var e=this.keyword,i=this.goods1;if(e){var s=[];i.filter(function(t){return K()(t).some(function(i){String(t[i]).toLowerCase().indexOf(e)>-1&&s.push(t)})}),this.goods=s}else this.goods=i},navigateoffer:function(){this.$router.push({path:"/offer",query:{id:this.project_id}})},navigatebitmap:function(t){this.$router.push({path:"/sbitmap",query:{id:t.id}})},back:function(){this.$router.push({path:"/index",query:{opennames:3,type:1}})},close:function(){this.goodsdetaidata=""},goodsdetai:function(t){t.productIntroUrl&&(t.goods_content=t.productIntroUrl),this.goodsdetaidata=t},right_goods_edit:function(){this.right_goods_edit_show=!this.right_goods_edit_show},nav_one:function(t){this.nav_one_data.id==t.id?(this.nav_one_data="",this.nav_two_data="",922==t.id&&(this.goods=this.goods1)):(this.nav_one_data=t,922==t.id&&this.nav_two(t))},nav_two:function(t){if(this.nav_two_data.id==t.id)this.nav_two_data="",this.goods=this.goods1;else{this.nav_two_data=t;var e=this.goods1,i=[];if(""!=e)for(var s=0;s<e.length;s++)e[s].cat_id==t.id&&i.push(e[s]);this.goods=i}}},mounted:function(){},updated:function(){var t=this;this.$nextTick(function(){t.$Spin.hide()})},created:function(){var t=this;this.$Spin.show();var e=this.storage.getSession("usreInfo");if(!e)return this.$router.replace("/login"),!1;this.usreInfo=e;var i=this.$route.query.id;this.project_id=i;var s=this;q.a.all([q.a.post(s.hosturl+"/index.php?m=Api&c=goods&a=goodsAndbrand",s.Qs.stringify({user_id:e.user_id,categoryid:0})),q.a.post(s.hosturl+"/index.php?m=Api&c=project&a=projectinfos",s.Qs.stringify({userId:e.user_id,projectId:i})),q.a.get(s.hosturl+"/index.php?m=Api&c=goods&a=goodsCategoryInfo"),q.a.post(s.hosturl+"/index.php?m=Api&c=project&a=projectInfo",s.Qs.stringify({user_id:e.user_id,project_id:i,projectType:1}))]).then(q.a.spread(function(e,i,s,a){var n=a.data.result;t.projectInfodata=n;var o=[];n.functionarray&&(o=n.functionarray.split(",")),t.itemdetails=n;for(var c=function t(e){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=[],a=0;a<e.length;a++)if(e[a].parent_id==i){var n=t(e,e[a].id);e[a].cate_parentid=n,s.push(e[a])}return s}(s.data.result,0),r=c[0].cate_parentid,l=c[1].cate_parentid,d=0;d<r.length;d++)for(var u=0;u<l.length;u++)r[d].name===l[u].name&&(r[d].fs_id=l[u].id,r[d].fs_parent_id=l[u].parent_id,r[d].cate_parentid=r[d].cate_parentid.concat(l[u].cate_parentid));for(var h=0;h<o.length;h++)for(d=0;d<r.length;d++)o[h]==r[d].id&&(r[d].choose=1);c[2].choose=1,r=r.concat(c[2]);for(var _=i.data.products,p=e.data.brand,v=e.data.goods,m=[],f=0;f<r.length;f++)if(1==r[f].choose){for(d=0;d<v.length;d++)v[d].cat_id!==r[f].id&&v[d].cat_id!==r[f].fs_id||m.push(v[d]);var g=r[f].cate_parentid;if(g.length>0)for(var y=0;y<g.length;y++)for(var C=0;C<v.length;C++)v[C].cat_id!=g[y].id&&v[C].cat_id!=g[y].fs_parent_id||m.push(v[C])}v=m;for(var x=0;x<r.length;x++){r[x].plist=[];for(var w=0,b=0;b<_.length;b++)r[x].id!==_[b].productParentId&&r[x].fs_id!==_[b].productParentId&&r[x].id!==_[b].productparenttypeid||(r[x].plist.push(_[b]),w+=_[b].num);r[x].cnum=w;var k=r[x].cate_parentid;for(y=0;y<k.length;y++){for(var I=0,S=0;S<_.length;S++)k[y].id==_[S].productparenttypeid&&(I+=_[S].num);k[y].cpnum=I}}for(var j=[],D=[],F=0;F<_.length;F++)D.push(_[F].productid),j.push(_[F].num);for(d=0;d<v.length;d++){var A=D.indexOf(v[d].goods_id);A>=0&&(v[d].num=j[A])}t.brand=p,t.goods=v,t.goods1=v,t.cate=r,t.products=_}))}},et={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cate",style:[t.pageheight,t.pagewidth,t.pagebg]},[i("div",{staticClass:"c_cate_top"},[i("div",{staticClass:"text-00b9e0 back cursor",on:{click:t.back}},[i("i",{staticClass:"icon iconfont iconblue_pt1"}),t._v("返回")]),t._v(" "),i("div",{staticClass:"size20 ellipsis"},[t._v(t._s(t.itemdetails.projectname))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.itemdetails,expression:"itemdetails"}],staticClass:"next text-00b9e0 cursor",on:{click:function(e){return t.navigatebitmap(t.itemdetails)}}},[t._v(" 下一步 制作点位图 "),i("i",{staticClass:"icon iconfont iconblue_pt2"})])]),t._v(" "),i("div",{staticClass:"c_cate_center"},[i("div",{staticClass:"c_cate_center_left"},[i("div",{staticClass:"left_nav"},[i("div",{staticClass:"text-center left_nav_all cursor ",class:t.nav_one_data?"":"text-00b9e0"},[t._v("全部")]),t._v(" "),i("div",{staticClass:"hr"}),t._v(" "),t._l(t.cate,function(e,s){return i("div",{key:s,staticClass:"item cursor"},[922==e.id?i("div",{staticClass:"hr",staticStyle:{width:"80%",margin:"15px auto"}}):t._e(),t._v(" "),1==e.choose?i("div",{staticClass:"top_title ",class:e.id==t.nav_one_data.id?"text-00b9e0":"",on:{click:function(i){return t.nav_one(e)}}},[i("i",{staticClass:"icon iconfont iconx-850 top_title_20 size20 text-center",class:"iconx-"+e.id,attrs:{"data-id":e.id}}),t._v(" "),i("div",{staticClass:"text-left top_title_70"},[t._v(" "+t._s(e.name))]),t._v(" "),i("div",{staticClass:"top_title_10 text-center"},[t._v(t._s(e.cnum))])]):t._e(),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.id==t.nav_one_data.id&&922!=t.nav_one_data.id,expression:"i.id==nav_one_data.id && nav_one_data.id!=922"}],staticClass:"olist "},t._l(e.cate_parentid,function(e,s){return i("div",{key:s,staticClass:"item_box"},[i("div",{staticClass:"t_list size12",class:e.id==t.nav_two_data.id?"text-00b9e0":"",on:{click:function(i){return t.nav_two(e)}}},[i("div",{staticClass:"t_name ellipsis"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"t_sum text-right"},[t._v(t._s(e.cpnum))])])])}),0)])})],2)]),t._v(" "),i("div",{staticClass:"c_cate_center_centre"},[i("div",{staticClass:"c_cate_center_centre_body"},[i("div",{staticClass:"c_cate_center_centre_body_top"},[i("div",{staticClass:"c_cate_center_centre_body_top_brand"},[i("div",{staticClass:"text-768395"},[t._v("筛选品牌:")]),t._v(" "),i("div",{staticClass:"text-00b9e0 cursor",staticStyle:{margin:"auto 4px"},on:{click:function(e){return t.brandall()}}},[t._v("\n              "+t._s(-1==t.brandid?"全部":t.branditem.name)+"\n            ")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.brandshow,expression:"brandshow"}],staticClass:"c_cate_center_centre_body_top_brand_ul"},[-1!=t.brandid?i("div",{staticClass:"text-center c_cate_center_centre_body_top_brand_ul_li cursor",on:{click:function(e){return t.clickbrand(t.branditem)}}},[t._v("全部")]):t._e(),t._v(" "),t._l(t.brand,function(e,s){return i("div",{key:s,staticClass:"text-center c_cate_center_centre_body_top_brand_ul_li"},[i("div",{staticClass:"cursor ellipsis ",class:t.brandid==e.id?"text-00b9e0":"",on:{click:function(i){return t.clickbrand(e)}}},[t._v("\n                  "+t._s(e.name)+"\n                ")])])})],2)]),t._v(" "),i("div",{staticClass:"c_cate_center_centre_body_top_search"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"c_cate_center_centre_body_top_search_input text-768395",attrs:{type:"text",placeholder:"请输入关键词"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),t._v(" "),i("Icon",{staticClass:"center_top_right_input_search_ico",attrs:{type:"ios-search"},on:{click:function(e){return t.search()}}})],1)]),t._v(" "),i("div",{staticClass:"text-9ca9bb c_cate_center_centre_body_detail size12"},[t._v("点击图片查看产品详情")]),t._v(" "),i("div",{staticClass:"c_cate_center_centre_body_goods"},[t._l(t.goods,function(e,s){return i("div",{key:s,staticClass:"c_cate_center_centre_body_goods_itme"},[i("div",{staticClass:"c_cate_center_centre_body_goods_itme_img cursor",on:{click:function(i){return t.goodsdetai(e)}}},[i("img",{staticClass:"showImg",attrs:{src:t.hosturl+e.original_img,alt:""}})]),t._v(" "),i("div",{staticClass:"c_cate_center_centre_body_goods_itme_centre"},[i("div",[i("div",{staticClass:"c_cate_center_centre_body_goods_itme_centre_title ellipsis-2"},[t._v(" "+t._s(e.goods_name))]),t._v(" "),i("div",{staticClass:"c_cate_center_centre_body_goods_itme_centre_model size12 text-768395"},[t._v(t._s(e.typenum))])]),t._v(" "),i("div",{staticStyle:{height:"100%",display:"flex","align-items":"center","justify-content":"center",width:"150px"}},[i("div",{staticClass:"c_cate_center_centre_body_goods_itme_centre_brand  text-center"},[t._v(t._s(e.name))])])]),t._v(" "),i("div",{staticClass:"c_cate_center_centre_body_goods_itme_right"},[i("div",{staticClass:"text-00b9e0 size18 c_cate_center_centre_body_goods_itme_right_price"},[t._v("¥ "+t._s(e.shop_price))]),t._v(" "),i("div",{staticClass:"text-00b9e0 size18 c_cate_center_centre_body_goods_itme_right_num"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.num>0,expression:"i.num > 0"}],staticClass:"text-center c_cate_center_centre_body_goods_itme_right_num_min cursor",on:{click:function(i){return t.numedit("minus",s,e,-1,"left")}}},[t._v("-")]),t._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:e.num>0,expression:"i.num > 0"}],staticClass:"c_cate_center_centre_body_goods_itme_right_num_input text-768395",attrs:{type:"text"},domProps:{value:e.num},on:{blur:function(i){return t.goodsnum(e)}}}),t._v(" "),i("div",{staticClass:"text-center c_cate_center_centre_body_goods_itme_right_num_max cursor",on:{click:function(i){return t.numedit("plus",s,e,-1,"left")}}},[t._v("+")])])])])}),t._v(" "),i("div",{staticClass:" text-center size12",staticStyle:{margin:"10px auto"}},[t._v("\n            已经加载完毕\n          ")])],2)])]),t._v(" "),i("div",{staticClass:"c_cate_center_right"},[i("div",{staticClass:"c_cate_center_right_top"},[i("div",{staticClass:"text-00b9e0 text-center ",staticStyle:{width:"100%","font-weight":"bold"}},[t._v("\n          "+t._s(t.right_goods_edit_show?"编辑":"已选产品")+"\n        ")]),t._v(" "),i("div",{staticClass:"text-768395 size12 text-center c_cate_center_right_top_edit cursor",on:{click:t.right_goods_edit}},[t._v("\n          "+t._s(t.right_goods_edit_show?"取消":"编辑")+"\n        ")])]),t._v(" "),i("div",{staticClass:"c_cate_center_right_center_body"},t._l(t.cate,function(e,s){return i("div",{key:s,staticClass:"c_cate_center_right_center"},[""!=e.plist?i("div",{staticClass:"size12"},[t._v(t._s(e.name))]):t._e(),t._v(" "),t._l(e.plist,function(e,a){return i("span",{key:a},[e.num>0?i("div",{staticClass:"c_cate_center_right_center_ul"},[t.right_goods_edit_show?i("label",{staticStyle:{"margin-right":"4px"}},[i("input",{staticClass:"sdels",attrs:{"data-key":a,"data-productid":e.productid,"data-productparenttypeid":e.productparenttypeid,"data-productParentId":e.productParentId,"data-k":s,type:"checkbox"}})]):t._e(),t._v(" "),i("div",{staticClass:"c_cate_center_right_center_ul_li_right"},[i("div",{staticClass:"ellipsis"},[t._v(t._s(e.productname))]),t._v(" "),i("div",{staticClass:"c_cate_center_right_center_ul_li_right_button"},[i("div",{staticClass:"c_cate_center_right_center_ul_li_right_button_left"},[i("div",{staticClass:"c_cate_center_right_center_ul_li_right_button_t"},[i("img",{staticClass:"c_cate_center_right_center_ul_li_right_button_img cursor",attrs:{src:t.hosturl+e.producticonurl,alt:""},on:{click:function(i){return t.goodsdetai(e)}}})]),t._v(" "),i("div",{staticClass:"c_cate_center_right_center_ul_li_right_button_center"},[i("div",{staticClass:"size12 ellipsis"},[t._v(t._s(e.productmodel))]),t._v(" "),i("div",{staticClass:"size12 Control ellipsis"},[t._v(t._s(e.productbrand))])])]),t._v(" "),i("div",{staticClass:"c_cate_center_right_center_ul_li_right_button_right"},[t.right_goods_edit_show?i("div",{staticClass:"c_cate_center_right_center_ul_li_right_button_right_num"},[e.num>0?i("div",{staticClass:"c_cate_center_right_center_ul_li_right_button_right_num_min text-center cursor",on:{click:function(i){return t.numedit("minus",a,e,s,"right")}}},[t._v("-")]):t._e(),t._v(" "),e.num>0?i("input",{staticClass:"c_cate_center_right_center_ul_li_right_button_right_num_input text-768395",attrs:{type:"text"},domProps:{value:e.num},on:{blur:function(i){return t.goodsnum(e)}}}):t._e(),t._v(" "),i("div",{staticClass:"c_cate_center_right_center_ul_li_right_button_right_num_max text-center cursor",on:{click:function(i){return t.numedit("plus",a,e,s,"right")}}},[t._v("+")])]):t._e(),t._v(" "),t.right_goods_edit_show?t._e():i("div",{staticClass:"text-9ca9bb "},[i("span",{staticClass:"text-00b9e0"},[t._v("¥ "+t._s(e.productprice))]),t._v(" x "+t._s(e.num))]),t._v(" "),i("div")])])]),t._v(" "),i("div")]):t._e()])})],2)}),0),t._v(" "),i("div",{staticClass:"c_cate_center_right_buttom"},[i("div",{staticClass:"text-9ca9bb c_cate_center_right_buttom_text"},[t.right_goods_edit_show?t._e():i("div",{staticClass:"size12  cursor",on:{click:function(e){return t.navigateoffer()}}},[t._v("\n            直接查看报价\n          ")]),t._v(" "),t.right_goods_edit_show?i("div",{staticClass:"btn"},[i("div",{staticClass:"del cursor",on:{click:t.right_goods_remove}},[t._v("删除")]),t._v(" "),i("div",{staticClass:"save text-00b9e0 cursor",on:{click:t.right_goods_edit}},[t._v("保存")])]):t._e()])])])]),t._v(" "),t.goodsdetaidata?i("div",{staticClass:"goodsdetai "},[i("div",{staticClass:"goodsdetai_item"},[i("i",{staticClass:"goodsdetai_item_close close icon iconfont iconred_pt",on:{click:function(e){return t.close()}}})]),t._v(" "),i("iframe",{staticClass:"goodsdetai_iframe",staticStyle:{background:"#F9FBFF"},attrs:{src:t.goodsdetaidata.goods_content}})]):t._e()])},staticRenderFns:[]};var it=s("VU/8")(tt,et,!1,function(t){s("P6tt")},"data-v-0cebef32",null).exports,st={name:"Bitmap",data:function(){return{sideLeft:0,sideTop:0,usreInfo:"",project_id:"",cate:"",layer:"",defaultlayer:"",defaultlayerkey:0,activecateid:0,alreadyshow:!1,floorswitchshow:!1,addfoolsshow:!1,specialcateid:0,catenextdata:"",catenextdatakey:0,addfoolsdata:"",addfoolsname:"",addfoolsid:"",dlefloorshow:!1,dlefloordata:"",imageheight:0,imagewidtn:0,imageratio:"",isimageratio:!1,imagesite:{top:0,left:0,right:0,bottom:0},iconsize:20,iconssmall:"小",mattertype:0,isrmicon:!1,isiconhide:!1,issearchicon:!1,searchiconid:0,sendemaildata:"",sendemailshow:!1,maphideshop:0,value4:30,opennames:3}},components:{Email:f,Arrow:L},methods:{imgMoseeWheel:function(t){var e=this,i=this.$refs.img2,s=t.currentTarget,a=t||window.event,n=i.getAttribute("src"),o=new Image;o.src=n;var c=0,r=0;o.onload=function(){c=o.width,r=o.height;var t=!0;t=a.detail?a.detail>0:a.wheelDelta<0,a.preventDefault&&a.preventDefault();var i=s.offsetWidth,n=s.offsetHeight,l=s.offsetLeft,d=s.offsetTop,u=(a.clientX-l)/i,h=(a.clientY-d)/n,_=(parseFloat(s.style.width),parseFloat(s.style.height));if(t)if(r>c)if(_>700)e.imagewidtn=.95*s.offsetWidth,e.imageheight=.95*s.offsetHeight;else{var p=700/r;e.imageheight=700,e.imagewidtn=c*p}else if(c>r)e.imagewidtn>1e3&&(e.imagewidtn=.95*s.offsetWidth,e.imageheight=.95*s.offsetHeight);else if(r>700&&c>700){var v=700/r;e.imagewidtn=v*c,e.imageheight=700}else e.imagewidtn=c,e.imageheighth=r;else e.imagewidtn<c&&(e.imagewidtn=1.1*s.offsetWidth,e.imageheight=1.1*s.offsetHeight);return s.style.left=l-u*(e.imagewidtn-i)+"px",s.style.top=d-h*(e.imageheight-n)+"px",!1}},moveBox:function(t){t.preventDefault(),this.downX=t.clientX,this.downY=t.clientY;var e=this.$refs.img2,i=this.$refs.mainbox;e.style.cursor="move";var s=i.getBoundingClientRect().left,a=i.getBoundingClientRect().top,n=t.clientX-s,o=t.clientY-a;document.onmousemove=function(t){return i.style.left=t.clientX-n-document.querySelector(".left").getBoundingClientRect().right+"px",i.style.top=t.pageY-o+"px",!1},document.onmouseup=function(){e.style.cursor="default",document.onmousemove=null}},maphide:function(){var t=1==this.maphideshop?0:1;return this.maphideshop=t,!1},transform:function(t){console.log(t)},sendemail:function(t){var e={createtime:1574054122,customeraddress:"111",customername:"1",customertelephone:"15123456789",functionarray:"",id:this.project_id,platformarray:"",projectname:"1",projectstate:0,x_createtime:"2019.11.18"};this.sendemaildata=e,this.sendemailshow=!0},closesendemail:function(){this.sendemaildata="",this.sendemailshow=!1},specialactivecatenum:function(t,e,i){this.catenextdatakey=e},FullScreen:function(t){(t=this.$refs.data).requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},searchicon:function(){if(1==this.issearchicon)for(var t=this.defaultlayer.icon,e=0;e<t.length;e++)t[e].ispreview=!1;this.issearchicon=!this.issearchicon},mapcate:function(t){var e=this.defaultlayer,i=e.icon;i&&i.forEach(function(e,i){e.ispreview=!1,t&&(e.parent_id!=t.id?e.ispreview=!0:e.ispreview=!1)}),this.defaultlayer=e},iconhide:function(){this.isiconhide=!this.isiconhide,this.$router.push({path:"/drawing/lable",query:{id:this.project_id,key:this.defaultlayerkey,opennames:this.opennames}})},rmicon:function(){this.isrmicon=!this.isrmicon},navpre:function(t){this.$router.push({path:"/preview",query:{id:t}})},small:function(t){"大"==t&&(this.iconsize=30),"中"==t&&(this.iconsize=25),"小"==t&&(this.iconsize=20),this.posticon()},matter:function(t){this.mattertype==t?this.mattertype=0:this.mattertype=t,this.posticon()},posticon:function(){var t=this;if("大"==this.iconssmall)var e=3;if("中"==this.iconssmall)e=2;if("小"==this.iconssmall)e=1;var i={userId:this.usreInfo.user_id,projectId:this.project_id,floorId:this.defaultlayer.floorid,icontype:this.mattertype,pointIconSize:e};this.axios.post("index.php?m=Api&c=project&a=changeIconProject",this.Qs.stringify(i)).then(function(e){t.$Message.success(e.data.msg)})},addicons:function(t){var e=this;t.preventDefault&&t.preventDefault();var i=this.catenextdata,s=this.defaultlayer,a=this.catenextdatakey;if(this.isrmicon)return!1;if(!i)return this.$Message.error("请选择分类"),!1;if(i.num<=0)return this.$Message.error("请选择分类"),!1;if(i.type&&i.num<a+1)return this.$Message.error("请选择分类"),!1;var n=this.$refs.mainbox.getBoundingClientRect().left,o=this.$refs.mainbox.getBoundingClientRect().top,c=(t.clientX-n)/this.imagewidtn,r=(t.clientY-o)/this.imageheight,l={iconid:"p1558516974017",iconname:i.iconname,id:109208,image:i.image[a],image1:i.image1[a],image2:i.image2[a],name:i.name,onegoodscategoryid:i.id,parent_id:i.parent_id,portid:i.type,portnum:i.type?a:"",posx:c,posy:r,ispreview:!1};s.icon.push(l),this.defaultlayer=s;var d=s.cate,u=0;d&&d.forEach(function(t,e){i.id==t.icon&&(t.num+=1,u=1)}),0==u&&d.push({codes:i.codes,icon:i.id,iconname:i.iconname,image:i.image[0],name:i.name,num:1,parent_id:i.parent_id});var h=this.cate;h&&h.forEach(function(t,e){var s=t.child;s&&s.forEach(function(e,s){i.id==e.id&&(i.type?(e.num-=a+1,t.num-=a+1):(e.num-=1,t.num-=1))})}),this.cate=h,this.axios.post("index.php?m=Api&c=project&a=changeIconProject",this.Qs.stringify({userId:this.usreInfo.user_id,projectId:this.project_id,floorId:s.floorid,pointIconSize:1,operate:1,typeId:i.type?"":i.id,portId:i.type,posx:c,posy:r,pointId:"wp"+this.storage.gettime(),portNum:i.type?a+1:""})).then(function(t){1!=t.data.status&&e.$Message.error(t.data.msg)})},moveIcons:function(t,e,i,s){var a=this.defaultlayer.icon[e],n=this.imageheight,o=this.imagewidtn;this.imagesite;t.preventDefault&&t.preventDefault();var c=this;if(this.isrmicon){c.handleicon(a,3),c.defaultlayer.icon.splice(e,1);var r=c.defaultlayer.cate;r&&r.forEach(function(t,e){a.onegoodscategoryid==t.icon&&a.iconname==t.iconname&&(t.num-=1)});var l=this.cate;return l&&l.forEach(function(t,e){var i=t.child;i&&i.forEach(function(e,i){a.onegoodscategoryid==e.id&&(a.portid?(e.num=e.num+a.portnum,t.num=t.num+a.portnum):(e.num=e.num+1,t.num=t.num+1))})}),this.cate=l,!1}var d=null,u=null,h=(document.querySelector(".right").offsetLeft,c=this,t.currentTarget);t.clientX,h.offsetLeft,t.clientY,h.offsetTop;document.onmousemove=function(t){var e=c.$refs.mainbox.getBoundingClientRect().left,i=c.$refs.mainbox.getBoundingClientRect().top,s=t.clientX,r=t.clientY;d=(s-e)/o,u=(r-i)/n,s-e<=o&&s-e>=0&&(a.posx=d),r-i<=n&&r-i>=0&&(a.posy=u)},document.onmouseup=function(t){return document.onmousemove=null,document.onmousemove=null,c.handleicon(a,2),!1}},handleicon:function(t,e){var i=this;this.axios.post("/index.php?m=Api&c=project&a=changeIconProject",this.Qs.stringify({userId:this.usreInfo.user_id,projectId:this.project_id,floorId:this.defaultlayer.floorid,operate:e||1,typeId:t.onegoodscategoryid,portId:t.onegoodscategoryid?"":t.portid,posx:t.posx,posy:t.posy,pointId:t.iconid,portNum:t.onegoodscategoryid?"":t.portnum})).then(function(t){if(1!=t.data.status)return i.$Message.error(t.data.msg),!1})},loadImage:function(t){var e=this,i=t.currentTarget.getAttribute("src"),s=t.currentTarget.parentNode;s.style.left=0,s.style.top=0;var a=new Image,n=0,o=0;a.src=i,a.onload=function(){if(n=a.height,(o=a.width)>n)if(o>998){var t=998/o,i=798/n;n*t>798?(e.imageheight=798,e.imagewidtn=o*i):(e.imagewidtn=998,e.imageheight=n*t)}else e.imagewidtn=o,e.imageheight=n;else if(n>o)if(n>798){i=798/n;e.imagewidtn=o*i,e.imageheight="798"}else e.imagewidtn=o,e.imageheight=n;else if(o>798&&n>798){var s=798/n;e.imagewidtn=o*s,e.imageheight=798}else e.imagewidtn=o,e.imageheight=n;e.isload=!0,e.sideLeft=(998-e.imagewidtn)/2,e.sideTop=(798-e.imageheight)/2}},floor_switch:function(){this.floorswitchshow=!this.floorswitchshow},addfools:function(t){t&&(this.addfoolsdata=t,this.addfoolsname=t.layername),this.addfoolsshow=!this.addfoolsshow},addfoolsbtn:function(t){var e=this;if(!this.addfoolsname)return this.$Message.error("请填写楼层名称"),!1;if(this.addfoolsdata)var i={userId:this.usreInfo.user_id,projectId:this.project_id,floorId:this.addfoolsdata.floorid,floorName:this.addfoolsname,time:this.storage.gettime()};else i={userId:this.usreInfo.user_id,projectId:this.project_id,floorId:"li"+(new Date).getTime(),floorName:this.addfoolsname,time:this.storage.gettime()};this.axios.post("/index.php?m=Api&c=project&a=projectAddFloor",this.Qs.stringify(i)).then(function(t){1==t.data.status?(e.$Message.success(t.data.msg),e.addfools(),e.getfools()):e.$Message.error(t.data.msg),e.addfoolsname=""}),this.floor_switch()},already:function(t){this.alreadyshow=t},back:function(){this.$router.push({path:"/cate",query:{id:this.project_id}})},activecate:function(t){return 0!=t.checked&&(!(t.num<=0)&&void(this.activecateid==t.id?(this.activecateid="",this.specialcateid=0,1==this.issearchicon&&this.mapcate("")):(1==this.issearchicon&&this.mapcate(t),this.activecateid=t.id)))},catenext:function(t){this.catenextdatakey=0,t.id==this.catenextdata.id?this.catenextdata="":(this.specialcateid=0,this.catenextdata=t)},specialactivecate:function(t){this.catenextdatakey=0,this.specialcateid==t.id?(this.specialcateid=0,this.catenextdata=""):(this.catenextdata=t,this.specialcateid=t.id)},getfools:function(t,e){var i=this,s=this,a={userId:s.usreInfo.user_id,projectId:s.project_id,layer:!0};q.a.all([q.a.post(s.hosturl+"/index.php?m=Api&c=project&a=getIconsProjectPC",s.Qs.stringify(a)),q.a.post(s.hosturl+"/index.php?m=Api&c=project&a=projectIconCategory",s.Qs.stringify(a)),q.a.post(s.hosturl+"/index.php?m=Api&c=project&a=projectInfo",s.Qs.stringify({user_id:s.usreInfo.user_id,project_id:s.project_id,projectType:1})),q.a.post(s.hosturl+"/index.php?m=Api&c=project&a=projectinfos",s.Qs.stringify(a))]).then(q.a.spread(function(t,e,a,n){var o=n.data.products,c=a.data.result;if(c)if(c.functionarray)var r=c.functionarray.split(",");else r=[];var l=e.data.result;i.mattertype=t.data.icontype,1==t.data.pointIconSize&&(i.iconsize=20,i.iconssmall="小"),2==t.data.pointIconSize&&(i.iconsize=25,i.iconssmall="中"),3==t.data.pointIconSize&&(i.iconsize=30,i.iconssmall="大");var d=t.data.layer;if(d){d&&d.forEach(function(t,e){var i=t.marks.marks;if(i)for(var s=0;i.length>s;s++)14==i[s].type&&(i[s].info.a=2*Math.PI-parseFloat(i[s].info.a))}),s.layer=d;var u=d[i.defaultlayerkey],h=u.icon;h&&h.forEach(function(t,e){t.ispreview=!1}),s.defaultlayer=u;var _=""+i.hosturl+d[i.defaultlayerkey].image,p=new Image;p.src=_,p.onload=R()(T.a.mark(function t(){var e,s;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.height;case 2:return e=t.sent,t.next=5,p.width;case 5:s=t.sent,1e3/s,i.isimageratio=!0,e>s&&e>800&&(i.imageratio=1);case 9:case"end":return t.stop()}},t,i)})),l&&l.forEach(function(t,e){t.checked=0,r&&r.forEach(function(e,i){parseInt(e)==t.id&&(t.checked=1)})});var v=[];d&&d.forEach(function(t,e){var i=t.icon;i&&i.forEach(function(t,e){t.ispreview=!1,v.push(t)})}),l&&l.forEach(function(t,e){var i;1==t.checked&&((i=t.child)&&i.forEach(function(t,e){o&&o.forEach(function(e,i){if(e.productparenttypeid==t.id){var s=e.ports;s?s&&s.forEach(function(e,i){t.num+=parseInt(e.val)}):t.num+=parseInt(e.num)}}),v&&v.forEach(function(e,i){e.onegoodscategoryid==t.id&&(e.portid&&e.portnum>0?t.num-=parseInt(e.portnum):t.num-=1)})}));(i=t.child)&&i.forEach(function(e,i){1==e.codes&&(t.num+=e.num)})})}else s.floorswitchshow=!0,s.defaultlayer="",s.imageheight=0,s.layer="";s.cate=l}))},comcatenum:function(){var t=this.layer,e=this.cate;if(t){var i=[];t&&t.forEach(function(t,e){var s=t.icon;s&&s.forEach(function(t,e){i.push(t)})}),e&&e.forEach(function(t,e){i&&i.forEach(function(e,i){var s=t.child;s&&s.forEach(function(t,i){e.onegoodscategoryid==t.id&&(""!=e.portid?t.num+=e.portnum:t.num+=1)})});var s=t.child;s&&s.forEach(function(e,i){t.num+=e.num})})}this.cate=e},foolsdel:function(t,e){this.dlefloorshow=!0,this.dlefloordata=t},canceldlefloor:function(){this.dlefloordata="",this.dlefloorshow=!1},verifydlefloor:function(){var t=this;if(this.dlefloordata){var e={projectId:this.project_id,userId:this.usreInfo.user_id,floorId:this.dlefloordata.floorid};this.axios.post("/index.php?m=Api&c=project&a=projectDelFloor",this.Qs.stringify(e)).then(function(e){1==e.data.status?(t.$Message.success(e.data.msg),t.getfools()):t.$Message.error(e.data.msg)})}},activefools:function(t,e){var i=this;if(this.imageheight=0,this.imagewidtn=0,this.sideTop=0,this.sideLeft=0,this.defaultlayerkey=e,this.catenextdata="",this.imageratio=0,this.defaultlayer=t,t.image){this.$Spin.show();var s=""+this.hosturl+t.image,a=new Image;a.src=s,a.onload=R()(T.a.mark(function t(){var e,s;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.height;case 2:return e=t.sent,t.next=5,a.width;case 5:s=t.sent,1e3/s,i.isimageratio=!0,e>s&&e>800&&(i.imageratio=1),i.$Spin.hide();case 10:case"end":return t.stop()}},t,i)}))}this.floor_switch(),this.$Spin.hide()},imgUpload:function(t){if(!this.defaultlayer)return this.$Message.error("请先添加楼层"),!1;this.$Spin.show();var e=t.target.files[0],i=new FormData;i.append("file",e),i.append("chunk","0");var s=this;this.axios.post("/index.php?m=Api&c=Upload&a=imageUp",i).then(function(t){if("SUCCESS"==t.data.result.state){var e=t.data.result.url;s.floorimg=e;var i={userId:s.usreInfo.user_id,projectId:s.project_id,floorId:s.defaultlayer.floorid,photoUrl:e,time:s.storage.gettime()};s.axios.post("/index.php?m=Api&c=project&a=editPhotoProject",s.Qs.stringify(i)).then(function(t){s.axios.post("/index.php?m=Api&c=project&a=getIconsProject",s.Qs.stringify({userId:s.usreInfo.user_id,projectId:s.project_id,layer:!0})).then(function(e){1==e.data.status?s.$Message.success(t.data.msg):s.$Message.error("上传错误2"),s.getfools()}).catch(function(t){console.log(t)})})}}),this.$Spin.hide()}},updated:function(){this.$refs.mainbox.addEventListener("mousewheel",this.imgMoseeWheel,!1),this.$refs.mainbox.addEventListener("DOMMouseScroll",this.imgMoseeWheel,!1)},mounted:function(){var t=this;this.$nextTick(function(){t.$Spin.hide()})},created:function(){this.$Spin.show();var t=this.storage.getSession("usreInfo");if(!t)return this.$router.replace("/login"),!1;this.usreInfo=t;var e=this.$route.query.id;this.project_id=e;var i=this.$route.query.key?this.$route.query.key:0;this.defaultlayerkey=i;var s=this.$route.query.opennames;this.opennames=s||3,this.getfools("created",i)},filters:{picture:function(t,e){if(t>0&&e>0){if(t>e&&t>800)return{height:"800px"};if(t<e&&e>1e3)return{width:"1000px"}}},transform:function(t){return"transform: rotate("+180*(2*Math.PI-parseFloat(t))+"deg)"},textnbr:function(t){console.log(t)}}},at={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"data",staticClass:"center",style:[t.pageheight,t.pagewidth,t.pagebg]},[i("div",{staticClass:"left"},[i("div",{staticClass:"left_top"},[i("div",{staticClass:"text-00b9e0  cursor",on:{click:t.back}},[i("i",{staticClass:"icon iconfont iconblue_pt1"}),t._v("返回")]),t._v(" "),i("div",{staticClass:"text-00b9e0  cursor",on:{click:function(e){return t.sendemail(t.project_id)}}},[t._v("发送"),i("i",{staticClass:"icon iconfont iconsharept_blue",staticStyle:{"margin-left":"3px"}})])]),t._v(" "),i("div",{staticClass:"left_buttom"},[i("div",{staticClass:"left_buttom_floor"},[i("div",{staticClass:"text-768395 size12"},[t._v("\n            楼层\n          ")]),t._v(" "),i("div",{staticClass:"text-00b9e0 cursor ellipsis text-center",staticStyle:{width:"95px"},on:{click:function(e){return t.floor_switch()}}},[t._v("\n            "+t._s(t.defaultlayer.layername?t.defaultlayer.layername:"请选择楼层")+"\n          ")]),t._v(" "),i("div",{on:{click:function(e){return t.floor_switch()}}},[i("i",{staticClass:"text-9ca9bb icon iconfont iconswitcher_gray cursor"})])]),t._v(" "),i("div",{staticClass:"left_buttom_nav"},[i("div",{staticClass:"left_buttom_nav_top size12"},[t._v("功能分类（选图标放置点位）")]),t._v(" "),i("div",{staticClass:"left_buttom_nav_buttom"},t._l(t.cate,function(e,s){return i("div",{key:s,staticClass:"left_buttom_nav_buttom_item"},[i("div",{staticClass:"left_buttom_nav_buttom_item_li cursor",class:t.activecateid==e.id?"text-00b9e0":"",style:{background:0==e.checked?"#E3E8EF":"",color:0==e.checked?"#768395":"",borderBottom:0==e.checked?"1px solid #f9fbff":"",borderTop:0==e.checked?"1px solid #f9fbff":"",opacity:0==e.checked?"0.6":""},on:{click:function(i){return t.activecate(e)}}},[i("i",{staticClass:"icon iconfont  size22",class:"iconx-"+e.id,staticStyle:{"margin-right":"3px"}}),t._v(" "),i("div",[t._v(t._s(e.name))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1==e.checked,expression:"i.checked==1"}],staticClass:"ellipsis text-center",staticStyle:{position:"absolute",right:"5px",background:"#D0021B",width:"20px",height:"20px",color:"#FFF","border-radius":"50%"}},[t._v(t._s(e.num))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.activecateid==e.id&&0==t.issearchicon,expression:"activecateid == i.id && issearchicon==false"}],staticClass:"left_buttom_nav_buttom_item_bit "},t._l(e.child,function(e,s){return i("div",{directives:[{name:"show",rawName:"v-show",value:0!=e.image,expression:"c.image!=false"}],key:s,staticClass:"left_buttom_nav_buttom_item_bit_li cursor"},[913==e.id||914==e.id||915==e.id?i("div",{staticClass:"left_buttom_nav_buttom_item_bit_li_yy"},[891==e.id||913==e.id?i("div",{staticClass:"text-00b9e0 text-center size12 hide",staticStyle:{width:"96px"}},[t._v("以下图标请根据\n                      实际需求放置点位\n                    ")]):t._e(),t._v(" "),i("div",{staticClass:"left_buttom_nav_buttom_item_bit_li_yy_name",staticStyle:{"padding-left":"15px"},on:{click:function(i){return t.specialactivecate(e)}}},[i("div",{staticClass:"left_buttom_nav_buttom_item_bit_li_active "}),t._v(" "),i("div",{staticClass:"left_buttom_nav_buttom_item_bit_li_img"},[i("img",{attrs:{width:"20",height:"20",src:t.hosturl+e.image[0],alt:""}})]),t._v(" "),i("div",{staticClass:"ellipsis left_buttom_nav_buttom_item_bit_li_text"},[t._v(t._s(e.name)+"\n                        "),i("i",{directives:[{name:"show",rawName:"v-show",value:t.specialcateid==e.id,expression:"specialcateid==c.id"}],staticClass:"icon iconfont iconblue1 text-00b9e0 "})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.num>0,expression:"c.num > 0"}],staticClass:"left_buttom_nav_buttom_item_bit_li_num ellipsis"},[t._v(t._s(e.num))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.specialcateid==e.id,expression:"specialcateid==c.id"}],staticClass:"left_buttom_nav_buttom_item_bit_li_yy_name",staticStyle:{"background-color":"#D4DBE6",height:"60px","padding-left":"-15px"}},t._l(e.image,function(s,a){return i("div",{key:a,staticClass:"left_buttom_nav_buttom_item_bit_li_yy_name_img"},[i("img",{attrs:{width:"20",height:"20",src:t.hosturl+s,alt:""},on:{click:function(i){return t.specialactivecatenum(s,a,e)}}}),t._v(" "),i("div",{class:t.catenextdatakey==a?"text-00b9e0":""},[t._v(t._s(a+1)+"路")])])}),0)]):i("div",{staticClass:"left_buttom_nav_buttom_item_bit_li_zc"},[i("div",{staticClass:"left_buttom_nav_buttom_item_bit_li_active ",staticStyle:{"margin-right":"3px"}},[i("i",{directives:[{name:"show",rawName:"v-show",value:t.catenextdata.id==e.id,expression:"catenextdata.id==c.id"}],staticClass:"icontriangle"})]),t._v(" "),i("div",{staticClass:"left_buttom_nav_buttom_item_bit_li_img"},[i("img",{attrs:{width:"20",height:"20",src:t.hosturl+e.image[0],alt:""}})]),t._v(" "),i("div",{staticClass:"ellipsis left_buttom_nav_buttom_item_bit_li_text",on:{click:function(i){return t.catenext(e)}}},[t._v(t._s(e.name))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.num>0,expression:"c.num > 0"}],staticClass:"left_buttom_nav_buttom_item_bit_li_num ellipsis"},[t._v(t._s(e.num))])])])}),0)])}),0)]),t._v(" "),i("div",{staticClass:"left_buttom_other"},[i("div",{staticClass:"left_buttom_other_size"},[i("div",{staticClass:"left_buttom_other_size_left size12 text-center"},[t._v("尺寸")]),t._v(" "),i("div",{staticClass:"left_buttom_other_size_right"},[i("RadioGroup",{directives:[{name:"show",rawName:"v-show",value:2!=t.mattertype,expression:"mattertype!=2"}],on:{"on-change":t.small},model:{value:t.iconssmall,callback:function(e){t.iconssmall=e},expression:"iconssmall"}},[i("Radio",{attrs:{value:"3",label:"小"}}),t._v(" "),i("Radio",{attrs:{value:"2",label:"中"}}),t._v(" "),i("Radio",{attrs:{value:"1",label:"大"}})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2==t.mattertype,expression:"mattertype==2"}]},[t._v("不可使用")])],1)]),t._v(" "),i("div",{staticClass:"left_buttom_other_point"},[i("div",{staticClass:"left_buttom_other_point_left size12 text-center"},[t._v("点位")]),t._v(" "),i("div",{staticClass:"left_buttom_other_point_right"},[i("div",{staticClass:"left_buttom_other_point_right_item"},[i("label",{staticClass:"ivu-radio-wrapper ivu-radio-group-item ivu-radio-default ",class:1==t.mattertype?"ivu-radio-checked":"",on:{click:function(e){return t.matter(1)}}},[t._m(0),t._v("\n                  黑白点位\n                ")])]),t._v(" "),i("div",{staticClass:"left_buttom_other_point_right_item"},[i("label",{staticClass:"ivu-radio-wrapper ivu-radio-group-item ivu-radio-default ",class:2==t.mattertype?"ivu-radio-checked":"",on:{click:function(e){return t.matter(2)}}},[t._m(1),t._v("\n                  实物点位\n                ")])])])])]),t._v(" "),i("div",{staticClass:"left_buttom_edit text-center"},[i("div",{staticClass:"left_buttom_edit_img cursor"},[i("label",[i("i",{staticClass:"icon iconfont iconnormal3"}),t._v(" "),""!=t.defaultlayer?i("input",{staticStyle:{display:"none"},attrs:{type:"file",accept:"image/x-png,image/jpeg,image/bmp",name:"file"},on:{change:function(e){return t.imgUpload(e)}}}):t._e()])]),t._v(" "),i("div",{staticClass:"left_buttom_edit_search cursor",class:t.issearchicon?"text-00b9e0":""},[i("i",{staticClass:"icon iconfont iconnormal",on:{click:function(e){return t.searchicon()}}})]),t._v(" "),i("div",{staticClass:"left_buttom_edit_del cursor ",class:t.isrmicon?"text-00b9e0":"",on:{click:function(e){return t.rmicon()}}},[i("i",{staticClass:"icon iconfont iconnormal4"})])])])]),t._v(" "),i("div",{staticClass:"right"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.floorswitchshow,expression:"floorswitchshow"}],staticClass:"left_buttom_floor_switch "},[i("div",{staticClass:"left_buttom_floor_switch_list cursor"},[t._l(t.layer,function(e,s){return i("div",{key:s,staticClass:"left_buttom_floor_switch_list_li text-center ellipsis text-768395",class:e.id==t.defaultlayer.id?"checked":""},[i("div",{on:{click:function(i){return t.activefools(e,s)}}},[t._v(t._s(e.layername))]),t._v(" "),i("i",{staticClass:"size12 icon iconfont iconred_pt left_buttom_floor_switch_list_li_close text-bfc8d4",on:{click:function(i){return t.foolsdel(e,s)}}})])}),t._v(" "),i("div",{staticClass:"left_buttom_floor_switch_list_li text-center ellipsis text-bfc8d4",on:{click:function(e){return t.addfools("")}}},[i("i",{staticClass:"size14 icon iconfont icongrayAdd1"}),t._v("\n            添加\n          ")]),t._v(" "),i("div",{staticClass:"left_buttom_floor_switch_list_li text-center ellipsis text-bfc8d4",on:{click:function(e){return t.addfools(t.defaultlayer)}}},[t._v("修改楼层名称")])],2)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.addfoolsshow,expression:"addfoolsshow"}],staticClass:"right_addfoolsshow"},[i("div",{staticClass:"right_addfoolsshow_title cursor"},[t._v("\n          添加楼层\n          "),i("i",{staticClass:"size14 icon iconfont iconred_pt right_addfoolsshow_title_close ",on:{click:t.addfools}})]),t._v(" "),i("div",{staticClass:"right_addfoolsshow_in",staticStyle:{width:"300px",margin:"auto"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.addfoolsname,expression:"addfoolsname"}],staticClass:"right_addfoolsshow_input",attrs:{placeholder:"请输入楼层名称",type:"text"},domProps:{value:t.addfoolsname},on:{input:function(e){e.target.composing||(t.addfoolsname=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"right_addfoolsshow_btn text-center text-00b9e0 cursor text-center",on:{click:function(e){return t.addfoolsbtn()}}},[t._v("确定")])]),t._v(" "),i("div",{ref:"mainbox",staticClass:"right_img",class:0==t.imageheight?"imgadd":"",style:{height:t.imageheight+"px",width:t.imagewidtn+"px",left:t.sideLeft+"px",top:t.sideTop+"px"}},[t.defaultlayer.image?i("div",{ref:"imagebox",staticClass:"moveBox"},[i("div",{staticStyle:{border:"1px solid #EAEFF5"}},[i("img",{ref:"img2",attrs:{width:t.imagewidtn,height:t.imageheight,src:t.hosturl+t.defaultlayer.image,alt:""},on:{load:function(e){return t.loadImage(e)},mouseup:function(e){return t.addicons(e)},mousedown:t.moveBox}}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.imageheight>0,expression:"imageheight >0"}]},t._l(t.defaultlayer.icon,function(e,s){return i("span",{key:s},[i("img",{directives:[{name:"show",rawName:"v-show",value:0==t.mattertype&&0==e.ispreview,expression:"mattertype==0 && i.ispreview==false"}],staticClass:"cursor",staticStyle:{"z-index":"9",position:"absolute"},style:{top:e.posy*t.imageheight-t.iconsize/2+"px",left:e.posx*t.imagewidtn-t.iconsize/2+"px"},attrs:{src:t.hosturl+e.image,width:t.iconsize,height:t.iconsize},on:{mousedown:function(i){return t.moveIcons(i,s,e.id,e)}}}),t._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:1==t.mattertype&&0==e.ispreview,expression:"mattertype==1 && i.ispreview==false"}],staticClass:"cursor",staticStyle:{position:"absolute","z-index":"9"},style:{top:e.posy*t.imageheight-t.iconsize/2+"px",left:e.posx*t.imagewidtn-t.iconsize/2+"px"},attrs:{src:t.hosturl+e.image1,width:t.iconsize,height:t.iconsize},on:{mousedown:function(i){return t.moveIcons(i,s,e.id,e)}}}),t._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:2==t.mattertype&&0==e.ispreview,expression:"mattertype==2 && i.ispreview==false"}],staticClass:"cursor",staticStyle:{position:"absolute","z-index":"9"},style:{top:e.posy*t.imageheight-15+"px",left:e.posx*t.imagewidtn-15+"px"},attrs:{src:t.hosturl+e.image2,width:30,height:30},on:{mousedown:function(i){return t.moveIcons(i,s,e.id,e)}}})])}),0),t._v(" "),t._l(t.defaultlayer.marks.marks,function(e,s){return i("span",{directives:[{name:"show",rawName:"v-show",value:0==t.maphideshop,expression:"maphideshop == 0"}],key:s},[14==e.type?i("span",{staticStyle:{position:"absolute","transform-origin":"left bottom"},style:{top:e.info.y*t.imageheight-t.imagewidtn*e.info.r-4+"px",left:e.info.x*t.imagewidtn-4+"px",transform:"rotate("+e.info.a*(180/Math.PI)+"deg)"},on:{mouseup:function(e){return t.addicons(e)}}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:e.info.r*t.imagewidtn+2,height:e.info.r*t.imagewidtn+2}},[i("path",{staticStyle:{"stroke-width":"4"},attrs:{d:["M1 "+e.info.r*t.imagewidtn+" L1 1 A"+e.info.r*t.imagewidtn+" "+e.info.r*t.imagewidtn+" 0 0 1 "+e.info.r*t.imagewidtn+" "+e.info.r*t.imagewidtn+"  Z"],fill:"none",stroke:"rgb("+e.color+")","stroke-dasharray":"8 4"}})])]):t._e(),t._v(" "),11==e.type?i("span",{staticStyle:{position:"absolute","transform-origin":"left bottom"},style:{top:e.info.y*t.imageheight-t.imageheight*e.info.h/2+"px",left:e.info.x*t.imagewidtn-t.imagewidtn*e.info.w/2+"px",transform:"rotate("+e.info.a*(180/Math.PI)+"deg)"},on:{mouseup:function(e){return t.addicons(e)}}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:e.info.w*t.imagewidtn,height:e.info.h*t.imageheight}},[i("rect",{staticStyle:{fill:"none","stroke-width":"4px"},style:{stroke:"rgb("+e.color+")"},attrs:{width:e.info.w*t.imagewidtn,height:e.info.h*t.imageheight}})])]):t._e(),t._v(" "),12==e.type||15==e.type?i("span",{staticStyle:{position:"absolute","transform-origin":"left bottom"},style:{top:e.info.y*t.imageheight-t.imagewidtn*e.info.w/2+"px",left:e.info.x*t.imagewidtn-t.imageheight*e.info.h/2+"px",transform:"rotate("+e.info.a*(180/Math.PI)+"deg)"},on:{mouseup:function(e){return t.addicons(e)}}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:e.info.w*t.imagewidtn+8,height:e.info.h*t.imageheight+8}},[12==e.type?i("ellipse",{staticStyle:{"stroke-width":"4"},attrs:{cx:e.info.w/2*t.imagewidtn+4,cy:e.info.h/2*t.imageheight+4,rx:e.info.w/2*t.imagewidtn,ry:e.info.h/2*t.imageheight,fill:"none",stroke:"rgb("+e.color+")"}}):t._e(),t._v(" "),15==e.type?i("ellipse",{staticStyle:{"stroke-width":"4"},attrs:{cx:e.info.w/2*t.imagewidtn+4,cy:e.info.h/2*t.imageheight+4,rx:e.info.w/2*t.imagewidtn,ry:e.info.h/2*t.imageheight,fill:"none",stroke:"rgb("+e.color+")","stroke-dasharray":"4 5"}}):t._e()])]):t._e(),t._v(" "),10==e.type?i("span",{staticStyle:{position:"absolute","transform-origin":"left bottom"},style:{top:e.info.y*t.imageheight+"px",left:e.info.x*t.imagewidtn+"px"},on:{mouseup:function(e){return t.addicons(e)}}},[i("pre",{staticStyle:{"line-height":"1.5"},style:{color:"rgb("+e.color+")"}},[t._v(t._s(e.info.text))])]):t._e(),t._v(" "),13==e.type?i("span",{staticStyle:{position:"absolute","transform-origin":"left bottom",top:"0",left:"0"},on:{mouseup:function(e){return t.addicons(e)},mousedown:t.moveBox}},[i("Arrow",{attrs:{imgwidth:t.imagewidtn,h:e.info.y2-e.info.y1,imgheight:t.imageheight,x1:e.info.x1,y1:e.info.y1,x2:e.info.x2,y2:e.info.y2,canvas_id:"canvas_id"+s,color:e.color,data:e}})],1):t._e()])})],2),t._v(" "),i("div",{staticStyle:{position:"absolute",right:"10%",top:"0",height:"40px",width:"80%"}})]):t._e(),t._v(" "),t.defaultlayer.image?t._e():i("div",{staticClass:"right_img_iconlineDark cursor"},[i("label",{staticClass:"right_img_iconlineDark cursor"},[t.defaultlayer?i("i",{staticClass:"icon iconfont iconlineDark",staticStyle:{"font-size":"30px"}}):t._e(),t._v(" "),i("div",{staticClass:"text-center",staticStyle:{width:"100%"}},[t._v(" "+t._s(t.defaultlayer?"添加图片":"请先添加楼层"))]),t._v(" "),t.defaultlayer?i("input",{staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png,image/jpeg,image/jpg",name:"file"},on:{change:function(e){return t.imgUpload(e)}}}):t._e()])])]),t._v(" "),i("div",{staticClass:"right_btn-description-reveal"},[i("i",{directives:[{name:"show",rawName:"v-show",value:!t.alreadyshow,expression:"!alreadyshow"}],staticClass:"icon iconfont iconreveal text-00b9e0 cursor ",staticStyle:{"font-size":"32px"},on:{click:function(e){return t.already(!0)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.alreadyshow,expression:"alreadyshow"}]},[i("div",{staticClass:"right_btn-description-reveal_list "},[i("div",{staticClass:"right_btn-description-reveal_list_top text-center"},[t._v("\n              已放置点位\n              "),i("i",{staticClass:"icon iconfont icongraySub1 right_btn-description-reveal_list_top_icongraySub1 cursor",on:{click:function(e){return t.already(!1)}}})]),t._v(" "),i("div",{staticClass:"right_btn-description-reveal_list_ul"},t._l(t.defaultlayer.cate,function(e,s){return i("div",{directives:[{name:"show",rawName:"v-show",value:e.num>0,expression:"i.num >0"}],key:s,staticClass:"right_btn-description-reveal_list_ul_li"},[i("div",{staticClass:"text-00b9e0 "},[t._v(t._s(e.iconname))]),t._v(" "),i("div",{staticClass:" ellipsis",staticStyle:{width:"72px"}},[t._v(t._s(e.name))]),t._v(" "),i("div",[t._v(t._s(e.num))])])}),0)])])]),t._v(" "),t.defaultlayer?i("div",{staticClass:"right_btn_description_zoomin",staticStyle:{right:"70px"}},[i("i",{staticClass:"icon iconfont iconhide_blue  cursor ",class:0==t.maphideshop?"text-00b9e0":"text-768395",staticStyle:{"font-size":"36px"},on:{click:function(e){return t.maphide()}}})]):t._e(),t._v(" "),t.defaultlayer?i("div",{staticClass:"right_btn_description_zoomin"},[i("i",{staticClass:"icon iconfont iconzoomin text-768395 cursor ",staticStyle:{"font-size":"36px"},on:{click:function(e){return t.iconhide()}}})]):t._e(),t._v(" "),i("div",{staticClass:"right_btn_description_zoomin hide",staticStyle:{right:"100px"}},[i("Button",{staticClass:"right_btn_description_zoomin",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.FullScreen()}}},[t._v("全屏")])],1)]),t._v(" "),i("Modal",{staticClass:"text-center",attrs:{width:"300px",title:"提示",closable:!1,"mask-closable":!1},on:{"on-cancel":t.canceldlefloor,"on-ok":t.verifydlefloor},model:{value:t.dlefloorshow,callback:function(e){t.dlefloorshow=e},expression:"dlefloorshow"}},[i("div",[t._v("\n        确认删除该楼层吗？\n      ")])]),t._v(" "),i("Email",{attrs:{sendtype:2,itemdata:t.sendemaildata,value:t.sendemailshow},on:{closeFn:t.closesendemail}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"ivu-radio",staticStyle:{"margin-right":"0"}},[e("span",{staticClass:"ivu-radio-inner"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"ivu-radio",staticStyle:{"margin-right":"0"}},[e("span",{staticClass:"ivu-radio-inner"})])}]};var nt=s("VU/8")(st,at,!1,function(t){s("IIvG")},"data-v-291d0396",null).exports,ot=s("L6bb"),ct=s.n(ot),rt={name:"Login",data:function(){return{usreInfo:{username:"",password:"",verify_code:""},verify_code:"",type:1}},components:{},methods:{login:function(){var t=this;if(""==this.usreInfo.username)return this.$Message.error("请输入手机号码"),!1;if(""==this.usreInfo.password)return this.$Message.error("请输入密码"),!1;if(""==this.usreInfo.verify_code)return this.$Message.error("请输入验证码"),!1;this.usreInfo.password=ct()(this.usreInfo.password);var e=this.usreInfo,i="/index.php?m=Api&c=User&a=login";1==this.type&&(i="/index.php?m=home&c=user&a=do_login&t="+Math.random()),this.axios.post(i,this.Qs.stringify(e)).then(function(e){return-2==e.data.status?(t.usreInfo.password="",t.usreInfo.verify_code="",t.$Message.error(e.data.msg),t.code(),!1):0==e.data.status?(t.usreInfo.password="",t.usreInfo.verify_code="",t.$Message.error(e.data.msg),t.code(),!1):3!=e.data.result.level&&5!=e.data.result.level?(t.usreInfo.password="",t.usreInfo.verify_code="",t.$Message.error("vip用户才能登陆"),t.code(),!1):(t.$Message.success("登陆成功"),t.storage.setSession("usreInfo",e.data.result),void t.$router.replace("/index?opennames=2&type=1"))})},code:function(){this.verify_code=this.hosturl+"/index.php?m=Home&c=User&a=verify&r="+Math.random()}},created:function(){this.code(),this.$route.query.type&&(this.type=this.$route.query.type),this.storage.getSession("usreInfo")&&this.$router.replace("/index")}},lt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"login"}},[i("div",{staticClass:"loginMask"},[t._m(0),t._v(" "),i("div",{staticClass:"inputItem"},[i("Input",{staticStyle:{width:"274px"},attrs:{clearable:"",placeholder:"请输入手机号码",size:"large"},model:{value:t.usreInfo.username,callback:function(e){t.$set(t.usreInfo,"username",e)},expression:"usreInfo.username"}})],1),t._v(" "),i("div",{staticClass:"inputItem"},[i("Input",{staticStyle:{width:"274px"},attrs:{clearable:"",type:"password",password:"",placeholder:"请输入密码",size:"large"},model:{value:t.usreInfo.password,callback:function(e){t.$set(t.usreInfo,"password",e)},expression:"usreInfo.password"}})],1),t._v(" "),i("div",{staticClass:"inputItem code"},[i("Input",{staticStyle:{width:"148px"},attrs:{clearable:"",placeholder:"请输入验证码",size:"large"},model:{value:t.usreInfo.verify_code,callback:function(e){t.$set(t.usreInfo,"verify_code",e)},expression:"usreInfo.verify_code"}}),t._v(" "),i("img",{ref:"verify_code_img",attrs:{width:"120",height:"",src:t.verify_code,id:"verify_code_img"},on:{click:function(e){return t.code()}}})],1),t._v(" "),i("div",{staticClass:"loginBox",on:{click:function(e){return t.login()}}},[t._v("登录")]),t._v(" "),i("div",{staticClass:"otips"},[t._v("壹智能PC版仅限VIP版服务商用户使用,如有问题,请咨询壹智能销售部 朱经理 18721906763")])]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo_item"},[e("img",{staticClass:"logoImg",attrs:{src:"data:image/png;base64,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"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{width:"100%",height:"30px",color:"#8EA6D8",bottom:"0",left:"0",position:"fixed",display:"flex","align-items":"center","justify-content":"center"}},[this._v("\n    Copyright © Oneapptech\n    "),e("a",{staticClass:"size12",staticStyle:{color:"#8EA6D8","margin-left":"10px"},attrs:{target:"_blank",href:"http://www.beian.miit.gov.cn/"}},[this._v("沪ICP备17051275号")])])}]};var dt=s("VU/8")(rt,lt,!1,function(t){s("oo7C")},"data-v-3a767389",null).exports,ut={name:"preview",data:function(){return{usreInfo:"",project_id:"",floors:[],layer:[],dataimg:{height:0,width:0},imgkeynum:0,imgnum:10,logo:"",point:[],floorstitle:[],columns:[{title:"功能",key:"fun",align:"center"},{title:"点位",key:"pt",align:"center"},{title:"点位全称",key:"ptname",align:"center"}],data5:[],data1:[],imageratio:0,sendemaildata:"",sendemailshow:!1,icontype:0,size:20,opennames:2}},components:{Email:f,Arrow:L},filters:{funheight:function(t){return{height:35*t.length+"px"}}},methods:{sendemail:function(t){var e={createtime:1574054122,customeraddress:"111",customername:"1",customertelephone:"15123456789",functionarray:"",id:this.project_id,platformarray:"",projectname:"1",projectstate:0,x_createtime:"2019.11.18"};this.sendemaildata=e,this.sendemailshow=!0},closesendemail:function(){this.sendemaildata="",this.sendemailshow=!1},handleSpan:function(t){var e=t.row,i=(t.column,t.rowIndex,t.columnIndex);if("智能照明"===e.fun&&0===i)return{rowspan:5,colspan:1}},back:function(){this.$router.back()},btnleft:function(){var t=this;this.imageratio=0;var e=this.imgkeynum<=0?0:this.imgkeynum-1,i=this.layer[e];if(i){var s=""+this.hosturl+i.image,a=new Image;a.src=s,a.onload=R()(T.a.mark(function e(){var i,s;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.height;case 2:return i=e.sent,e.next=5,a.width;case 5:s=e.sent,i>s&&i>t.imgheight-50&&(t.imageratio=1);case 7:case"end":return e.stop()}},e,t)}))}this.imgkeynum=this.imgkeynum<=0?0:this.imgkeynum-1},btnright:function(){var t=this;this.imageratio=0;var e=this.imgkeynum>=this.imgnum?this.imgnum+1:this.imgkeynum+1,i=this.layer[e];if(i){var s=""+this.hosturl+i.image,a=new Image;a.src=s,a.onload=R()(T.a.mark(function e(){var i,s;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.height;case 2:return i=e.sent,e.next=5,a.width;case 5:s=e.sent,i>s&&i>t.imgheight-50&&(t.imageratio=1);case 7:case"end":return e.stop()}},e,t)}))}this.imgkeynum=this.imgkeynum>=this.imgnum?this.imgnum+1:this.imgkeynum+1},loadImage:function(t,e){this.dataimg={height:t.target.offsetHeight,width:t.target.offsetWidth,key:e}}},updated:function(){var t=this;this.$nextTick(function(){t.$Spin.hide()})},mounted:function(){this.$Spin.hide()},created:function(){var t=this;this.$Spin.show();var e=this.storage.getSession("usreInfo");this.usreInfo=e;var i=this.$route.query.id;this.project_id=i;var s=this.$route.query.opennames;this.opennames=parseFloat(s),i||this.$router.back(),this.axios.post("index.php?m=Api&c=project&a=getIconsProjectPC",this.Qs.stringify({userId:e.user_id,projectId:i,layer:!0})).then(function(e){var i=e.data.layer,s=e.data.layer;if(1==e.data.status){if(""==i||void 0==i||!i)return t.$Message.error("没有点位图"),t.$router.back(),!1;s&&s.forEach(function(t,e){var i=t.marks.marks;if(i)for(var s=0;i.length>s;s++)if(14==i[s].type&&(i[s].info.a=2*Math.PI-parseFloat(i[s].info.a)),10==i[s].type){var a=i[s].info.text.replace(/(\r\n)|(\n)/g,"<br/>");i[s].info.text=a}}),t.icontype=e.data.icontype;var a=e.data.pointIconSize;if(1==a)var n=20;if(2==a)n=25;if(3==a)n=30;t.size=n,i&&i.forEach(function(e,i){t.floorstitle.push({title:e.layername,key:i,align:"center"})});var o=""+t.hosturl+s[0].image,c=new Image;c.src=o,c.onload=R()(T.a.mark(function e(){var i,s;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.height;case 2:return i=e.sent,e.next=5,c.width;case 5:s=e.sent,i>s&&i>745&&(t.imageratio=1);case 7:case"end":return e.stop()}},e,t)})),t.floorstitle.push({title:"全宅",key:"qz",align:"center"}),t.floors=i,t.layer=s,t.logo=e.data.logo}}),this.axios.post("/index.php?m=Api&c=project&a=getPointCount",this.Qs.stringify({userId:e.user_id,projectId:i,layer:!0})).then(function(e){var i=e.data.default;t.data1=i,i&&i.forEach(function(e,i){var s=e.child;s&&s.forEach(function(i,s){var a=i,n=new Object,o=new Object;o.userName="admin",o.passWord="123456",n.fun=e.name,n.pt=a[0],n.ptname=a[1],t.data5.push(n),a&&a.forEach(function(t,e){})})})})}},ht={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",style:[t.pageheight,t.pagewidth,t.pagebg]},[t._l(t.layer,function(e,s){return i("div",{},[t.imgkeynum==s?i("div",[i("div",{staticClass:"p_top text-center size12"},[t._v(" "+t._s(e.layername))]),t._v(" "),i("div",{staticClass:"p_center"},[i("div",{staticClass:"p_center_left"},[i("div",{staticStyle:{position:"relative"},style:{"max-width":t.imgwidth-170+"px","max-height":t.imgheight-60+"px"}},[i("div",{staticStyle:{position:"relative",display:"flex","justify-content":"center","align-items":"center"},style:1==t.imageratio?{height:"746px"}:""},[e.image?i("img",{staticClass:"p_center_left_img",style:{"max-width":t.imgwidth-170+"px","max-height":t.imgheight-60+"px"},attrs:{src:t.hosturl+e.image,alt:""},on:{load:function(e){return t.loadImage(e,s)}}}):t._e(),t._v(" "),e.image?t._e():i("img",{staticClass:"p_center_left_img",style:{"max-width":t.imgwidth-170+"px","max-height":t.imgheight-60+"px"},attrs:{src:"/Template/pc/oneapp/Static/images/group.jpg",alt:""}}),t._v(" "),t._l(e.icon,function(e){return t.dataimg?i("span",{},[0==t.icontype?i("img",{staticStyle:{position:"absolute","z-index":"9"},style:{left:e.posx*t.dataimg.width-t.size/2+"px",top:e.posy*t.dataimg.height-t.size/2+"px"},attrs:{width:t.size+"px",height:"`${size}px`",src:t.hosturl+e.image,alt:""}}):t._e(),t._v(" "),1==t.icontype?i("img",{staticStyle:{position:"absolute","z-index":"9"},style:{left:e.posx*t.dataimg.width-t.size/2+"px",top:e.posy*t.dataimg.height-t.size/2+"px"},attrs:{width:t.size+"px",height:"`${size}px`",src:t.hosturl+e.image1,alt:""}}):t._e(),t._v(" "),2==t.icontype?i("img",{staticStyle:{position:"absolute","z-index":"9"},style:{left:e.posx*t.dataimg.width-15+"px",top:e.posy*t.dataimg.height-15+"px"},attrs:{width:"30px",height:"30px",src:t.hosturl+e.image2,alt:""}}):t._e()]):t._e()}),t._v(" "),t._l(e.marks.marks,function(s,a){return 0==e.marks.hide?i("span",{directives:[{name:"show",rawName:"v-show",value:t.dataimg,expression:"dataimg"}],key:a},[14==s.type?i("span",{staticStyle:{position:"absolute","transform-origin":"left bottom"},style:{top:s.info.y*t.dataimg.height-t.dataimg.width*s.info.r-4+"px",left:s.info.x*t.dataimg.width-4+"px",transform:"rotate("+s.info.a*(180/Math.PI)+"deg)"}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:s.info.r*t.dataimg.width+2,height:s.info.r*t.dataimg.width+2}},[i("path",{staticStyle:{"stroke-width":"4"},attrs:{d:["M1 "+s.info.r*t.dataimg.width+" L1 1 A"+s.info.r*t.dataimg.width+" "+s.info.r*t.dataimg.width+" 0 0 1 "+s.info.r*t.dataimg.width+" "+s.info.r*t.dataimg.width+"  Z"],fill:"none",stroke:"rgb("+s.color+")","stroke-dasharray":"8 4"}})])]):t._e(),t._v(" "),11==s.type?i("span",{staticStyle:{position:"absolute","transform-origin":"left bottom"},style:{top:s.info.y*t.dataimg.height-t.dataimg.height*s.info.h/2+"px",left:s.info.x*t.dataimg.width-t.dataimg.width*s.info.w/2+"px",transform:"rotate("+s.info.a*(180/Math.PI)+"deg)"}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:s.info.w*t.dataimg.width,height:s.info.h*t.dataimg.height}},[i("rect",{staticStyle:{fill:"none","stroke-width":"4px"},style:{stroke:"rgb("+s.color+")"},attrs:{width:s.info.w*t.dataimg.width,height:s.info.h*t.dataimg.height}})])]):t._e(),t._v(" "),12==s.type||15==s.type?i("span",{staticStyle:{position:"absolute","transform-origin":"left bottom"},style:{top:s.info.y*t.dataimg.height-t.dataimg.width*s.info.w/2+"px",left:s.info.x*t.dataimg.width-t.dataimg.height*s.info.h/2+"px",transform:"rotate("+s.info.a*(180/Math.PI)+"deg)"}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:s.info.w*t.dataimg.width+8,height:s.info.h*t.dataimg.height+8}},[12==s.type?i("ellipse",{staticStyle:{"stroke-width":"4"},attrs:{cx:s.info.w/2*t.dataimg.width+4,cy:s.info.h/2*t.dataimg.height+4,rx:s.info.w/2*t.dataimg.width,ry:s.info.h/2*t.dataimg.height,fill:"none",stroke:"rgb("+s.color+")"}}):t._e(),t._v(" "),15==s.type?i("ellipse",{staticStyle:{"stroke-width":"4"},attrs:{cx:s.info.w/2*t.dataimg.width+4,cy:s.info.h/2*t.dataimg.height+4,rx:s.info.w/2*t.dataimg.width,ry:s.info.h/2*t.dataimg.height,fill:"none",stroke:"rgb("+s.color+")","stroke-dasharray":"4 5"}}):t._e()])]):t._e(),t._v(" "),10==s.type?i("span",{staticStyle:{position:"absolute","transform-origin":"left bottom"},style:{top:s.info.y*t.dataimg.height+"px",left:s.info.x*t.dataimg.width+"px"}},[i("span",{staticStyle:{"line-height":".1"},style:{color:"rgb("+s.color+")"},domProps:{innerHTML:t._s(s.info.text)}})]):t._e(),t._v(" "),13==s.type?i("span",{staticStyle:{position:"absolute","transform-origin":"left bottom",top:"0",left:"0"}},[i("Arrow",{attrs:{imgwidth:t.dataimg.width,h:s.info.y2-s.info.y1,imgheight:t.dataimg.height,x1:s.info.x1,y1:s.info.y1,x2:s.info.x2,y2:s.info.y2,canvas_id:"canvas_id"+a,color:s.color,data:s}})],1):t._e()]):t._e()})],2)])]),t._v(" "),i("div",{staticClass:"p_center_right",style:{height:t.imgheight-50+"px"}},[i("div",{staticClass:"p_center_right_ul"},[i("div",{staticClass:"p_center_right_ul_top"},[t.logo?i("img",{staticStyle:{width:"90%"},attrs:{src:t.hosturl+t.logo,alt:"logo"}}):t._e(),t._v(" "),t.logo?t._e():i("img",{staticStyle:{width:"90%"},attrs:{src:"https://cdn.zeplin.io/5a3a303748258f1e7e4bea6b/assets/F1871A63-549D-4E48-9513-9F44C044C7E1.png",alt:""}})]),t._v(" "),i("div",{staticClass:"p_center_right_ul_center"},t._l(e.cate,function(e,s){return i("div",{key:s,staticClass:"p_center_right_ul_center_li size12"},[i("div",{staticClass:"p_center_right_ul_center_li_type text-center text-00b9e0 ellipsis"},[t._v(t._s(e.iconname))]),t._v(" "),i("div",{staticClass:"p_center_right_ul_center_li_name ellipsis"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"p_center_right_ul_center_li_num text-center"},[t._v(t._s(e.num))])])}),0),t._v(" "),i("div",{staticClass:"p_center_right_ul_buttom size12"},[i("div",{staticClass:"p_center_right_ul_buttom_li"},[i("div",{staticClass:"p_center_right_ul_buttom_company text-00b9e0"},[t._v("公司名")]),t._v(" "),i("div",{staticClass:"p_center_right_ul_buttom_company_text ellipsis-2 ",staticStyle:{"line-height":"1"}},[t._v(t._s(e.usercompany))])]),t._v(" "),i("div",{staticClass:"p_center_right_ul_buttom_li"},[i("div",{staticClass:"p_center_right_ul_buttom_company text-00b9e0"},[t._v("制图人")]),t._v(" "),i("div",{staticClass:"p_center_right_ul_buttom_company_text ellipsis"},[t._v(t._s(e.username))])]),t._v(" "),i("div",{staticClass:"p_center_right_ul_buttom_li"},[i("div",{staticClass:"p_center_right_ul_buttom_company text-00b9e0"},[t._v("DATE")]),t._v(" "),i("div",{staticClass:"p_center_right_ul_buttom_company_text ellipsis"},[t._v(t._s(e.createtime))])])])])])])]):t._e()])}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.imgkeynum==t.layer.length,expression:"imgkeynum==(layer.length)"}],staticClass:"label"},[i("div",{staticClass:"size20 text-center",staticStyle:{height:"80px","line-height":"80px",width:"100%"}},[t._v("项目名称-智能点位图-点位统计")]),t._v(" "),i("div",{staticStyle:{width:"auto","max-width":"1200px",height:"auto",border:"solid 1px #BFC8D4",margin:"auto",overflow:"auto"}},[i("div",{staticStyle:{"min-width":"300px","max-width":"1200px",height:"35px","background-color":"#9CA9BB",display:"flex","align-items":"center","justify-content":"flex-start"}},[i("div",{staticStyle:{width:"110px","border-right":"1px solid #E3E8EF",height:"100%",display:"flex","align-items":"center","justify-content":"center",color:"#FFF"}},[t._v("功能")]),t._v(" "),i("div",{staticStyle:{width:"110px","border-right":"1px solid #E3E8EF",height:"100%",display:"flex","align-items":"center","justify-content":"center",color:"#FFF"}},[t._v("点位")]),t._v(" "),i("div",{staticStyle:{width:"110px","border-right":"1px solid #E3E8EF",height:"100%",display:"flex","align-items":"center","justify-content":"center",color:"#FFF"}},[t._v("点位全称")]),t._v(" "),t._l(t.floorstitle,function(e,s){return i("div",{key:s,staticClass:"ellipsis text-center",staticStyle:{"line-height":"35px",width:"110px","border-right":"1px solid #E3E8EF",height:"100%",color:"#FFF"}},[t._v(t._s(e.title))])})],2),t._v(" "),t._l(t.data1,function(e,s){return i("div",{key:s,staticStyle:{background:"#F9FBFF"}},t._l(e.child,function(s,a){return i("div",{key:a,staticStyle:{"min-width":"300px","max-width":"1200px",height:"35px",display:"flex","align-items":"center","justify-content":"flex-start","border-bottom":"solid 1px #BFC8D4"}},[i("div",{staticStyle:{width:"110px","border-right":"1px solid #E3E8EF",height:"100%",display:"flex","align-items":"center","justify-content":"center"}},[t._v(t._s(e.name))]),t._v(" "),t._l(s,function(e,s){return i("div",{key:s,staticClass:"ellipsis text-center",staticStyle:{"line-height":"35px",width:"110px","border-right":"1px solid #E3E8EF",height:"100%"}},[t._v("\n            "+t._s(e)+"\n          ")])})],2)}),0)})],2)]),t._v(" "),i("div",{staticClass:"pages"},[i("div",{staticClass:"text-center pages_div text-00b9e0 cursor"},[i("i",{directives:[{name:"show",rawName:"v-show",value:0!=t.imgkeynum,expression:"imgkeynum!=0"}],staticClass:"icon iconfont iconblue_pt1",on:{click:function(e){return t.btnleft()}}})]),t._v(" "),i("div",{staticClass:"text-center pages_div text-00b9e0"},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.imgkeynum!=t.layer.length,expression:"imgkeynum!=(layer.length)"}]},[t._v("换页")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.imgkeynum==t.layer.length,expression:"imgkeynum==(layer.length)"}]},[t._v("上一页")])]),t._v(" "),i("div",{staticClass:"text-center pages_div text-00b9e0 cursor"},[i("i",{directives:[{name:"show",rawName:"v-show",value:t.imgkeynum!=t.layer.length,expression:"imgkeynum!=(layer.length)"}],staticClass:"icon iconfont iconblue_pt2",on:{click:function(e){return t.btnright()}}})])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.imgkeynum!=t.layer.length,expression:"imgkeynum!=(layer.length)"}],staticClass:"free"},[i("div",{staticClass:"free_conter cursor"},[i("div",{staticClass:"free_btn text-center text-00b9e0",on:{click:function(e){return t.sendemail(t.project_id)}}},[t._v("发送")]),t._v(" "),i("div",{staticClass:"free_btn text-center text-00b9e0",on:{click:t.back}},[t._v("关闭")])])]),t._v(" "),i("Email",{attrs:{sendtype:t.opennames,itemdata:t.sendemaildata,value:t.sendemailshow},on:{closeFn:t.closesendemail}})],2)},staticRenderFns:[]};var _t=s("VU/8")(ut,ht,!1,function(t){s("H8t6")},"data-v-35371d22",null).exports,pt={name:"offer",data:function(){return{project_id:"",userInfo:"",discountRates:[],cate:[],otherCost:"",installtotal:"",debugtotal:"",valueAddedTaxRate:"",otherCostlist:"",itemset:"",leftmenushow:!1,t_menuid:"",leftmenuid:0,soll:"",infotype:0,settingshow:!1,settingdata:"",sendemaildata:"",sendemailshow:!1,opennames:3}},components:{Setting:I,Email:f},methods:{itemsetting:function(){this.settingdata={createtime:1564366e3,customeraddress:"地址2",customername:"她",customertelephone:"15123456789",functionarray:[],id:this.project_id,platformarray:"",projectname:"项目名称",projectstate:0,x_createtime:"2019.07.29"},this.settingshow=!this.settingshow},sendemail:function(t){this.sendemaildata={createtime:1564366e3,customeraddress:"地址2",customername:"她",customertelephone:"15123456789",functionarray:[],id:this.project_id,platformarray:"",projectname:"项目名称",projectstate:0,x_createtime:"2019.07.29"},this.sendemailshow=!this.sendemailshow},canceldleitem:function(){this.dleitemid=0,this.delitemkey=-1},closesendemail:function(){this.sendemailshow=!this.sendemailshow,this.sendemaildata=""},closeset:function(){this.settingshow=!this.settingshow,this.settingdata="",this.showcreated(this.project_id,this.userInfo)},info:function(t){this.infotype==t?this.infotype=0:this.infotype=t},back:function(){this.$router.back()},discountRate:function(t,e,i,s){var a=this.itemset,n=a.cate,o=s.target.value>0?s.target.value:1;if(parseFloat(a.mindiscount)>0){if(parseFloat(o)<parseFloat(a.mindiscount))return o=a.mindiscount,this.$Message.info("该分类最低折扣率为"+a.mindiscount+"%"),!1}else if(parseInt(n[t])>0&&parseFloat(n[t])>parseFloat(o))return o=n[t],this.$Message.info("该分类最低折扣率为"+o+"%"),!1;this.cate[e].discountRate=o,this.cate[e].threeSummaryTotal1=i*o/100,this.axios.post("/index.php?m=Api&c=project&a=projectDiscount",this.Qs.stringify({userId:this.userInfo.user_id,projectId:this.project_id,typeId:t,newRate:o}))},showmenu:function(t,e,i){if(t==this.leftmenuid)return this.leftmenuid=0,!1;this.leftmenushow=0==t,this.leftmenuid=t,this.leftmenushow=!0,0==this.soll?this.soll=0==this.soll?1:2:this.soll=1==this.soll?2:1},menuall:function(){this.leftmenuid=0},showcreated:function(t,e){var i=this,s=this;q.a.all([q.a.post(s.hosturl+"/index.php?m=Api&c=project&a=getProducts",s.Qs.stringify({user_id:e.user_id,project_id:t})),q.a.get(s.hosturl+"/index.php?m=Api&c=project&a=projectPriceSystem&projectId="+t+"&userId="+e.user_id),q.a.post(s.hosturl+"/index.php?m=Api&c=goods&a=goodsCategoryInfo",s.Qs.stringify({type:!0})),q.a.post(s.hosturl+"/index.php?m=Api&c=project&a=getProjectsystem",s.Qs.stringify({user_id:e.first_leader>0?e.first_leader:e.user_id}))]).then(q.a.spread(function(t,e,s,a){i.itemset=a.data.result;for(var n=t.data.result,o=s.data.result,c=[],r=0;o.length>r;r++)844==o[r].parent_id&&c.push({id:o[r].id,name:o[r].name,cost_price:null,debugtotal:0,discountRate:null,installtotal:0,productprice:0,project:[],rate:0,ratetotal:0,threeSummaryTotal:0,threeSummaryTotal1:0,selected:!1});c.push({id:922,name:"配件",cost_price:null,debugtotal:0,discountRate:null,installtotal:0,productprice:0,project:[],rate:0,ratetotal:0,threeSummaryTotal:0,threeSummaryTotal1:0,selected:!1});var l=[],d=0,u=0,h=e.data.debugCost,_=e.data.installCost;for(r=0;r<n.length;r++)for(var p=0;p<c.length;p++)if(n[r].id==c[p].id){var v=_.eachTypeCost;if(v.length<=0)c[p].iallTypeRate=_.allTypeRate,c[p].icanDiscount=_.canDiscount,c[p].ifixedCost="",c[p].itype=1;else for(var m=0;m<v.length;m++)_.eachTypeCost[m].typeId==c[p].id&&(c[p].iallTypeRate=_.eachTypeCost[m].rate,c[p].icanDiscount=_.eachTypeCost[m].canDiscount,c[p].ifixedCost=_.eachTypeCost[m].fixedCost,c[p].itype=2);var f=h.eachTypeCost;if(f.length<=0)c[p].eallTypeRate=h.allTypeRate,c[p].ecanDiscount=h.canDiscount,c[p].efixedCost="",c[p].etype=1;else for(var g=0;g<f.length;g++)h.eachTypeCost[g].typeId==c[p].id&&(c[p].eallTypeRate=h.eachTypeCost[g].rate,c[p].ecanDiscount=h.eachTypeCost[g].canDiscount,c[p].efixedCost=h.eachTypeCost[g].fixedCost,c[p].etype=2);c[p].cost_price=n[r].cost_price,c[p].debugtotal=parseFloat(n[r].debugtotal),c[p].discountRate=n[r].discountRate?parseFloat(n[r].discountRate):100,c[p].installtotal=parseFloat(n[r].installtotal),c[p].productprice=parseFloat(n[r].productprice),c[p].project=n[r].project,c[p].rate=parseFloat(n[r].rate),c[p].ratetotal=parseFloat(n[r].ratetotal),c[p].threeSummaryTotal=parseFloat(n[r].ratetotal),c[p].selected=!0,c[p].threeSummaryTotal1=parseFloat(n[r].threeSummaryTotal),d+=parseFloat(n[r].installtotal),u+=parseFloat(n[r].debugtotal),l.push(n[r].id)}i.cate=c,i.installtotal=d,i.debugtotal=u;var y,C=0,x=e.data.otherCost;if(i.otherCostlist=x,x)for(y=0;y<x.length;y++)C+=parseFloat(x[y].cost)>0?parseFloat(x[y].cost):0;i.otherCost=C,i.installCost=e.data.installCost,i.valueAddedTaxRate=e.data.valueAddedTaxRate,i.debugCost=e.data.debugCost}))}},created:function(){var t=this.$route.query.id,e=this.storage.getSession("usreInfo");this.userInfo=e,this.project_id=t,this.showcreated(t,e)},filters:{numFilter:function(t){if("NaN"==t||"undefined"==t)return Number(0);var e=Number(t).toFixed(2);return Number(e)},fenleihuizong:function(t){return Number(t.productprice*(t.discountRate/100)+parseFloat(t.anzhuan)+parseFloat(t.tiaoshi)).toFixed(2)},summary:function(t){var e=t.itype,i=t.ifixedCost,s=t.icanDiscount,a=null==t.iallTypeRate?0:t.iallTypeRate,n=t.etype,o=t.efixedCost,c=t.ecanDiscount,r=null==t.eallTypeRate?0:t.eallTypeRate,l=parseFloat(t.productprice)*(parseFloat(t.discountRate)/100),d=0;d=i>0&&2==e?i:1==s?parseFloat(l)*(parseFloat(a)/100):parseFloat(t.productprice)*parseFloat(a)/100;var u=0;u=o>0&&2==n?o:1==c?parseFloat(l)*(parseFloat(r)/100):parseFloat(t.productprice)*parseFloat(r)/100;var h=l+parseFloat(d)+parseFloat(u);h=Number(h).toFixed(2);return Number(h)},inputnum:function(t){if(t>=100)Number(100);else if(t<=0)Number(0);else var e=Number(e);return Number(realVal)}},computed:{total:function(){for(var t=this.cate,e=0,i=0,s=0,a=0,n=1==this.valueAddedTaxRate.useDefault?this.valueAddedTaxRate.defaultRate:this.valueAddedTaxRate.customRate,o=0,c=t.length;o<c;o++)if(t[o].id,t[o].itype>0&&t[o].etype>0){var r=t[o].itype,l=t[o].ifixedCost&&parseFloat(t[o].ifixedCost)>0?parseFloat(t[o].ifixedCost):0,d=t[o].icanDiscount,u=null==t[o].iallTypeRate?0:t[o].iallTypeRate,h=t[o].etype,_=t[o].efixedCost,p=t[o].ecanDiscount,v=null==t[o].eallTypeRate?0:t[o].eallTypeRate,m=0;null!=t[o].discountRate&&(m=parseFloat(t[o].productprice)*(parseFloat(t[o].discountRate)/100)),a+=m;var f=0;f=parseFloat(l)>0&&2==r?l:1==d?parseFloat(m)*(parseFloat(u)/100):parseFloat(t[o].productprice)*parseFloat(u)/100;var g=0;g=_>0&&2==h?_:1==p?parseFloat(m)*(parseFloat(v)/100):parseFloat(t[o].productprice)*parseFloat(v)/100,t[o].anzhuan=f,t[o].tiaoshi=g,s+=parseFloat(t[o].ratetotal),e+=parseFloat(f),i+=parseFloat(g)}else t[o].anzhuan=0,t[o].tiaoshi=0;this.cate=t;var y=parseFloat(this.otherCost),C=0;C=(e+i+a+y)*(n/100);var x=parseFloat(s)+parseFloat(i)+parseFloat(e)+parseFloat(C)+parseFloat(y);return{installtotal:e.toFixed(2),debugtotal:i.toFixed(2),productprice:s.toFixed(2),valueAddedTaxRate:C.toFixed(2),huizong:x.toFixed(2),allsummary:a.toFixed(2),cate:t}}}},vt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"offerbody",style:[t.pageheight,t.pagewidth,t.pagebg]},[i("div",{staticClass:"top"},[i("div",{staticClass:"top_left text-00b9e0 cursor",on:{click:t.back}},[i("i",{staticClass:"icon iconfont iconblue_pt1"}),t._v("返回")]),t._v(" "),i("div",{staticClass:"size20 top_centre text-center"},[t._v(" 报价汇总")]),t._v(" "),i("div",{staticClass:"top_right"})]),t._v(" "),i("div",{staticClass:"bottomcenter"},[i("div",{staticClass:"b_left"},[i("div",{staticClass:"b_left_nav"},[i("div",{staticClass:"text-center b_left_nav_all cursor ",class:0==t.leftmenuid&&922!=t.t_menuid?"text-00b9e0":"",on:{click:function(e){return t.menuall()}}},[t._v("汇总\n        ")]),t._v(" "),i("div",{staticClass:"hr"}),t._v(" "),i("div",{staticClass:"b_left_nav_item_ul"},[t._l(t.cate,function(e,s){return e.selected?i("div",{key:s,staticClass:"b_left_nav_item_ul_li cursor",class:t.leftmenuid==e.id?"text-00b9e0":"",on:{click:function(i){return t.showmenu(e.id,s,e)}}},[i("div",{staticClass:"b_left_nav_item_left text-center"},[i("i",{staticClass:"icon iconfont size22 ",class:"iconx-"+e.id})]),t._v(" "),i("div",{staticClass:"b_left_nav_item_center"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"b_left_nav_item_right"})]):t._e()}),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"b_left_nav_item_ul_li cursor",class:-2==t.leftmenuid?"text-00b9e0":"",on:{click:function(e){return t.showmenu(-2,-2)}}},[t._m(1),t._v(" "),i("div",{staticClass:"b_left_nav_item_center"},[t._v("其它")]),t._v(" "),i("div",{staticClass:"b_left_nav_item_right"})])],2)])]),t._v(" "),i("div",{staticClass:"b_center"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.leftmenuid,expression:"leftmenuid==0"}],staticClass:"b_center_items "},[i("div",{staticClass:"b_center_items_title text-center size18 text-00b9e0"},[t._v("汇总")]),t._v(" "),i("div",{staticClass:"b_center_items_top"},[i("div",{staticClass:"b_center_items_top_title"},[i("div",{staticClass:"b_center_items_top_title_li text-center"},[t._v("\n              设备总计\n              "),i("img",{staticClass:"cursor",attrs:{src:"https://cdn.zeplin.io/5a3a303748258f1e7e4bea6b/assets/95BB3863-FE9C-4C4D-A732-7B4A6D58FF47.svg",alt:""},on:{click:function(e){return t.info(1)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.infotype,expression:"infotype==1"}],staticClass:"size12",staticStyle:{"z-index":"9",position:"absolute",left:"95px",top:"0",width:"160px",background:"#F9FBFF"}},[t._v("\n                设备优惠后总价格\n              ")])]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center"},[t._v("\n              总设备安装费\n              "),i("img",{staticClass:"cursor",attrs:{src:"https://cdn.zeplin.io/5a3a303748258f1e7e4bea6b/assets/95BB3863-FE9C-4C4D-A732-7B4A6D58FF47.svg",alt:""},on:{click:function(e){return t.info(2)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2==t.infotype,expression:"infotype==2"}],staticClass:"size12",staticStyle:{"z-index":"9",position:"absolute",left:"100px",top:"0",width:"160px",background:"#F9FBFF"}},[t._v("\n                各分类设备安装费总和\n              ")])]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center"},[t._v("\n              总设备调试费\n              "),i("img",{staticClass:"cursor",attrs:{src:"https://cdn.zeplin.io/5a3a303748258f1e7e4bea6b/assets/95BB3863-FE9C-4C4D-A732-7B4A6D58FF47.svg",alt:""},on:{click:function(e){return t.info(3)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:3==t.infotype,expression:"infotype==3"}],staticClass:"size12",staticStyle:{"z-index":"9",position:"absolute",left:"100px",top:"0",width:"160px",background:"#F9FBFF"}},[t._v("\n                各分类设备调试费总和\n              ")])]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center"},[t._v("\n              总其他费用\n              "),i("img",{staticClass:"cursor",attrs:{src:"https://cdn.zeplin.io/5a3a303748258f1e7e4bea6b/assets/95BB3863-FE9C-4C4D-A732-7B4A6D58FF47.svg",alt:""},on:{click:function(e){return t.info(4)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:4==t.infotype,expression:"infotype==4"}],staticClass:"size12",staticStyle:{"z-index":"9",position:"absolute",left:"100px",top:"0",width:"160px",background:"#F9FBFF"}},[t._v("\n                报价设置中其它费用总和\n              ")])]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center"},[t._v("\n              增值税率("+t._s(1==t.valueAddedTaxRate.useDefault?t.valueAddedTaxRate.defaultRate:t.valueAddedTaxRate.customRate)+"%)\n              "),i("img",{staticClass:"cursor",attrs:{src:"https://cdn.zeplin.io/5a3a303748258f1e7e4bea6b/assets/95BB3863-FE9C-4C4D-A732-7B4A6D58FF47.svg",alt:""},on:{click:function(e){return t.info(5)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:5==t.infotype,expression:"infotype==5"}],staticClass:"size12",staticStyle:{"z-index":"9",position:"absolute",left:"-70px",top:"0",width:"160px",background:"#F9FBFF"}},[t._v("\n                增值税 = (设备总计+总设备安装费+总设备调试费+总其它费用)x增值税比例\n              ")])])]),t._v(" "),i("div",{staticClass:"b_center_items_top_num",staticStyle:{"border-bottom":"2px solid #E3E8EF"}},[i("div",{staticClass:"b_center_items_top_title_li text-center"},[t._v(t._s(t._f("numFilter")(t.total.allsummary)))]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center"},[t._v(t._s(t._f("numFilter")(t.total.installtotal)))]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center"},[t._v(t._s(t._f("numFilter")(t.total.debugtotal)))]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center"},[t._v(t._s(t._f("numFilter")(t.otherCost)))]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center"},[t._v(t._s(t._f("numFilter")(t.total.valueAddedTaxRate)))])]),t._v(" "),i("div",{staticClass:"b_center_items_top_num"},[i("div",{staticClass:"b_center_items_top_title_li text-center"}),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center"}),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center"}),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{background:"#E3E8EF","font-weight":"bold",color:"#333"}},[t._v("汇总")]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{background:"#E3E8EF","font-weight":"bold",color:"#333"}},[t._v(t._s(t.total.huizong))])])]),t._v(" "),i("div",{staticClass:"b_center_items_list"},[t._m(2),t._v(" "),t._l(t.cate,function(e,s){return i("div",{key:s},[e.selected?i("div",{staticClass:"b_center_items_list_ul",staticStyle:{height:"34px"}},[i("div",{staticClass:"b_center_items_list_ul_li text-center"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center"},[t._v(t._s(t._f("numFilter")(e.productprice)))]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center"},[i("input",{staticClass:"b_center_items_list_ul_li_input",attrs:{type:"text"},domProps:{value:e.discountRate},on:{blur:function(i){return t.discountRate(e.id,s,e.threeSummaryTotal,i)}}})]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center"},[t._v(t._s(t._f("numFilter")(e.productprice*e.discountRate/100)))]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center b_center_items_list_ul_li_end"},[t._v(t._s(t._f("summary")(e)))])]):t._e()])})],2)]),t._v(" "),t._l(t.cate,function(e,s){return i("div",{key:s},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.leftmenuid==e.id,expression:"leftmenuid == vo.id"}],staticClass:"b_center_items ",staticStyle:{width:"650px"}},[i("div",[i("div",{staticClass:"b_center_items_title text-center size18 text-00b9e0"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"b_center_items_top"},[i("div",{staticClass:"b_center_items_top_title"},[i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%",position:"relative"}},[t._v("\n                  设备总计\n                  ")]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%"}},[t._v("\n                  设备优惠合计\n                  "),i("img",{staticClass:"cursor",attrs:{src:"https://cdn.zeplin.io/5a3a303748258f1e7e4bea6b/assets/95BB3863-FE9C-4C4D-A732-7B4A6D58FF47.svg",alt:""},on:{click:function(e){return t.info(1)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.infotype,expression:"infotype==1"}],staticClass:"size12",staticStyle:{"z-index":"9",position:"absolute",left:"120px",top:"0",width:"160px",background:"#F9FBFF"}},[t._v("\n                    设备优惠合计=设备合计*折扣率\n                  ")])]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%"}},[t._v("\n                  设备安装费\n                  "),i("img",{staticClass:"cursor",attrs:{src:"https://cdn.zeplin.io/5a3a303748258f1e7e4bea6b/assets/95BB3863-FE9C-4C4D-A732-7B4A6D58FF47.svg",alt:""},on:{click:function(e){return t.info(2)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2==t.infotype,expression:"infotype==2"}],staticClass:"size12",staticStyle:{"z-index":"9",position:"absolute",left:"105px",top:"0",width:"160px",background:"#F9FBFF"}},[t._v("\n                    请在报价设置中设置费率\n                  ")])]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%"}},[t._v("\n                  设备调试费\n                  "),i("img",{staticClass:"cursor",attrs:{src:"https://cdn.zeplin.io/5a3a303748258f1e7e4bea6b/assets/95BB3863-FE9C-4C4D-A732-7B4A6D58FF47.svg",alt:""},on:{click:function(e){return t.info(3)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:3==t.infotype,expression:"infotype==3"}],staticClass:"size12",staticStyle:{"z-index":"9",position:"absolute",left:"105px",top:"0",width:"160px",background:"#F9FBFF"}},[t._v("\n                    请在报价设置中设置费率\n                  ")])])]),t._v(" "),i("div",{staticClass:"b_center_items_top_num",staticStyle:{"border-bottom":"2px solid #E3E8EF"}},[i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%"}},[t._v(t._s(t._f("numFilter")(e.productprice)))]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%"}},[t._v(t._s(t._f("numFilter")(e.productprice*(e.discountRate/100))))]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%"}},[t._v(t._s(t._f("numFilter")(e.anzhuan)))]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%"}},[t._v(t._s(t._f("numFilter")(e.tiaoshi)))])]),t._v(" "),i("div",{staticClass:"b_center_items_top_num"},[i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%"}}),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%"}}),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%",background:"#E3E8EF","font-weight":"bold",color:"#333"}},[t._v("\n                  分类总计\n                  "),i("img",{staticClass:"cursor",attrs:{src:"https://cdn.zeplin.io/5a3a303748258f1e7e4bea6b/assets/95BB3863-FE9C-4C4D-A732-7B4A6D58FF47.svg",alt:""},on:{click:function(e){return t.info(4)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:4==t.infotype,expression:"infotype==4"}],staticClass:"size12",staticStyle:{"z-index":"9",position:"absolute",left:"105px",top:"0",width:"160px",background:"#F9FBFF"}},[t._v("\n                    分类总计=设备优惠合计+设备安装费+设备调试费\n                  ")])]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%",background:"#E3E8EF","font-weight":"bold",color:"#333"}},[t._v("\n                  "+t._s(t._f("fenleihuizong")(e))+"\n                  ")])])]),t._v(" "),i("div",{staticClass:"b_center_items_list"},[t._m(3,!0),t._v(" "),t._l(e.project,function(e,s){return i("div",{key:s,staticClass:"b_center_items_list_ul",staticStyle:{"flex-direction":"column","min-height":"70px","flex-flow":"wrap"}},[i("div",{staticStyle:{width:"100%",display:"flex","align-items":"center","justify-content":"center",height:"70px"}},[i("div",{staticClass:"b_center_items_list_ul_li text-center title",staticStyle:{width:"37%"}},[i("div",{staticClass:"title_img"},[i("img",{staticStyle:{width:"100%"},attrs:{src:t.hosturl+e.original_img,alt:""}})]),t._v(" "),i("div",{staticClass:"title_text"},[t._v(t._s(e.goods_name))])]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center ",staticStyle:{width:"20%"}},[i("div",{staticClass:"brand size12"},[i("div",{staticClass:"brand1",staticStyle:{overflow:"hidden","text-overflow":"ellipsis","-ms-text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(e.brand_name))]),t._v(" "),i("div",{staticClass:"brand2",staticStyle:{overflow:"hidden","text-overflow":"ellipsis","-ms-text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(e.typenum))]),t._v(" "),i("div",{staticClass:"brand2"})])]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center",staticStyle:{width:"13%"}},[t._v(t._s(t._f("numFilter")(e.shop_price)))]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center",staticStyle:{width:"10%"}},[t._v(t._s(e.number))]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center b_center_items_list_ul_li_end",staticStyle:{width:"20%"}},[t._v(t._s(t._f("numFilter")(e.devicetotal)))])]),t._v(" "),t._l(e.parts,function(e,s){return 4==t.opennames?i("div",{key:s,staticStyle:{width:"100%",display:"flex","align-items":"center","justify-content":"center",height:"70px",background:"#E3E8EF","border-radius":"5px"}},[i("div",{staticClass:"b_center_items_list_ul_li text-center title",staticStyle:{width:"37%"}},[i("div",{staticClass:"title_img"},[i("img",{staticStyle:{width:"100%"},attrs:{src:t.hosturl+e.original_img,alt:""}})]),t._v(" "),i("div",{staticClass:"title_text"},[t._v(t._s(e.goods_name))])]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center ",staticStyle:{width:"20%"}},[i("div",{staticClass:"brand size12"},[i("div",{staticClass:"brand1"},[t._v(t._s(e.brand_name))]),t._v(" "),i("div",{staticClass:"brand2"},[t._v(t._s(e.typenum))]),t._v(" "),i("div",{staticClass:"brand2"})])]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center",staticStyle:{width:"13%"}},[t._v(t._s(t._f("numFilter")(e.shop_price)))]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center",staticStyle:{width:"10%"}},[t._v(t._s(e.num))]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center b_center_items_list_ul_li_end",staticStyle:{width:"20%"}})]):t._e()})],2)})],2)])])])}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:-2==t.leftmenuid,expression:"leftmenuid == -2"}],staticClass:"b_center_items "},[i("div",{staticClass:"b_center_items_title text-center size18 text-00b9e0"},[t._v("其它费用")]),t._v(" "),i("div",{staticClass:"b_center_items_other"},[t._m(4),t._v(" "),t._l(t.otherCostlist,function(e,s){return i("div",{key:s,staticClass:"b_center_items_other_li"},[i("div",{staticClass:"text-center",staticStyle:{width:"50%"}},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"text-center",staticStyle:{width:"50%"}},[t._v(t._s(e.cost))])])}),t._v(" "),i("div",{staticClass:"b_center_items_other_title",staticStyle:{background:"none"}},[i("div",{staticClass:"text-center",staticStyle:{width:"50%"}},[t._v("其它费用合计")]),t._v(" "),i("div",{staticClass:"text-center",staticStyle:{width:"50%"}},[t._v(t._s(t._f("numFilter")(t.otherCost)))])])],2)])],2),t._v(" "),i("div",{staticClass:"b_right",staticStyle:{display:"none"}},[i("div",{staticClass:"b_right_free"},[i("div",{staticClass:"b_right_free_set text-00b9e0 text-center cursor",on:{click:function(e){return t.itemsetting("","setting")}}},[i("i",{staticClass:"icon iconfont iconsetting_blue"}),t._v("设置\n        ")]),t._v(" "),i("div",{staticClass:"b_right_free_set text-00b9e0 text-center cursor",on:{click:function(e){return t.sendemail()}}},[i("i",{staticClass:"icon iconfont iconsharept_blue"}),t._v("发送\n        ")])])]),t._v(" "),i("div",{staticClass:"b_right_w"},[i("div",{staticClass:"b_right_free"},[i("div",{staticClass:"b_right_free_set text-00b9e0 text-center cursor",on:{click:function(e){return t.itemsetting("","setting")}}},[i("i",{staticClass:"icon iconfont iconsetting_blue"}),t._v("设置\n        ")]),t._v(" "),i("div",{staticClass:"b_right_free_set text-00b9e0 text-center cursor",on:{click:function(e){return t.sendemail()}}},[i("i",{staticClass:"icon iconfont iconsharept_blue"}),t._v("发送\n        ")])])])]),t._v(" "),i("Email",{attrs:{sendtype:t.opennames,itemdata:t.sendemaildata,value:t.sendemailshow},on:{closeFn:t.closesendemail}}),t._v(" "),t.settingshow&&t.settingdata?i("Setting",{attrs:{settindata:t.settingdata},on:{closeFn:t.closeset}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"b_left_nav_item_ul_li",staticStyle:{height:"20px"}},[e("div",{staticClass:"hr"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"b_left_nav_item_left text-center"},[e("i",{staticClass:"icon iconfont  iconx_normal11 size22 "})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"b_center_items_list_title"},[i("div",{staticClass:"b_center_items_list_title_li text-center"},[t._v("首选系统")]),t._v(" "),i("div",{staticClass:"b_center_items_list_title_li text-center"},[t._v("主设备汇总")]),t._v(" "),i("div",{staticClass:"b_center_items_list_title_li text-center"},[t._v("折扣率")]),t._v(" "),i("div",{staticClass:"b_center_items_list_title_li text-center"},[t._v("设备优惠汇总")]),t._v(" "),i("div",{staticClass:"b_center_items_list_title_li text-center"},[t._v("分类汇总")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"b_center_items_list_title"},[i("div",{staticClass:"b_center_items_list_title_li text-center",staticStyle:{width:"37%"}},[t._v("设备图片/名称")]),t._v(" "),i("div",{staticClass:"b_center_items_list_title_li text-center",staticStyle:{width:"20%"}},[t._v("品牌/型号")]),t._v(" "),i("div",{staticClass:"b_center_items_list_title_li text-center",staticStyle:{width:"13%"}},[t._v("单价")]),t._v(" "),i("div",{staticClass:"b_center_items_list_title_li text-center",staticStyle:{width:"10%"}},[t._v("数量")]),t._v(" "),i("div",{staticClass:"b_center_items_list_title_li text-center",staticStyle:{width:"20%"}},[t._v("总价")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"b_center_items_other_title"},[e("div",{staticClass:"text-center",staticStyle:{width:"50%"}},[this._v("费用名")]),this._v(" "),e("div",{staticClass:"text-center",staticStyle:{width:"50%"}},[this._v("金额")])])}]};var mt=s("VU/8")(pt,vt,!1,function(t){s("EKrT")},"data-v-002e0b9c",null).exports,ft={name:"message",data:function(){return{list:"",visible:!1,detaidata:"",userInfo:""}},methods:{close:function(){this.detaidata="",this.visible=!1},details:function(t,e){var i=this;this.detaidata=t,this.visible=!0,this.axios.post("/index.php?m=Api&c=user&a=message",this.Qs.stringify({user_id:this.userInfo.user_id,id:t.id})).then(function(t){i.list[e].isread=1})}},components:{NavMenu:u},updated:function(){var t=this;this.$nextTick(function(){t.$Spin.hide()})},created:function(){var t=this;this.$Spin.show();var e=this.storage.getSession("usreInfo");this.userInfo=e,this.axios.get("/index.php?m=Api&c=user&a=message&user_id="+e.user_id).then(function(e){t.list=e.data.list})}},gt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",style:[t.pageheight,t.pagewidth,t.pagebg]},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"ivu-modal-mask"}),t._v(" "),t.detaidata?i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"goodsdetai"},[i("div",{staticClass:"goodsdetai_item"},[t._v("\n      "+t._s(t.detaidata.title)+"\n      "),i("i",{staticClass:"goodsdetai_item_close close icon iconfont iconred_pt",on:{click:function(e){return t.close()}}})]),t._v(" "),i("iframe",{staticClass:"goodsdetai_iframe",staticStyle:{border:"none"},attrs:{src:t.detaidata.contents}})]):t._e(),t._v(" "),i("NavMenu",{staticClass:"nav"}),t._v(" "),i("div",{staticClass:"center"},[i("div",{staticClass:"center_top"},[i("div",{staticClass:"center_top_left"}),t._v(" "),i("div",{staticClass:"center_top_right"},[i("div",{staticClass:"center_top_right_input "},[i("input",{staticClass:"center_top_right_input_search hide",attrs:{type:"text",placeholder:"项目名/客户名/电话"}}),t._v(" "),i("Icon",{staticClass:"center_top_right_input_search_ico hide",attrs:{type:"ios-search"}})],1),t._v(" "),i("div",{staticClass:"center_top_right_message"},[i("div",{staticClass:"center_top_right_message_btn"},[i("Icon",{staticStyle:{color:"#00B9E0","font-size":"30px"},attrs:{type:"ios-notifications-outline"}})],1)]),t._v(" "),i("div",{staticClass:"center_top_right_info"},[i("img",{staticClass:"otips",attrs:{src:t.hosturl+t.userInfo.head_pic}}),t._v(" "),t._m(0)]),t._v(" "),i("div",{staticStyle:{width:"3%"}})])]),t._v(" "),i("div",{staticClass:"center_buttom"},[i("div",{staticClass:"List"},t._l(t.list,function(e,s){return i("div",{key:s,staticClass:"List_li cursor",staticStyle:{position:"relative"},on:{click:function(i){return t.details(e,s)}}},[i("div",{staticStyle:{"margin-right":"10px"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:0==e.isread,expression:"i.isread==0"}],staticStyle:{height:"8px",width:"8px",background:"#00B9E0","border-radius":"50%"}})]),t._v(" "),i("div",{staticStyle:{width:"100%",height:"100%"}},[i("div",{staticClass:"List_li_title"},[i("div",{staticClass:"ellipsis",staticStyle:{display:"flex","align-items":"center","justify-content":"flex-start"}},[t._v("\n                "+t._s(e.title)+"\n              ")]),t._v(" "),i("div",[t._v(t._s(e.date))])]),t._v(" "),i("div",[t._v(t._s(e.description))])])])}),0)])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user_details"},[i("div",{staticClass:"u_box"},[i("div",{staticClass:"u_name"},[t._v("用户名")]),t._v(" "),i("div",{staticClass:"comen"},[t._v("经销商")]),t._v(" "),i("div",{staticClass:"comen"},[i("a",{staticClass:"comen_a"},[t._v("账号设置")])]),t._v(" "),i("div",{staticClass:"comen"},[i("a",{staticClass:"comen_a",attrs:{href:"http://www.oneapptech.cn"}},[t._v("下载壹智能APP")])]),t._v(" "),i("div",{staticClass:"comen"},[i("a",{staticClass:"comen_a",attrs:{href:"http://dealer.oneapptech.cn"}},[t._v("进入经销商后台")])]),t._v(" "),i("div",{staticClass:"comen"},[i("a",{staticClass:"comen_a",attrs:{href:"javascript:;"}},[t._v("退出登录")])])])])}]};var yt=s("VU/8")(ft,gt,!1,function(t){s("HHSW")},"data-v-15535bc4",null).exports,Ct={data:function(){return{visible:!0,installtype:0,userInfo:"",installCost:"",debugCost:"",valueAddedTaxRate:"",otherCost:[],installcate:[]}},props:["settindata"],methods:{btn:function(){},addicon:function(){this.otherCost.push({name:"",cost:""})},delother:function(t){this.otherCost.splice(t,1)}},created:function(){var t=this,e=(this.settindata,this.storage.getSession("usreInfo")),i=this.storage.getSession("itemcate"),s=[],a=[];i&&i.forEach(function(t,e){1==t.staple?s.push(t):a.push(t)}),this.installcate=s,s&&s.forEach(function(t,e){a&&a.forEach(function(e,i){t.name==e.name&&console.log(t,e)})}),this.userInfo=e;var n=this.$route.query.id;n&&this.axios.get("/index.php?m=Api&c=project&a=projectPriceSystem&userId="+e.user_id+"userId&projectId="+n).then(function(e){var i=e.data;t.otherCost=i.otherCost?i.otherCost:[];var s=i.valueAddedTaxRate;0==s.customRate?s.customRate="":s.customRate,t.valueAddedTaxRate=s,console.log(i.installCost),t.installCost=i.installCost,t.debugCost=i.debugCost})}},xt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"ivu-modal-mask"}),t._v(" "),i("div",{staticClass:"body"},[i("div",{staticClass:"top"},[t._v("报价设置")]),t._v(" "),i("div",{staticClass:"center"},[i("div",{staticClass:"center_install"},[i("div",{staticClass:"center_install_title",staticStyle:{color:"#333"}},[t._v("设备安装费")]),t._v(" "),i("div",{staticClass:"center_install_item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.installCost.canDiscount,expression:"installCost.canDiscount"}],staticStyle:{"margin-right":"10px"},attrs:{name:"inscanDiscount",value:"1",type:"radio"},domProps:{checked:t._q(t.installCost.canDiscount,"1")},on:{change:function(e){return t.$set(t.installCost,"canDiscount","1")}}}),t._v(" "),i("div",[t._v("总设备价格的")]),t._v(" "),i("input",{staticClass:"center_install_item_text",attrs:{type:"text"},domProps:{value:1==t.installCost.canDiscount?t.installCost.allTypeRate:""}}),t._v(" "),i("div",[t._v("%,且参与折扣")])]),t._v(" "),i("div",{staticClass:"center_install_item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.installCost.canDiscount,expression:"installCost.canDiscount"}],staticStyle:{"margin-right":"10px"},attrs:{name:"inscanDiscount",value:"0",type:"radio"},domProps:{checked:t._q(t.installCost.canDiscount,"0")},on:{change:function(e){return t.$set(t.installCost,"canDiscount","0")}}}),t._v(" "),i("div",[t._v("总设备价格的")]),t._v(" "),i("input",{staticClass:"center_install_item_text",attrs:{type:"text"},domProps:{value:0==t.installCost.canDiscount?t.installCost.allTypeRate:""}}),t._v(" "),i("div",[t._v("%,不参与折扣")])]),t._v(" "),i("div",{staticClass:"center_install_item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.installCost.canDiscount,expression:"installCost.canDiscount"}],staticStyle:{"margin-right":"10px"},attrs:{name:"inscanDiscount",value:"2",type:"radio"},domProps:{checked:t._q(t.installCost.canDiscount,"2")},on:{change:function(e){return t.$set(t.installCost,"canDiscount","2")}}}),t._v(" "),i("div",[t._v("按照分类单独设置")])]),t._v(" "),2==t.installCost.canDiscount?i("div",{staticClass:"center_install_item_table"},[t._m(0),t._v(" "),t._l(t.installcate,function(e,s){return i("div",{staticClass:"center_install_item_table_li"},[i("div",{staticClass:"text-center item_li_set",staticStyle:{width:"30%"}},[t._v(t._s(e.name))]),t._v(" "),t._m(1,!0),t._v(" "),t._m(2,!0),t._v(" "),t._m(3,!0)])})],2):t._e()])]),t._v(" "),i("div",{staticClass:"center"},[i("div",{staticClass:"center_install"},[i("div",{staticClass:"center_install_title",staticStyle:{color:"#333"}},[t._v("设备调试费")]),t._v(" "),i("div",{staticClass:"center_install_item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.debugCost.canDiscount,expression:"debugCost.canDiscount"}],staticStyle:{"margin-right":"10px"},attrs:{name:"canDiscount",value:"1",type:"radio"},domProps:{checked:t._q(t.debugCost.canDiscount,"1")},on:{change:function(e){return t.$set(t.debugCost,"canDiscount","1")}}}),t._v(" "),i("div",[t._v("总设备价格的")]),t._v(" "),i("input",{staticClass:"center_install_item_text",attrs:{type:"text"}}),t._v(" "),i("div",[t._v("%,且参与折扣")])]),t._v(" "),i("div",{staticClass:"center_install_item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.debugCost.canDiscount,expression:"debugCost.canDiscount"}],staticStyle:{"margin-right":"10px"},attrs:{name:"canDiscount",value:"0",type:"radio"},domProps:{checked:t._q(t.debugCost.canDiscount,"0")},on:{change:function(e){return t.$set(t.debugCost,"canDiscount","0")}}}),t._v(" "),i("div",[t._v("总设备价格的")]),t._v(" "),i("input",{staticClass:"center_install_item_text",attrs:{type:"text"}}),t._v(" "),i("div",[t._v("%,不参与折扣")])]),t._v(" "),i("div",{staticClass:"center_install_item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.debugCost.canDiscount,expression:"debugCost.canDiscount"}],staticStyle:{"margin-right":"10px"},attrs:{name:"canDiscount",value:"2",type:"radio"},domProps:{checked:t._q(t.debugCost.canDiscount,"2")},on:{change:function(e){return t.$set(t.debugCost,"canDiscount","2")}}}),t._v(" "),i("div",[t._v("按照分类单独设置")])]),t._v(" "),2==t.debugCost.canDiscount?i("div",{staticClass:"center_install_item_table"},[t._m(4),t._v(" "),t._l(12,function(e){return i("div",{staticClass:"center_install_item_table_li"},[i("div",{staticClass:"text-center item_li_set",staticStyle:{width:"30%"}},[t._v("网络覆盖")]),t._v(" "),t._m(5,!0),t._v(" "),t._m(6,!0),t._v(" "),t._m(7,!0)])})],2):t._e()])]),t._v(" "),i("div",{staticClass:"center"},[i("div",{staticClass:"center_install"},[i("div",{staticClass:"center_install_title",staticStyle:{color:"#333"}},[t._v("增值税率")]),t._v(" "),i("div",{staticClass:"center_install_item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.valueAddedTaxRate.useDefault,expression:"valueAddedTaxRate.useDefault"}],staticStyle:{"margin-right":"10px"},attrs:{value:"1",name:"valueAddedTaxRatetype",type:"radio"},domProps:{checked:t._q(t.valueAddedTaxRate.useDefault,"1")},on:{change:function(e){return t.$set(t.valueAddedTaxRate,"useDefault","1")}}}),t._v(" "),i("div",[t._v("默认 "+t._s(t.valueAddedTaxRate.defaultRate)+" %")])]),t._v(" "),i("div",{staticClass:"center_install_item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.valueAddedTaxRate.useDefault,expression:"valueAddedTaxRate.useDefault"}],staticStyle:{"margin-right":"10px"},attrs:{type:"radio",value:"0",name:"valueAddedTaxRatetype"},domProps:{checked:t._q(t.valueAddedTaxRate.useDefault,"0")},on:{change:function(e){return t.$set(t.valueAddedTaxRate,"useDefault","0")}}}),t._v(" "),i("div",[t._v("修改为")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.valueAddedTaxRate.customRate,expression:"valueAddedTaxRate.customRate"}],staticClass:"center_install_item_text",attrs:{type:"text"},domProps:{value:t.valueAddedTaxRate.customRate},on:{input:function(e){e.target.composing||t.$set(t.valueAddedTaxRate,"customRate",e.target.value)}}}),t._v(" "),i("div",[t._v("%")])])])]),t._v(" "),i("div",{staticClass:"center",staticStyle:{"border-bottom":"none"}},[i("div",{staticClass:"center_install"},[i("div",{staticClass:"center_install_title",staticStyle:{color:"#333"}},[t._v("其它费用")]),t._v(" "),t._l(t.otherCost,function(e,s){return i("div",{key:s,staticClass:"center_other_item"},[i("div",{staticClass:"center_other_item_name"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"item.name"}],staticStyle:{height:"70%",width:"60%",border:"none"},attrs:{placeholder:"费用名称"},domProps:{value:e.name},on:{input:function(i){i.target.composing||t.$set(e,"name",i.target.value)}}})]),t._v(" "),i("div",[t._v("1")]),t._v(" "),i("div",{staticClass:"center_other_money"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.cost,expression:"item.cost"}],staticStyle:{height:"70%",width:"60%",border:"none"},attrs:{placeholder:"金额"},domProps:{value:e.cost},on:{input:function(i){i.target.composing||t.$set(e,"cost",i.target.value)}}})]),t._v(" "),i("div",{staticClass:"center_other_item_del size12",on:{click:function(e){return t.delother(s)}}},[t._v("删除")])])}),t._v(" "),i("div",{staticStyle:{height:"25px",display:"flex","align-items":"center","justify-content":"flex-start"}},[i("img",{staticStyle:{height:"25px","margin-right":"10px",cursor:"pointer"},attrs:{src:"https://cdn.zeplin.io/5a3a303748258f1e7e4bea6b/assets/B5691872-3D56-4B89-B4AB-3FA2E666092E.svg",alt:""},on:{click:function(e){return t.addicon()}}}),t._v("\n          填完后记得保存哦！\n        ")])],2)]),t._v(" "),i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center","margin-bottom":"50px"}},[i("div",{staticClass:"btn",on:{click:function(e){return t.btn()}}},[t._v("确认\n      ")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"center_install_item_table_title"},[e("div",{staticClass:"text-center",staticStyle:{width:"30%",height:"100%",display:"flex","align-items":"center","justify-content":"center"}},[this._v("功能分类")]),this._v(" "),e("div",{staticClass:"text-center",staticStyle:{width:"23.3%","line-height":"1",height:"100%",display:"flex","align-items":"center","justify-content":"center"}},[this._v("设备总价百分比")]),this._v(" "),e("div",{staticClass:"text-center",staticStyle:{width:"23.3%","line-height":"1",height:"100%",display:"flex","align-items":"center","justify-content":"center"}},[this._v("参与折扣")]),this._v(" "),e("div",{staticClass:"text-center",staticStyle:{width:"23.3%","line-height":"1",height:"100%",display:"flex","align-items":"center","justify-content":"center"}},[this._v("一口价")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center item_li_set",staticStyle:{width:"23.3%"}},[e("input",{staticStyle:{height:"70%",width:"80%",border:"none"},attrs:{type:"text",placeholder:"请输入"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center item_li_set",staticStyle:{width:"23.3%"}},[e("input",{attrs:{type:"radio"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center item_li_set",staticStyle:{width:"23.3%"}},[e("input",{staticStyle:{height:"70%",width:"80%",border:"none"},attrs:{type:"text",placeholder:"请输入"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"center_install_item_table_title"},[e("div",{staticClass:"text-center",staticStyle:{width:"30%",height:"100%",display:"flex","align-items":"center","justify-content":"center"}},[this._v("功能分类")]),this._v(" "),e("div",{staticClass:"text-center",staticStyle:{width:"23.3%","line-height":"1",height:"100%",display:"flex","align-items":"center","justify-content":"center"}},[this._v("设备总价百分比")]),this._v(" "),e("div",{staticClass:"text-center",staticStyle:{width:"23.3%","line-height":"1",height:"100%",display:"flex","align-items":"center","justify-content":"center"}},[this._v("参与折扣")]),this._v(" "),e("div",{staticClass:"text-center",staticStyle:{width:"23.3%","line-height":"1",height:"100%",display:"flex","align-items":"center","justify-content":"center"}},[this._v("一口价")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center item_li_set",staticStyle:{width:"23.3%"}},[e("input",{staticStyle:{height:"70%",width:"80%",border:"none"},attrs:{type:"text",placeholder:"请输入"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center item_li_set",staticStyle:{width:"23.3%"}},[e("input",{attrs:{type:"radio"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center item_li_set",staticStyle:{width:"23.3%"}},[e("input",{staticStyle:{height:"70%",width:"80%",border:"none"},attrs:{type:"text",placeholder:"请输入"}})])}]};var wt=s("VU/8")(Ct,xt,!1,function(t){s("yK5e")},"data-v-f663936c",null).exports,bt=s("//Fk"),kt=s.n(bt),It={name:"Itemlist",data:function(){return{usreInfo:null,getSales:"",count:"0",items:null,keyword:"",itemstatus:["进行中","测试","已成交","失败"],itemstyep:["智能模式","快速模式","制图模式"],page:1,endpage:0,projectType:"",projectstatus:"",start_time:"",end_time:"",sale:[],projectTypename:"全部模式",projectstatusname:"全部状态",state:"",opennames:2,newProject:"",dleshow:!1,dleitemid:0,delitemkey:-1,additemmodal:!1,additemdata:{},settingshow:!1,settingdata:"",projectstateid:0,freemailid:0,sendemaildata:"",sendemailshow:!1,wxfreedata:"",wxfreeshow:!1,wxcodeurl:""}},components:{NavMenu:u,Info:D},methods:{screentype:function(t){this.projectType=t,""==t&&(this.projectTypename="全部模式"),"1"==t&&(this.projectTypename="快速模式"),"2"==t&&(this.projectTypename="制图模式"),"0"==t&&(this.projectTypename="智能模式")},screenstatus:function(t){this.projectstatus=t,""==t&&(this.projectstatusname="全部状态"),"1"==t&&(this.projectstatusname="测试"),"2"==t&&(this.projectstatusname="已成交"),"3"==t&&(this.projectstatusname="失败"),"0"==t&&(this.projectstatusname="进行中")},screen:function(){var t=this,e=this.start_time,i=this.end_time,s=this.keyword,a=this.projectType,n=this.projectstatus,o=this.sale.join(","),c="/index.php?m=Api&c=project&a=salesProject&user_id="+this.userInfo.user_id+"&keyword="+s+"&sale="+o+"&status="+n+"&projectType="+a+"&start_time="+e+"&end_time="+i;this.axios.get(c).then(function(e){t.count=e.data.count;var i=e.data.project;if(t.items=i,i.length<=0)return t.endpage=1,!1})},time1:function(t){this.start_time=t},time2:function(t){this.end_time=t},handleReachBottom:function(){var t=this;if(0==this.endpage)return this.$Spin.show(),new kt.a(function(e){setTimeout(function(){var i=t.start_time,s=t.end_time,a=t.keyword,n=t.projectType,o=t.projectstatus,c=t.sale.join(","),r=t.page+1,l="/index.php?m=Api&c=project&a=salesProject&user_id="+t.userInfo.user_id+"&keyword="+a+"&sale="+c+"&status="+o+"&projectType="+n+"&start_time="+i+"&end_time="+s+"&p="+r;t.page=r,t.axios.get(l).then(function(e){var i=e.data.project;if(i.length<=0)return t.endpage=1,!1;for(var s=0;s<i.length;s++)t.items.push(i[s])}),e(),t.$Spin.hide()},500)})},navigate:function(t){return!1},common_navigate:function(t,e){e&&this.$router.push({path:"/"+e,query:{id:t.id,opennames:this.opennames}})},dleitem:function(t,e){this.dleitemid=t,this.delitemkey=e,this.dleshow=!0},verifydleitem:function(){var t=this;if(this.dleitemid>0){var e={user_id:this.userInfo.user_id,projectid:this.dleitemid};this.axios.post("index.php?m=Api&c=project&a=projectdel",this.Qs.stringify(e)).then(function(e){1==e.data.status?(t.items.splice(t.delitemkey,1),t.dleitemid=0,t.delitemkey=-1,t.$Message.success(e.data.msg)):t.$Message.error(e.data.msg)})}},canceldleitem:function(){this.dleitemid=0,this.delitemkey=-1},search:function(){var t=this.keyword;this.getitemlist("",t)},itemcate:function(){var t=this,e=this.storage.getSession("itemcate");e||this.axios.post("/index.php?m=Api&c=goods&a=goodsCategoryInfo",this.Qs.stringify({type:!0})).then(function(e){e.data.result&&e.data.result.forEach(function(t){844==t.parent_id?t.staple=1:t.staple=2}),t.storage.setSession("itemcate",e.data.result)})},platform:function(){var t=this,e=this.storage.getSession("platform");e||this.axios.post("/index.php?m=Api&c=Goods&a=getPlatform",this.Qs.stringify({user_id:this.userInfo.user_id})).then(function(e){t.storage.setSession("platform",e.data.result)})}},mounted:function(){this.$Spin.hide()},updated:function(){},created:function(){var t=this;this.$Spin.show();var e=this.storage.getSession("usreInfo");if(e){this.userInfo=e;var i=this.$route.query.id;this.sale.push(i),this.axios.get("/index.php?m=Api&c=project&a=salesProject&user_id="+e.user_id+"&p="+this.page+"&sale="+i).then(function(e){t.count=e.data.count;var i=e.data.project;t.items=i})}}},St={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",style:[t.pageheight,t.pagewidth,t.pagebg]},[i("NavMenu",{staticClass:"nav"}),t._v(" "),i("div",{staticClass:"center"},[i("div",{staticClass:"center_top hide"},[i("div",{staticClass:"center_top_left"}),t._v(" "),i("div",{staticClass:"center_top_right"},[i("div",{staticClass:"center_top_right_input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"center_top_right_input_search",attrs:{type:"text",placeholder:"项目名/客户名/电话"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),t._v(" "),i("Icon",{staticClass:"center_top_right_input_search_ico",attrs:{type:"ios-search"},on:{click:t.search}})],1),t._v(" "),i("div",{staticClass:"center_top_right_message"},[i("div",{staticClass:"center_top_right_message_btn"},[i("Icon",{staticStyle:{color:"#00B9E0","font-size":"30px"},attrs:{type:"ios-notifications-outline"}})],1)]),t._v(" "),i("Info",{staticClass:"center_top_right_info"}),t._v(" "),i("div",{staticStyle:{width:"3%"}})],1)]),t._v(" "),i("div",{staticStyle:{"padding-top":"20px","margin-left":"100px"}},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-start",height:"35px"}},[i("div",{staticClass:"cursor",staticStyle:{width:"auto","margin-left":"20px"}},[t._v("\n          时间：\n          "),i("DatePicker",{staticStyle:{width:"120px"},attrs:{value:"yyyy-MM-dd",format:"yyyy-MM-dd",editable:!1,type:"date",placeholder:"开始时间"},on:{"on-change":t.time1}}),t._v("\n          到\n          "),i("DatePicker",{staticStyle:{width:"120px"},attrs:{value:"yyyy-MM-dd",format:"yyyy-MM-dd",editable:!1,type:"date",placeholder:"结束时间"},on:{"on-change":t.time2}})],1),t._v(" "),i("div",{staticStyle:{width:"auto","margin-left":"20px",height:"100%",display:"flex","align-items":"center","justify-content":"flex-start"}},[i("div",{staticClass:"text-center",staticStyle:{width:"20%"}},[t._v("项目")]),t._v(" "),i("div",{staticStyle:{width:"80%",display:"flex","align-items":"center","justify-content":"flex-start"}},[i("div",{staticStyle:{"margin-right":"20px"}},[i("Dropdown",{on:{"on-click":t.screentype}},[i("Button",[t._v("\n                  "+t._s(t.projectTypename)+"\n                  "),i("Icon",{attrs:{type:"ios-arrow-down"}})],1),t._v(" "),i("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[i("DropdownItem",{attrs:{name:""}},[t._v("全部模式")]),t._v(" "),i("DropdownItem",{attrs:{name:"1"}},[t._v("快速模式")]),t._v(" "),i("DropdownItem",{attrs:{name:"2"}},[t._v("制图模式")]),t._v(" "),i("DropdownItem",{attrs:{name:"0"}},[t._v("智能模式")])],1)],1)],1),t._v(" "),i("div",[i("Dropdown",{on:{"on-click":t.screenstatus}},[i("Button",[t._v("\n                  "+t._s(t.projectstatusname)+"\n                  "),i("Icon",{attrs:{type:"ios-arrow-down"}})],1),t._v(" "),i("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[i("DropdownItem",{attrs:{name:""}},[t._v("全部状态")]),t._v(" "),i("DropdownItem",{attrs:{name:"0"}},[t._v("进行中")]),t._v(" "),i("DropdownItem",{attrs:{name:"1"}},[t._v("测试")]),t._v(" "),i("DropdownItem",{attrs:{name:"2"}},[t._v("已成交")]),t._v(" "),i("DropdownItem",{attrs:{name:"3"}},[t._v("失败")])],1)],1)],1)])]),t._v(" "),i("div",{staticClass:"cursor",staticStyle:{width:"auto","margin-left":"40px"}},[i("Input",{staticStyle:{width:"300px"},attrs:{clearable:!0,placeholder:"项目名/客户名/电话"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)]),t._v(" "),i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-start",height:"50px","margin-left":"20px"}},[i("Button",{staticStyle:{width:"200px"},attrs:{type:"info"},on:{click:t.screen}},[t._v("筛选")])],1)]),t._v(" "),i("div",{staticClass:"center_buttom"},[i("div",{staticClass:"center_buttom_left"},[i("Scroll",{attrs:{height:t.imgheight-200,"on-reach-bottom":t.handleReachBottom}},[i("div",{staticClass:"center_buttom_left_list"},t._l(t.items,function(e,s){return i("div",{key:s,staticClass:"center_buttom_left_list_li"},[i("div",{staticClass:"item_title"},[i("div",{staticClass:"item_title_text"},[t._v("\n                  "+t._s(e.projectname)+"\n                ")]),t._v(" "),i("div",{staticClass:"item_state"},[i("div",{staticClass:"size12 text-9ca9bb"},[t._v("No."+t._s(e.id))]),t._v(" "),i("div",{staticClass:"size12 text-00b9e0  cursor projectstatetext"},[i("span",[t._v(t._s(t.itemstatus[e.projectstate]))])])])]),t._v(" "),i("div",{staticClass:"item_centenr cursor",on:{click:function(i){return t.navigate(e)}}},[i("div",{staticClass:"item_centenr_li"},[i("div",{staticClass:"item_centenr_li_name text-9ca9bb"},[t._v("客户姓名：")]),t._v(" "),i("div",{staticClass:"item_centenr_li_text"},[t._v(t._s(e.customername))])]),t._v(" "),i("div",{staticClass:"item_centenr_li"},[i("div",{staticClass:"item_centenr_li_name text-9ca9bb"},[t._v("客户电话：")]),t._v(" "),i("div",{staticClass:"item_centenr_li_text"},[t._v(t._s(e.customertelephone))])]),t._v(" "),i("div",{staticClass:"item_centenr_li"},[i("div",{staticClass:"item_centenr_li_name text-9ca9bb"},[t._v("项目模式：")]),t._v(" "),i("div",{staticClass:"item_centenr_li_text"},[t._v(t._s(t.itemstyep[e.projecttype]))])]),t._v(" "),i("div",{staticClass:"item_centenr_li"},[i("div",{staticClass:"item_centenr_li_name text-9ca9bb"},[t._v("客户地址：")]),t._v(" "),i("div",{staticClass:"item_centenr_li_text ellipsis-2"},[t._v(t._s(e.customeraddress))])])]),t._v(" "),i("div",{staticClass:"item_footer"},[i("div",{staticClass:"item_footer_left cursor"},[2!=e.projecttype?i("div",{staticClass:"icon",on:{click:function(i){return t.common_navigate(e,"moffer")}}},[i("i",{staticClass:"icon iconfont iconquote"})]):t._e(),t._v(" "),i("div",{staticClass:"icon",on:{click:function(i){return t.common_navigate(e,"preview")}}},[i("i",{staticClass:"icon iconfont iconnormal"})])]),t._v(" "),i("div",{staticClass:"item_footer_right size12 text-9ca9bb"},[t._v("创建："+t._s(e.createtime))])])])}),0),t._v(" "),i("div",{staticClass:"text-center"},[t._v(t._s(0==t.endpage?"下拉加载更多":"数据已经加载完毕"))])])],1),t._v(" "),i("div",{staticClass:"center_buttom_right"},[i("div",{staticStyle:{"margin-left":"20px","margin-top":"30px"}},[t._v("项目数量:"+t._s(t.count.projectCount)+"个")]),t._v(" "),i("div",{staticStyle:{"margin-left":"20px"}},[t._v("总金额:"+t._s(t.count.price)+"元")]),t._v(" "),i("div",{staticStyle:{"margin-left":"20px"}},[t._v("进行中项目:"+t._s(t.count.beginCount)+"个")]),t._v(" "),i("div",{staticStyle:{"margin-left":"20px"}},[t._v("测试项目:"+t._s(t.count.testCount)+"个")]),t._v(" "),i("div",{staticStyle:{"margin-left":"20px"}},[t._v("失败项目:"+t._s(t.count.errorCount)+"个")]),t._v(" "),i("div",{staticStyle:{"margin-left":"20px"}},[t._v("已完成项目:"+t._s(t.count.successCount)+"个")])])])])],1)},staticRenderFns:[]};var jt=s("VU/8")(It,St,!1,function(t){s("brUZ")},"data-v-665a154f",null).exports,Dt={name:"Salesman",data:function(){return{usreInfo:null,columns:[{title:"账号",key:"username",align:"center"},{title:"姓名",key:"nickname",align:"center"},{title:"电话",key:"mobile",align:"center"},{title:"提交项目总数",key:"projectCount",align:"center"},{title:"近7日使用次数",key:"user_app",align:"center"},{title:"操作",slot:"action",width:280,align:"left"}],data6:[],password:"",value:""}},components:{NavMenu:u},methods:{itemdei:function(t,e){this.$router.push({path:"/Salesdetails",query:{opennames:5,type:2,id:t.user_id,moblie:t.mobile}})},pass:function(t,e){var i=this,s=this;this.$Modal.confirm({render:function(t){return t("Input",{props:{value:i.password,autofocus:!0,type:"password",placeholder:"请输入密码"},on:{input:function(t){i.password=t,i.value=t}}})},onOk:function(t){if(!s.password)return s.$Message.error("密码为空"),!1;var i={user_id:s.usreInfo.user_id,sale_id:e.user_id,password:s.password};s.axios.put("/index.php?m=Api&c=user&a=getSales",s.Qs.stringify(i)).then(function(t){s.$Message.info(t.data.msg),s.password=""})},onCancel:function(){s.password=""}})},edit:function(t,e){var i=this,s=this;this.$Modal.confirm({render:function(t){return t("Input",{props:{value:i.password,autofocus:!0,type:"password",placeholder:"请输入密码"},on:{input:function(t){i.password=t,i.value=t}}})},onOk:function(t){if(!s.password)return s.$Message.error("密码为空"),!1;s.usreInfo.user_id,e.user_id,s.password},onCancel:function(){s.password=""}})},show:function(t,e){console.log(e),this.$Modal.info({title:"User Info",content:"Name："+this.data6[t].name+"<br>Age："+this.data6[t].age+"<br>Address："+this.data6[t].address})},remove:function(t,e){var i=this;this.$Modal.confirm({content:"确定要删除吗？",width:"300",onOk:function(){i.axios.delete("/index.php?m=Api&c=user&a=getSales&user_id="+i.usreInfo.user_id+"&sale_id="+e.user_id).then(function(t){i.$Message.info(t.data.msg),i.password=""}),i.data6.splice(t,1)}})},tableColumns3:function(){}},updated:function(){var t=this;this.$nextTick(function(){t.$Spin.hide()})},created:function(){var t=this;this.$Spin.show();var e=this.storage.getSession("usreInfo");e&&(this.usreInfo=e,this.axios.get("/index.php?m=Api&c=user&a=getSales&user_id="+e.user_id).then(function(i){var s=i.data.result;s&&s.forEach(function(t,i){e.user_id==t.user_id&&(t.username="主账号")}),t.data6=s}))},watch:{}},Ft={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",style:[t.pageheight,t.pagewidth,t.pagebg]},[i("NavMenu",{staticClass:"nav"}),t._v(" "),i("div",{staticClass:"center"},[i("div",{staticStyle:{width:"94%",margin:"82px auto"}},[i("Table",{staticStyle:{"border-radius":"5px"},attrs:{columns:t.columns,data:t.data6},scopedSlots:t._u([{key:"name",fn:function(e){var s=e.row;return[i("strong",[t._v(t._s(s.name)+" ")])]}},{key:"action",fn:function(e){var s=e.row,a=e.index;return[i("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.itemdei(s,a)}}},[t._v("查看")]),t._v(" "),t.usreInfo.user_id!=s.user_id?i("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.pass(a,s)}}},[t._v("密码重置")]):t._e(),t._v(" "),t.usreInfo.user_id!=s.user_id?i("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.remove(a,s)}}},[t._v("删除")]):t._e()]}}])})],1)])],1)},staticRenderFns:[]};var At=s("VU/8")(Dt,Ft,!1,function(t){s("5UY9")},"data-v-c5661ce6",null).exports,Et={name:"Itemlist",data:function(){return{usreInfo:null,getSales:"",count:"0",items:null,keyword:"",itemstatus:["进行中","测试","已成交","失败"],itemstyep:["智能模式","快速模式","制图模式"],page:1,endpage:0,projectType:"",projectstatus:"",start_time:"",end_time:"",sale:[],projectTypename:"全部模式",projectstatusname:"全部状态",state:"",opennames:2,newProject:"",dleshow:!1,dleitemid:0,delitemkey:-1,additemmodal:!1,additemdata:{},settingshow:!1,settingdata:"",projectstateid:0,freemailid:0,sendemaildata:"",sendemailshow:!1,wxfreedata:"",wxfreeshow:!1,wxcodeurl:""}},components:{NavMenu:u,Info:D},methods:{screentype:function(t){this.projectType=t,""==t&&(this.projectTypename="全部模式"),"1"==t&&(this.projectTypename="快速模式"),"2"==t&&(this.projectTypename="制图模式"),"0"==t&&(this.projectTypename="智能模式")},screenstatus:function(t){this.projectstatus=t,""==t&&(this.projectstatusname="全部状态"),"1"==t&&(this.projectstatusname="测试"),"2"==t&&(this.projectstatusname="已成交"),"3"==t&&(this.projectstatusname="失败"),"0"==t&&(this.projectstatusname="进行中")},screen:function(){var t=this,e=this.start_time,i=this.end_time,s=this.keyword,a=this.projectType,n=this.projectstatus,o=this.sale.join(","),c="/index.php?m=Api&c=project&a=salesProject&user_id="+this.userInfo.user_id+"&keyword="+s+"&sale="+o+"&status="+n+"&projectType="+a+"&start_time="+e+"&end_time="+i;this.axios.get(c).then(function(e){t.count=e.data.count;var i=e.data.project;if(t.items=i,i.length<=0)return t.endpage=1,!1})},time1:function(t){this.start_time=t},time2:function(t){this.end_time=t},handleReachBottom:function(){var t=this;if(0==this.endpage)return this.$Spin.show(),new kt.a(function(e){setTimeout(function(){var i=t.start_time,s=t.end_time,a=t.keyword,n=t.projectType,o=t.projectstatus,c=t.sale.join(","),r=t.page+1,l="/index.php?m=Api&c=project&a=salesProject&user_id="+t.userInfo.user_id+"&keyword="+a+"&sale="+c+"&status="+o+"&projectType="+n+"&start_time="+i+"&end_time="+s+"&p="+r;t.page=r,t.axios.get(l).then(function(e){var i=e.data.project;if(i.length<=0)return t.endpage=1,!1;for(var s=0;s<i.length;s++)t.items.push(i[s])}),e(),t.$Spin.hide()},500)})},navigate:function(t){2==this.opennames&&this.$router.push({path:"/drawing/bitmap",query:{id:t.id}}),3==this.opennames&&this.$router.push({path:"/cate",query:{id:t.id}}),4==this.opennames&&this.$Notice.open({title:"智能模式暂未全面开放",desc:"感谢您的关注，我们正在快马加鞭制作中。",duration:3})},common_navigate:function(t,e){e&&this.$router.push({path:"/"+e,query:{id:t.id,opennames:this.opennames}})},dleitem:function(t,e){this.dleitemid=t,this.delitemkey=e,this.dleshow=!0},verifydleitem:function(){var t=this;if(this.dleitemid>0){var e={user_id:this.userInfo.user_id,projectid:this.dleitemid};this.axios.post("index.php?m=Api&c=project&a=projectdel",this.Qs.stringify(e)).then(function(e){1==e.data.status?(t.items.splice(t.delitemkey,1),t.dleitemid=0,t.delitemkey=-1,t.$Message.success(e.data.msg)):t.$Message.error(e.data.msg)})}},canceldleitem:function(){this.dleitemid=0,this.delitemkey=-1},search:function(){var t=this.keyword;this.getitemlist("",t)},itemcate:function(){var t=this,e=this.storage.getSession("itemcate");e||this.axios.post("/index.php?m=Api&c=goods&a=goodsCategoryInfo",this.Qs.stringify({type:!0})).then(function(e){e.data.result&&e.data.result.forEach(function(t){844==t.parent_id?t.staple=1:t.staple=2}),t.storage.setSession("itemcate",e.data.result)})},platform:function(){var t=this,e=this.storage.getSession("platform");e||this.axios.post("/index.php?m=Api&c=Goods&a=getPlatform",this.Qs.stringify({user_id:this.userInfo.user_id})).then(function(e){t.storage.setSession("platform",e.data.result)})}},mounted:function(){this.$Spin.hide()},updated:function(){},created:function(){var t=this;this.$Spin.show();var e=this.storage.getSession("usreInfo");if(e){this.userInfo=e;var i=this.$route.query.id?this.$route.query.id:"";this.axios.get("/index.php?m=Api&c=user&a=getSales&user_id="+e.user_id).then(function(e){t.getSales=e.data.result}),this.axios.get("/index.php?m=Api&c=project&a=salesProject&user_id="+e.user_id+"&p="+this.page+"&sale="+i).then(function(e){t.count=e.data.count;var i=e.data.project;t.items=i})}}},zt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",style:[t.pageheight,t.pagewidth,t.pagebg]},[i("NavMenu",{staticClass:"nav"}),t._v(" "),i("div",{staticClass:"center"},[i("div",{staticClass:"center_top hide"},[i("div",{staticClass:"center_top_left"}),t._v(" "),i("div",{staticClass:"center_top_right"},[i("div",{staticClass:"center_top_right_input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"center_top_right_input_search",attrs:{type:"text",placeholder:"项目名/客户名/电话"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),t._v(" "),i("Icon",{staticClass:"center_top_right_input_search_ico",attrs:{type:"ios-search"},on:{click:t.search}})],1),t._v(" "),i("div",{staticClass:"center_top_right_message"},[i("div",{staticClass:"center_top_right_message_btn"},[i("Icon",{staticStyle:{color:"#00B9E0","font-size":"30px"},attrs:{type:"ios-notifications-outline"}})],1)]),t._v(" "),i("Info",{staticClass:"center_top_right_info"}),t._v(" "),i("div",{staticStyle:{width:"3%"}})],1)]),t._v(" "),i("div",{staticStyle:{"padding-top":"20px","margin-left":"100px"}},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-start",height:"35px"}},[i("div",{staticClass:"cursor",staticStyle:{width:"auto","margin-left":"10px"}},[t._v("\n          时间：\n          "),i("DatePicker",{staticStyle:{width:"120px"},attrs:{value:"yyyy-MM-dd",format:"yyyy-MM-dd",editable:!1,type:"date",placeholder:"开始时间"},on:{"on-change":t.time1}}),t._v("\n          到\n          "),i("DatePicker",{staticStyle:{width:"120px"},attrs:{value:"yyyy-MM-dd",format:"yyyy-MM-dd",editable:!1,type:"date",placeholder:"结束时间"},on:{"on-change":t.time2}})],1),t._v(" "),i("div",{staticStyle:{"margin-left":"20px",width:"auto",height:"100%",display:"flex","align-items":"center","justify-content":"flex-start"}},[i("div",{staticClass:"text-center",staticStyle:{width:"20%"}},[t._v("项目")]),t._v(" "),i("div",{staticStyle:{width:"80%",display:"flex","align-items":"center","justify-content":"flex-start"}},[i("div",{staticStyle:{"margin-right":"20px"}},[i("Dropdown",{on:{"on-click":t.screentype}},[i("Button",[t._v("\n                  "+t._s(t.projectTypename)+"\n                  "),i("Icon",{attrs:{type:"ios-arrow-down"}})],1),t._v(" "),i("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[i("DropdownItem",{attrs:{name:""}},[t._v("全部模式")]),t._v(" "),i("DropdownItem",{attrs:{name:"1"}},[t._v("快速模式")]),t._v(" "),i("DropdownItem",{attrs:{name:"2"}},[t._v("制图模式")]),t._v(" "),i("DropdownItem",{attrs:{name:"0"}},[t._v("智能模式")])],1)],1)],1),t._v(" "),i("div",[i("Dropdown",{on:{"on-click":t.screenstatus}},[i("Button",[t._v("\n                  "+t._s(t.projectstatusname)+"\n                  "),i("Icon",{attrs:{type:"ios-arrow-down"}})],1),t._v(" "),i("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[i("DropdownItem",{attrs:{name:""}},[t._v("全部状态")]),t._v(" "),i("DropdownItem",{attrs:{name:"0"}},[t._v("进行中")]),t._v(" "),i("DropdownItem",{attrs:{name:"1"}},[t._v("测试")]),t._v(" "),i("DropdownItem",{attrs:{name:"2"}},[t._v("已成交")]),t._v(" "),i("DropdownItem",{attrs:{name:"3"}},[t._v("失败")])],1)],1)],1)])]),t._v(" "),i("div",{staticClass:"cursor",staticStyle:{"margin-left":"40px",width:"auto"}},[i("Input",{staticStyle:{width:"300px"},attrs:{clearable:!0,placeholder:"项目名/客户名/电话"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)]),t._v(" "),i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-start",height:"35px"}},[i("div",{staticStyle:{margin:"0 6px"}},[t._v("提交人:")]),t._v(" "),i("div",[i("CheckboxGroup",{model:{value:t.sale,callback:function(e){t.sale=e},expression:"sale"}},t._l(t.getSales,function(e){return i("span",[i("Checkbox",{attrs:{label:e.user_id}},[t._v(t._s(e.nickname))])],1)}),0)],1)]),t._v(" "),i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-start",height:"50px","margin-left":"20px"}},[i("Button",{staticStyle:{width:"200px"},attrs:{type:"info"},on:{click:t.screen}},[t._v("筛选")])],1)]),t._v(" "),i("div",{staticClass:"center_buttom"},[i("div",{staticClass:"center_buttom_left"},[i("Scroll",{attrs:{height:t.imgheight-200,"on-reach-bottom":t.handleReachBottom}},[i("div",{staticClass:"center_buttom_left_list"},t._l(t.items,function(e,s){return i("div",{key:s,staticClass:"center_buttom_left_list_li"},[i("div",{staticClass:"item_title"},[i("div",{staticClass:"item_title_text"},[t._v("\n                  "+t._s(e.projectname)+"\n                ")]),t._v(" "),i("div",{staticClass:"item_state"},[i("div",{staticClass:"size12 text-9ca9bb"},[t._v("No."+t._s(e.id))]),t._v(" "),i("div",{staticClass:"size12 text-00b9e0  cursor projectstatetext"},[i("span",[t._v(t._s(t.itemstatus[e.projectstate]))])])])]),t._v(" "),i("div",{staticClass:"item_centenr cursor",on:{click:function(i){return t.navigate(e)}}},[i("div",{staticClass:"item_centenr_li"},[i("div",{staticClass:"item_centenr_li_name text-9ca9bb"},[t._v("客户姓名：")]),t._v(" "),i("div",{staticClass:"item_centenr_li_text"},[t._v(t._s(e.customername))])]),t._v(" "),i("div",{staticClass:"item_centenr_li"},[i("div",{staticClass:"item_centenr_li_name text-9ca9bb"},[t._v("客户电话：")]),t._v(" "),i("div",{staticClass:"item_centenr_li_text"},[t._v(t._s(e.customertelephone))])]),t._v(" "),i("div",{staticClass:"item_centenr_li"},[i("div",{staticClass:"item_centenr_li_name text-9ca9bb"},[t._v("项目模式：")]),t._v(" "),i("div",{staticClass:"item_centenr_li_text"},[t._v(t._s(t.itemstyep[e.projecttype]))])]),t._v(" "),i("div",{staticClass:"item_centenr_li"},[i("div",{staticClass:"item_centenr_li_name text-9ca9bb"},[t._v("客户地址：")]),t._v(" "),i("div",{staticClass:"item_centenr_li_text ellipsis-2"},[t._v(t._s(e.customeraddress))])])]),t._v(" "),i("div",{staticClass:"item_footer"},[i("div",{staticClass:"item_footer_left cursor"},[2!=e.projecttype?i("div",{staticClass:"icon",on:{click:function(i){return t.common_navigate(e,"offer")}}},[i("i",{staticClass:"icon iconfont iconquote"})]):t._e(),t._v(" "),i("div",{staticClass:"icon",on:{click:function(i){return t.common_navigate(e,"preview")}}},[i("i",{staticClass:"icon iconfont iconnormal"})])]),t._v(" "),i("div",{staticClass:"item_footer_right size12 text-9ca9bb"},[t._v("创建："+t._s(e.createtime))])])])}),0),t._v(" "),i("div",{staticClass:"text-center"},[t._v(t._s(0==t.endpage?"下拉加载更多":"数据已经加载完毕"))])])],1),t._v(" "),t.count?i("div",{staticClass:"center_buttom_right"},[i("div",{staticStyle:{"margin-left":"20px","margin-top":"30px"}},[t._v("项目数量:"+t._s(t.count.projectCount)+"个")]),t._v(" "),i("div",{staticStyle:{"margin-left":"20px"}},[t._v("总金额:"+t._s(t.count.price)+"元")]),t._v(" "),i("div",{staticStyle:{"margin-left":"20px"}},[t._v("进行中项目:"+t._s(t.count.beginCount)+"个")]),t._v(" "),i("div",{staticStyle:{"margin-left":"20px"}},[t._v("测试项目:"+t._s(t.count.testCount)+"个")]),t._v(" "),i("div",{staticStyle:{"margin-left":"20px"}},[t._v("失败项目:"+t._s(t.count.errorCount)+"个")]),t._v(" "),i("div",{staticStyle:{"margin-left":"20px"}},[t._v("已完成项目:"+t._s(t.count.successCount)+"个")])]):t._e()])])],1)},staticRenderFns:[]};var Mt=s("VU/8")(Et,zt,!1,function(t){s("4mUV")},"data-v-4a83c6c6",null).exports,Nt=(s("tOCg"),{data:function(){return{stu:0}},components:{NavMenu:u},methods:{},created:function(){var t=this.storage.getSession("usreInfo");this.stu=t.level}}),Tt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"contBox",style:{height:t.imgheight+"px"}},[i("NavMenu",{staticClass:"nav"}),t._v(" "),i("div",{staticClass:"rightSide"},[i("div",{staticClass:"imgCont"},[1==t.stu?i("img",{attrs:{src:"/Template/pc/oneapp/Static/images/user-authority-vip1.png",height:t.imgheight,preview:"0",alt:"",title:"点击放大查看"}}):t._e(),t._v(" "),2==t.stu?i("img",{attrs:{src:"/Template/pc/oneapp/Static/images/user-authority-vip2.png",height:t.imgheight,preview:"0",alt:"",title:"点击放大查看"}}):t._e(),t._v(" "),3==t.stu?i("img",{attrs:{src:"/Template/pc/oneapp/Static/images/user-authority-vip3.png",height:t.imgheight,preview:"0",alt:"",title:"点击放大查看"}}):t._e(),t._v(" "),5==t.stu?i("img",{attrs:{src:"/Template/pc/oneapp/Static/images/user-authority-vip4.png",height:t.imgheight,preview:"0",alt:"",title:"点击放大查看"}}):t._e()])])],1)},staticRenderFns:[]};var Pt=s("VU/8")(Nt,Tt,!1,function(t){s("TTH5")},"data-v-12dd8ac9",null).exports,Rt={data:function(){return{search:!1,readayCount:null,checkCont:null,sumCount:null,url:this.hosturl,id:"",projectData:null}},props:["ids","catName"],components:{},created:function(){},computed:{listData:function(){return this.$store.state.jumpData},brand:function(){return this.$store.state.jumpData.brand}},mounted:function(){var t=this;document.body.addEventListener("click",function(){t.search=!1},!1)},methods:{add:function(t){t.num++,this.changesum(t.num,t.goods_id)},reduce:function(t){t.num>0?t.num--:t.num=0,this.changesum(t.num,t.goods_id)},changesum:function(t,e){var i=this,s=this.storage.getSession("usreInfo");this.axios.post("/index.php?m=Api&c=project&a=projectProductedit",this.Qs.stringify({userId:s.user_id,projectId:this.$route.query.id,pointIds:"",productInfoJson:w()({num:t,productid:e,defaultFittings:[],customFittings:[]})})).then(function(t){1!=t.data.status&&i.$store.commit("showToast",{msg:t.data.msg,isshow:!0})})},move:function(){var t=this.$refs.moveBox,e=event.clientX-t.offsetLeft,i=event.clientY-t.offsetTop,s=document.body.offsetHeight;document.onmousemove=function(a){a.clientY-i<0?t.style.top=0:a.clientY-i>s-660?t.style.top=s-660+"px":t.style.top=a.clientY-i+"px",t.style.left=a.clientX-e+"px"},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}},closeBtn:function(){this.$emit("closeJump",!1)},showBrand:function(t){this.search=!this.search,t.stopPropagation()},canselp:function(t){t.stopPropagation()},selectBrand:function(t,e){var i=JSON.parse(w()(this.$store.state.jumpData)),s=JSON.parse(w()(this.$store.state.jumpDataCopy));if(t){this.$store.commit("restGoodsName",t.name),this.search=!1;var a=[];"全部"!=t.name&&i.goods?(s.goods.forEach(function(e){e.brand_id==t.id&&a.push(e)}),i.goods=a,this.$store.commit("checkedJumpPiont",i)):0==t.id&&this.$store.commit("checkedJumpPiont",s)}}}},Bt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"moveBox",staticClass:"list showboxJump"},[i("div",{staticClass:"showAll"},[i("div",{staticClass:"title",on:{mousedown:t.move}},[t._v(t._s(t.catName)),i("i",{staticClass:"close icon iconfont iconred_pt",on:{click:t.closeBtn}})]),t._v(" "),i("div",{staticClass:"brand"},[i("div",{staticClass:"cotent",on:{click:t.showBrand}},[i("div",{staticClass:"brandTitle"},[t._v("筛选品牌:")]),t._v(" "),i("div",{staticClass:"brandSelect"},[t._v(t._s(this.$store.state.resetGname))])]),t._v(" "),t.search&&t.brand?i("div",{staticClass:"searchBox",on:{click:t.canselp}},t._l(t.brand,function(e,s){return i("div",{staticClass:"selectItem",on:{click:function(i){return t.selectBrand(e,s)}}},[t._v(t._s(e.name))])}),0):t._e()]),t._v(" "),i("div",{staticClass:"listItem"},[t.listData&&t.listData.goods.length>0?t._l(t.listData.goods,function(e,s){return i("div",{staticClass:"item"},[i("div",{staticClass:"imgCont"},[i("img",{attrs:{src:t.url+e.original_img,alt:""}})]),t._v(" "),i("div",{staticClass:"intro"},[i("div",{staticClass:"introTitle"},[i("div",{staticClass:"goodsTitle"},[t._v(t._s(e.goods_name))]),t._v(" "),i("div",{staticClass:"modle"},[t._v(t._s(e.goods_model))]),t._v(" "),i("div",{staticClass:"modle"},[t._v(t._s(e.typenum))])]),t._v(" "),i("div",{staticClass:"price"},[t._v("￥"+t._s(e.shop_price))])]),t._v(" "),i("div",{staticClass:"count"},[i("svg",{staticClass:"icon",attrs:{t:"1574738214694",viewBox:"0 0 1706 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4671",width:"14",height:"14"},on:{click:function(i){return t.add(e)}}},[i("path",{attrs:{d:"M853.34016 0a99.498667 99.498667 0 0 0-75.093333 33.792L31.921493 830.293333A112.981333 112.981333 0 0 0 0.006827 910.165333c0 30.72 10.581333 57.514667 31.744 80.213334 20.992 22.357333 46.08 33.621333 74.922666 33.621333h1493.333334c29.013333 0 53.930667-11.264 75.093333-33.792A112.981333 112.981333 0 0 0 1706.673493 910.165333a112.981333 112.981333 0 0 0-31.744-79.872L928.433493 33.792A99.498667 99.498667 0 0 0 853.34016 0z",fill:"#1296db","p-id":"4672"}})]),t._v(" "),i("div",{staticClass:"itemCount"},[t._v(t._s(e.num))]),t._v(" "),i("svg",{staticClass:"icon",attrs:{t:"1574738262203",viewBox:"0 0 1706 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5073",width:"14",height:"14"},on:{click:function(i){return t.reduce(e)}}},[i("path",{attrs:{d:"M853.338738 1024a99.498501 99.498501 0 0 1-75.093208-33.791944L31.92144 193.70805A112.981145 112.981145 0 0 1 0.006827 113.836184C0.006827 83.116235 10.588142 56.321613 31.750774 33.622984A99.498501 99.498501 0 0 1 106.673316 0.001707h1493.330844c29.013285 0 53.930577 11.263981 75.093208 33.791943A112.981145 112.981145 0 0 1 1706.670649 113.836184c0 30.719949-10.581316 57.343904-31.743947 79.871866L928.431946 990.208056A99.498501 99.498501 0 0 1 853.338738 1024z",fill:"#1296db","p-id":"5074"}})])])])}):i("div",{staticClass:"tips"},[t._v("\n                该用户未定义配件\n            ")])],2),t._v(" "),i("div",{staticClass:"closeBtn"},[i("div",[i("span",{on:{click:t.closeBtn}},[t._v("确认")])])])])])},staticRenderFns:[]};var $t=s("VU/8")(Rt,Bt,!1,function(t){s("kg6F")},"data-v-278f18dd",null).exports,Lt={name:"app",data:function(){return{isShow:!0,search:!1,allgoods:"",readayCount:null,ObandsArray:[{id:0,name:"全部"}],bracnName:"全部",checkCont:null,sumCount:null,sumCountCopy:null,userInfo:null}},components:{},computed:{},created:function(){var t=this,e=this,i=this.storage.getSession("usreInfo");this.userInfo=i,q.a.all([q.a.post(e.hosturl+"/index.php?m=Api&c=goods&a=goodsListInfo",e.Qs.stringify({username:i.mobile,categoryid:922})),q.a.get(e.hosturl+"/index.php?m=Api&c=project&a=projectProductinfo&userId="+i.user_id+"&projectId="+e.$route.query.id),q.a.post(e.hosturl+"/index.php?m=Api&c=goods&a=goodsAndbrand",e.Qs.stringify({user_id:i.user_id}))]).then(q.a.spread(function(i,s,a){var n=i.data.result;n.forEach(function(t){t.num=0}),t.allgoods=n,t.readayCount=s.data.products,a.data.brand.forEach(function(i,s){t.allgoods.forEach(function(t,s){i.id==t.brand_id&&-1==e.ObandsArray.indexOf(i)&&e.ObandsArray.push(i)})});var o=JSON.parse(w()(t.readayCount)),c=JSON.parse(w()(t.allgoods)),r=[];o&&o.length>0&&(o.forEach(function(t,e){c.forEach(function(e,i){t.productid==e.goods_id&&(e.num=t.num)})}),r=c),t.sumCount=r,t.sumCountCopy=r}))},mounted:function(){var t=this;document.body.addEventListener("click",function(){t.search=!1},!1)},methods:{showBrand:function(t){this.search=!this.search,t.stopPropagation()},canselp:function(t){t.stopPropagation()},showList:function(){this.isShow=!1},closeBtn:function(){this.isShow=!0},selectBrand:function(t){var e=JSON.parse(w()(this.sumCountCopy));this.checkCont=t,this.bracnName=t.name,this.search=!1;var i=[];0!=t.id?(e.forEach(function(e){e.brand_id==t.id&&i.push(e)}),this.sumCount=i):this.sumCount=e},add:function(t,e,i){var s=this,a=i,n=this.userInfo,o=this.sumCount,c=0;0==a?o.forEach(function(e,i){e.goods_id==t&&(c=e.num+=1)}):o.forEach(function(e,i){e.goods_id==t&&((e.num-=1)>0?c=e.num-=1:e.num=0)}),0==c?this.$Message.error("数量不能为负！"):this.axios.post("/index.php?m=Api&c=project&a=projectFastedit",this.Qs.stringify({userId:n.user_id,projectId:this.$route.query.id,productId:t,categoryId:e,newNum:c})).then(function(t){1!=t.data.status&&s.$Message.error(t.data.msg)}).catch(function(t){s.$Message.error(t)})}}},Qt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list showbox"},[t.isShow?i("div",{staticClass:"listTitle",on:{click:t.showList}},[i("span",{staticClass:"productTtiel"},[t._v("配件列表")]),t._v(" "),i("svg",{staticClass:"icon",attrs:{t:"1566464162896",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1972",width:"12",height:"12"}},[i("path",{attrs:{d:"M943.7 332.8l-371 455.7c-30.8 37.8-88.6 37.8-119.4 0l-371-455.7c-41-50.3-5.2-125.6 59.7-125.6h742c64.9 0 100.6 75.3 59.7 125.6z","p-id":"1973",fill:"#fff"}})])]):t._e(),t._v(" "),t.isShow?t._e():i("div",{staticClass:"showAll"},[i("div",{staticClass:"title"},[t._v("配件 "),i("i",{staticClass:"close icon iconfont iconred_pt",on:{click:t.closeBtn}})]),t._v(" "),i("div",{staticClass:"brand"},[i("div",{staticClass:"cotent",on:{click:t.showBrand}},[i("div",{staticClass:"brandTitle"},[t._v("筛选品牌:")]),t._v(" "),i("div",{staticClass:"brandSelect"},[t._v(t._s(t.bracnName))])]),t._v(" "),t.search?i("div",{staticClass:"searchBox",on:{click:t.canselp}},t._l(t.ObandsArray,function(e){return i("div",{staticClass:"selectItem",on:{click:function(i){return t.selectBrand(e)}}},[t._v(t._s(e.name))])}),0):t._e()]),t._v(" "),i("div",{staticClass:"listItem"},t._l(t.sumCount,function(e,s){return"undefined"!=t.sumCount.length?i("div",{staticClass:"item"},[i("div",{staticClass:"imgCont"},[i("img",{attrs:{src:e.original_img,alt:""}})]),t._v(" "),i("div",{staticClass:"intro"},[i("div",{staticClass:"introTitle"},[i("div",{staticClass:"goodsTitle"},[t._v(t._s(e.goods_name))]),t._v(" "),i("div",{staticClass:"modle"},[t._v(t._s(e.goods_model))])]),t._v(" "),i("div",{staticClass:"price"},[t._v(t._s(e.shop_price))])]),t._v(" "),i("div",{staticClass:"count"},[i("div",{staticClass:"add use",on:{click:function(i){return t.add(e.goods_id,e.cat_id,0)}}}),t._v(" "),i("div",{staticClass:"sum"},[t._v(t._s(e.num))]),t._v(" "),i("div",{staticClass:"reduce use",on:{click:function(i){return t.add(e.goods_id,e.cat_id,1)}}})])]):i("div",{staticClass:"tips"},[t._v("\n                该用户未定义配件\n            ")])}),0),t._v(" "),i("div",{staticClass:"closeBtn",on:{click:t.closeBtn}},[i("span",[t._v("关闭")])])])])},staticRenderFns:[]};var qt=s("VU/8")(Lt,Qt,!1,function(t){s("13sx")},"data-v-562bdffa",null).exports,Ht={data:function(){return{search:!1,allgoods:"",readayCount:null,ObandsArray:[{id:0,name:"全部"}],bracnName:"全部",checkCont:null,sumCount:null,isSelect:null,url:this.hosturl,useAll:!1,id:"",allids:"",projectId:this.$route.query.id,userInfo:this.storage.getSession("usreInfo"),selectStatic:!1,checkedImg:""}},created:function(){this.useAll=!1},props:["ids"],computed:{alltypeList:function(){var t=this,e=this.$store.state.clickPointGoods;return this.isSelect=null,e&&e.goods.forEach(function(e,i){e.select&&(t.isSelect=i,t.selectStatic=!0,t.id=e.goods_id)}),e},floorData:function(){return this.$store.state.nowLayer},brand:function(){var t=this.$store.state.clickPointGoods;return t.brand&&t.brand.length>0?this.ObandsArray.concat(t.brand):this.ObandsArray},defaultFittings:function(){return this.$store.state.defaultData},customFittings:function(){return this.$store.state.chooseData}},mounted:function(){var t=this;document.body.addEventListener("click",function(){t.search=!1},!1)},methods:{subConfirm:function(){var t=this;this.$emit("canselPoint"),this.alltypeList.goods&&this.alltypeList.goods.length>0&&this.axios.post("/index.php?m=Api&c=project&a=projectProductedit",this.Qs.stringify({userId:this.userInfo.user_id,projectId:this.projectId,pointIds:this.allids?this.allids:this.ids,productInfoJson:w()({productid:this.id,num:this.selectStatic?1:0,defaultFittings:this.defaultFittings,customFittings:this.customFittings})})).then(function(e){var i=t.$store.state.pointId,s=t.$store.state.nowLayer;t.$emit("changeData"),s.icon.forEach(function(e){e.iconid==i&&(e.image3=t.checkedImg)}),t.$store.state.showUncheckedBtn&&t.isShowCheckPion(),t.$Message.success(e.data.msg),t.$emit("showproduct")}).catch(function(e){console.log(e),t.$Message.error("出错了请联系管理员！")})},isShowCheckPion:function(){var t=this.$store.state.nowLayer,e=[];this.axios.get("/index.php?m=Api&c=project&a=projectProductinfo&&userId="+this.userInfo.user_id+"&&projectId="+this.$route.query.id).then(function(i){var s=[];i.data.products.forEach(function(t,e){""!=t.pointid&&s.push(t)}),s.forEach(function(i,s){t.icon.forEach(function(t,s){i.pointid==t.iconid&&e.push(t.iconid)})}),t.icon.forEach(function(t,i){t.portid&&e.push(t.iconid)}),e.forEach(function(e){t.icon.forEach(function(i,s){i.iconid==e&&t.icon.splice(s,1)})})})},getAllIcon:function(){return this.floorData.icon},checkAll:function(){var t=this.ids;this.useAll=!this.useAll;var e=this.getAllIcon(),i="",s=[],a="";this.useAll?(e.forEach(function(e){e.iconid==t&&(a=e.onegoodscategoryid)}),e.forEach(function(t){t.onegoodscategoryid==a&&s.push(t.iconid)}),i=s.toString()):i=t,this.allids=i},selectSircle:function(t,e){this.$store.commit("partChecked",null),this.$store.commit("choosePartChecked",null),this.isSelect==t?(this.isSelect=null,this.selectStatic=!1,this.checkedImg="/Public/images/ngoods.png"):(this.checkedImg=e.original_img,this.isSelect=t,this.addGoods=!0,this.selectStatic=!0),e.goods_ids1.length>0&&this.selectStatic&&this.$emit("showSelectG",e),this.id=e.goods_id,this.useAll=!1},closeBtn:function(){this.$emit("showproduct")},showBrand:function(t){this.search=!this.search,t.stopPropagation()},canselp:function(t){t.stopPropagation()},selectBrand:function(t){this.bracnName=t.name,this.search=!1;var e=JSON.parse(w()(this.$store.state.clickPointGoodsOringin)),i=JSON.parse(w()(this.$store.state.clickPointGoods)),s=[];"全部"!=t.name?(e.goods.forEach(function(e){e.name==t.name&&s.push(e)}),i.goods=s,this.$store.commit("checkData",i)):this.$store.commit("checkData",e)}}},Ot={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list showbox"},[i("div",{staticClass:"showAll",style:"height:"+(t.imgheight-120)+"px"},[i("div",{staticClass:"title"},[t._v(t._s(t.alltypeList.typeName)),i("i",{staticClass:"close icon iconfont iconred_pt",on:{click:t.closeBtn}})]),t._v(" "),i("div",{staticClass:"brand"},[i("div",{staticClass:"cotent",on:{click:t.showBrand}},[i("div",{staticClass:"brandTitle"},[t._v("筛选品牌:")]),t._v(" "),i("div",{staticClass:"brandSelect"},[t._v(t._s(t.bracnName))])]),t._v(" "),t.search?i("div",{staticClass:"searchBox",on:{click:t.canselp}},t._l(t.brand,function(e){return i("div",{staticClass:"selectItem",on:{click:function(i){return t.selectBrand(e)}}},[t._v(t._s(e.name))])}),0):t._e()]),t._v(" "),null!=t.alltypeList.goods?i("div",{staticClass:"listItem",style:"height:"+(t.imgheight-200)+"px"},[t._l(t.alltypeList.goods,function(e,s){return null!=t.alltypeList?i("div",{staticClass:"item"},[i("div",{staticClass:"imgCont"},[e.original_img?i("img",{attrs:{src:t.url+e.original_img,alt:""}}):i("img",{attrs:{src:"/Template/pc/oneapp/Static/images/disImg.png",alt:""}})]),t._v(" "),i("div",{staticClass:"intro"},[i("div",{staticClass:"introTitle"},[i("div",{staticClass:"goodsTitle"},[t._v(t._s(e.goods_name))]),t._v(" "),i("div",{staticClass:"modle"},[t._v(t._s(e.goods_model))]),t._v(" "),i("div",{staticClass:"modle"},[t._v(t._s(e.typenum))])]),t._v(" "),i("div",{staticClass:"price"},[t._v(t._s(e.shop_price))])]),t._v(" "),i("div",{staticClass:"count"},[i("div",{staticClass:"selectIcon",class:{active:t.isSelect==s},attrs:{"data-id":""},on:{click:function(i){return t.selectSircle(s,e)}}})])]):t._e()}),t._v(" "),t.alltypeList.goods&&0==t.alltypeList.goods.length?i("div",{staticClass:"tips"},[t._v("\n                该分类没有产品可在经销商后台进行添加\n            ")]):t._e()],2):t._e(),t._v(" "),i("div",{staticClass:"closeBtn"},[t.alltypeList.goods&&0!=t.alltypeList.goods.length?i("div",{staticClass:"select",on:{click:t.checkAll}},[i("i",{staticClass:"sircle",class:{active:t.useAll}}),t._v(" 将以上选项应用于全部")]):t._e(),t._v(" "),i("div",[i("span",{on:{click:t.subConfirm}},[t._v("确认")])])])])])},staticRenderFns:[]};var Yt=s("VU/8")(Ht,Ot,!1,function(t){s("tsJl")},"data-v-0015a442",null).exports,Vt={data:function(){return{fData:"",isInformation:!1,url:this.hosturl,layerAll:{},projectName:""}},created:function(){var t=this;this.$Spin.show();var e=this,i=this.storage.getSession("usreInfo"),s=this.$route.query.opennames,a=this.$route.query.id,n=0;4==s&&(n=0),q.a.all([q.a.post(e.hosturl+"/index.php?m=Api&c=project&a=getIconsProjectPC",e.Qs.stringify({userId:i.user_id,projectId:a})),q.a.post(e.hosturl+"/index.php?m=Api&c=project&a=getPointCount",e.Qs.stringify({userId:i.user_id,projectId:a})),q.a.post(e.hosturl+"/index.php?m=Api&c=project&a=projectInfo",e.Qs.stringify({user_id:i.user_id,projectType:n}))]).then(q.a.spread(function(e,i,s){var n=s.data.result;n&&n.forEach(function(e){e.id==a&&(t.projectName=e.projectname)}),t.layerAll=e.data;var o=i.data.default,c="",r="";o?(o.forEach(function(t,e){907==t.id&&(c=t.child,o.splice(e,1))}),o.forEach(function(t,e){855==t.id&&c&&(r=t.child.concat(c),t.child=r)}),t.fData=o,t.$Spin.hide()):t.isInformation=!0}))},methods:{backDetail:function(){this.$router.go(-1)}}},Ut={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"table"},[i("div",{staticClass:"title"},[t._v(" "+t._s(t.projectName)+"- 智能点位图 - 点位统计")]),t._v(" "),t.fData?i("div",{staticClass:"fTable"},[i("div",{staticClass:"tead",style:{width:110*(t.layerAll.layer.length+4)+"px"}},[i("div",{staticClass:"titem"},[t._v("功能")]),t._v(" "),i("div",{staticClass:"titem"},[t._v("全称点位")]),t._v(" "),i("div",{staticClass:"titem"},[t._v("点位")]),t._v(" "),t._l(t.layerAll.layer,function(e){return i("div",{staticClass:"titem"},[t._v(t._s(e.layername))])}),t._v(" "),i("div",{staticClass:"titem"},[t._v("全宅")])],2),t._v(" "),t._l(t.fData,function(e,s){return i("div",{staticClass:"otbody"},[(e.name,i("div",{staticClass:"titem",style:{height:29*e.child.length+"px","line-height":29*e.child.length+"px"}},[t._v(t._s(e.name))])),t._v(" "),(e.name,i("div",{staticClass:"fl"},t._l(e.child,function(e){return i("div",{staticClass:"content_box"},t._l(e,function(e){return i("div",{staticClass:"detail_cont"},[t._v(t._s(e))])}),0)}),0))])})],2):t._e(),t._v(" "),t.isInformation?i("div",{staticClass:"count_tips"},[i("div",{staticClass:"mainContbox"},[i("svg",{staticClass:"icon",attrs:{t:"1564371562868",viewBox:"0 0 1536 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4050",width:"150",height:"150"}},[i("path",{attrs:{d:"M396.878102 841.762712h670.225356a10.24 10.24 0 0 1 0 20.497356H396.878102a10.24 10.24 0 0 1 0-20.497356z m-219.77817 61.48339h302.895729a10.24 10.24 0 1 1 0 20.497356H177.099932a10.24 10.24 0 0 1 0-20.497356z m413.383593 0h754.158644a10.24 10.24 0 1 1 0 20.497356H590.483525a10.24 10.24 0 0 1 0-20.497356z m-510.811118 0h44.50061a10.24 10.24 0 1 1 0 20.497356H79.663729a10.24 10.24 0 0 1 0-20.497356zM1103.299254 841.762712h30.225356a10.24 10.24 0 0 1 0 20.497356h-30.225356a10.24 10.24 0 0 1 0-20.497356z m303.494509 61.48339h54.367457a10.24 10.24 0 1 1 0 20.497356h-54.367457a10.24 10.24 0 1 1 0-20.497356z m-334.89139 98.373423h110.644068a10.24 10.24 0 1 1 0 20.497356h-110.644068a10.24 10.24 0 1 1 0-20.497356z m-47.095322 0h15.967457a10.24 10.24 0 1 1 0 20.497356h-15.967457a10.24 10.24 0 1 1 0-20.497356z m-402.917966 0h174.808949a10.24 10.24 0 1 1 0 20.497356H621.880407a10.24 10.24 0 0 1 0-20.497356z m262.491118 0h110.652746a10.24 10.24 0 1 1 0 20.497356h-110.644068a10.24 10.24 0 1 1 0-20.497356zM328.851525 841.762712h30.225356a10.24 10.24 0 1 1 0 20.497356h-30.225356a10.24 10.24 0 0 1 0-20.497356z m198.838238 61.48339h23.985898a10.24 10.24 0 1 1 0 20.497356h-23.985898a10.24 10.24 0 0 1 0-20.497356z m36.386712-332.018983V388.495186c0-26.346305 16.600949-46.973831 41.688949-50.748745a118.836068 118.836068 0 0 1 25.304949-0.295051c7.966373 0.581424 13.797966 8.643254 13.407458 17.095593-0.312407 8.591186-6.907661 15.507525-15.177763 15.91539-5.336949 0.173559-10.673898 0-16.010848 0.034712-10.292068 0.138847-17.052203 7.159322-17.052203 17.96339v365.507254c0 10.977627 6.794847 18.032814 17.329898 18.032813h319.583458c10.847458 0 17.468746-6.985763 17.503458-18.614237V652.826034l0.034711-262.855593a20.662237 20.662237 0 0 0-3.358373-12.782644 15.655051 15.655051 0 0 0-12.687186-6.621289c-5.302237-0.104136-10.673898 0-16.010847-0.034711-8.912271 0.138847-16.262508-7.228746-16.42739-16.488136-0.069424-4.451797 1.596746-8.738712 4.616678-11.906169s7.141966-4.929085 11.428881-4.903051c9.216 0.112814 18.640271-0.355797 27.509153 1.553356 21.217627 4.529898 36.256542 24.333017 37.020203 46.756881l0.034712 3.818305v363.780339c0 21.911864-9.458983 38.044203-28.489763 47.754847a43.650169 43.650169 0 0 1-20.063457 4.503865H612.699119a47.277559 47.277559 0 0 1-34.590373-14.726509A51.052475 51.052475 0 0 1 564.067797 754.688z m209.468745-167.293831h-62.793762c-20.384542 0-33.861424-14.075661-33.930848-35.19783 0-10.187932-0.034712-20.341153 0.034712-30.563797 0.104136-20.193627 13.754576-34.442847 33.201898-34.442847h126.880543c19.239051 0 33.063051 14.405424 33.097762 34.304 0.034712 10.725966 0.069424 21.486644 0 32.247322a33.696542 33.696542 0 0 1-9.094508 23.690847 31.205966 31.205966 0 0 1-22.649492 9.892881c-21.556068 0.251661-43.146847 0.034712-64.737627 0.069424z m64.190916-66.551322H709.258847v32.976271h128.442577v-32.976271z m-99.197831 132.686102a106.817085 106.817085 0 0 1 87.343729 0 59.010169 59.010169 0 0 1 25.964474 44.856407c4.130712 14.752542 2.950508 40.126915-28.914983 79.663728a62.559458 62.559458 0 0 0-13.572339 37.775187 29.505085 29.505085 0 0 1-27.153355 31.865491 29.505085 29.505085 0 0 1-29.505085-27.144678 118.029017 118.029017 0 0 1 26.554576-79.082305 86.163525 86.163525 0 0 0 17.121627-28.324881 30.095186 30.095186 0 0 1 0-4.720814c-5.319593-7.08122-23.604068-4.720814-35.406102 0-9.806102 4.000542-32.490305 6.482441-40.864542 0a29.643932 29.643932 0 0 1-11.211932-27.448406c1.431864-10.491661 19.837831-23.430508 29.643932-27.439729z m43.667526 204.782644a27.144678 27.144678 0 0 1 29.505084 23.013966v12.982237a30.095186 30.095186 0 0 1-59.010169 0v-12.392135a27.144678 27.144678 0 0 1 29.505085-23.604068zM116.831458 277.061424a56.085695 56.085695 0 1 1 0-112.180068 56.085695 56.085695 0 0 1 0 112.180068z m0.199593-25.64339a30.25139 30.25139 0 1 0 0-60.50278 30.25139 30.25139 0 0 0 0 60.50278z m534.649491-205.928136a5.293559 5.293559 0 1 1 0 10.595797h-40.196339v40.196339a5.293559 5.293559 0 0 1-10.595796 0V56.085695H560.68339a5.293559 5.293559 0 0 1 0-10.587119h40.205017V5.293559a5.293559 5.293559 0 0 1 10.587118 0v40.205017z m-563.659932 456.374238a3.826983 3.826983 0 0 1-0.017356 7.653966l-37.948746 0.017356v38.148339a3.826983 3.826983 0 1 1-7.653966 0v-38.183051L3.818305 509.48339a3.818305 3.818305 0 0 1 0.017356-7.653966l38.573559 0.017356v-38.087594a3.826983 3.826983 0 0 1 7.662644 0v38.113628z m1403.444068-193.084746a1.752949 1.752949 0 1 1-2.481898 2.481898l-17.381966-17.381966-17.390645 17.381966a1.752949 1.752949 0 0 1-2.481898-2.481898l17.381966-17.381966-17.381966-17.390644a1.752949 1.752949 0 0 1 2.481898-2.481899l17.390645 17.381966 17.381966-17.381966a1.752949 1.752949 0 1 1 2.481898 2.481899l-17.381966 17.390644z m-366.921763 90.858305c-4.469153-4.460475-8.920949-8.938305-13.407457-13.381424-0.494644-0.485966-0.459932-0.746305 0.017356-1.197559 1.093424-1.041356 2.126102-2.13478 3.210847-3.228204l0.55539 0.520678 13.546305 13.52895c0.451254 0.451254 0.407864 0.694237-0.017356 1.102101-1.076068 1.041356-2.117424 2.13478-3.228203 3.280271-0.295051-0.269017-0.494644-0.433898-0.676882-0.624813z m33.74861 25.782237l14.04095 14.066983c0.034712 0.034712 0.052068 0.078102 0.147525 0.251661-1.180203 1.162847-2.351729 2.343051-3.557966 3.471187-0.095458 0.08678-0.520678-0.034712-0.676881-0.190916-1.978576-1.935186-3.931119-3.905085-5.892339-5.857627l-7.653967-7.662644-0.529355-0.55539c0.095458-0.138847 0.164881-0.277695 0.260339-0.38183 1.041356-1.041356 2.074034-2.065356 3.098033-3.106712 0.260339-0.260339 0.459932-0.347119 0.763661-0.034712z m-1.067389-25.964474c-0.902508-0.971932-1.865763-1.900475-2.811661-2.829017-0.260339-0.260339-0.355797-0.459932-0.052068-0.763661l13.841356-13.824c0.060746-0.060746 0.138847-0.095458 0.303729-0.208272 1.171525 1.180203 2.317017 2.317017 3.436474 3.479865 0.08678 0.08678 0.052068 0.347119 0.008678 0.494644-0.034712 0.112814-0.173559 0.199593-0.260339 0.286373-4.460475 4.460475-8.920949 8.903593-13.364068 13.372746-0.433898 0.442576-0.685559 0.433898-1.102101-0.008678z m-31.674577 26.103322c0.911186 0.971932 1.865763 1.891797 2.820339 2.820339 0.260339 0.260339 0.347119 0.459932 0.04339 0.772339l-13.832678 13.815322c-0.060746 0.060746-0.147525 0.104136-0.303729 0.216949-1.180203-1.180203-2.325695-2.317017-3.445152-3.479865-0.08678-0.08678-0.052068-0.347119 0-0.503322 0.026034-0.112814 0.173559-0.190915 0.260339-0.286373 4.451797-4.451797 8.912271-8.894915 13.35539-13.364067 0.433898-0.442576 0.694237-0.433898 1.102101 0z m16.600949-43.207594c0 2.794305-0.017356 5.58861 0.008678 8.382916 0.008678 0.607458-0.173559 0.798373-0.781017 0.781017a78.032271 78.032271 0 0 0-3.931118-0.008678c-0.433898 0-0.633492-0.095458-0.633492-0.581424V373.76c0-0.46861 0.147525-0.624814 0.607458-0.607458 1.362441 0.017356 2.716203 0.026034 4.061288 0 0.546712-0.026034 0.676881 0.173559 0.676881 0.676882-0.017356 2.837695-0.008678 5.67539-0.008678 8.513084z m-21.694915 26.259526a75.021017 75.021017 0 0 0 0 3.991864c0 0.459932-0.156203 0.607458-0.607457 0.607458-5.727458-0.017356-11.446237-0.017356-17.156339 0-0.494644 0-0.590102-0.208271-0.590102-0.64217 0.026034-1.353763 0.026034-2.707525 0-4.05261-0.008678-0.503322 0.156203-0.650847 0.650847-0.650847 2.829017 0.017356 5.666712 0.008678 8.504407 0.008678 2.811661 0 5.632 0.017356 8.443661-0.008678 0.572746 0 0.781017 0.138847 0.754983 0.746305z m60.745763-0.034712c-0.034712 1.345085-0.026034 2.698847 0 4.05261 0 0.433898-0.147525 0.572746-0.581424 0.572746h-17.147661c-0.520678 0-0.633492-0.199593-0.624813-0.668203 0.026034-1.327729 0.034712-2.664136 0-3.991865-0.017356-0.529356 0.164881-0.676881 0.685559-0.676881 2.829017 0.017356 5.666712 0.008678 8.504407 0.008678 2.820339 0 5.632 0.017356 8.443661-0.008678 0.538034 0 0.737627 0.138847 0.720271 0.711593z m-39.050848 34.451525c0 2.837695-0.017356 5.67539 0 8.504407 0.008678 0.55539-0.147525 0.737627-0.702915 0.720271a93.131932 93.131932 0 0 0-4.061288 0c-0.433898 0-0.572746-0.147525-0.572746-0.581423v-17.156339c0-0.451254 0.138847-0.624814 0.607458-0.607458 1.353763 0.017356 2.707525 0.026034 4.05261 0 0.538034-0.026034 0.694237 0.156203 0.685559 0.676881-0.026034 2.811661-0.008678 5.632-0.008678 8.443661z m357.861967 101.141695a33.436203 33.436203 0 1 1 0-66.881084 33.436203 33.436203 0 0 1 0 66.881084z m-0.026034-10.205288a23.656136 23.656136 0 1 0 0-47.312271 23.656136 23.656136 0 0 0 0 47.312271z m-416.993627-381.26644a24.280949 24.280949 0 1 1 0-48.561899 24.280949 24.280949 0 0 1 0 48.561899z m-0.260339-11.177221a13.364068 13.364068 0 1 0 0-26.710779 13.364068 13.364068 0 0 0 0 26.710779z",fill:"#666","p-id":"4051"}})]),t._v(" "),i("div",{staticClass:"tipsContent"},[t._v("没有统计信息")])])]):t._e(),t._v(" "),i("div",{staticClass:"pre",on:{click:t.backDetail}})])},staticRenderFns:[]};var Wt=s("VU/8")(Vt,Ut,!1,function(t){s("ac0U")},null,null).exports,Jt={data:function(){return{w:"",h:"",ourl:this.hosturl,showtable:!1,oindex:0,pointState:null,hidePoinState:!0,showPointST:!0,active:"",isLoad:!1}},props:["layerAll","layer"],components:{tableCell:Wt},computed:{goodstype:function(){var t=0;switch(this.layerAll.icontype){case 0:t="image";break;case 1:t="image1";break;case 2:t="image2"}return t},iconSize:function(){var t=20;switch(this.layerAll.pointIconSize){case 1:t=20;break;case 2:t=25;break;case 3:t=30}return t}},methods:{backDetail:function(){this.$emit("backPage",!1)},imgloadk:function(t){var e=this,i=new Image;i.src=this.$refs.imgk.getAttribute("src"),i.onload=function(){var t=i.width,s=i.height;if(t>s)if(t>998){var a=998/t;if(s*a>798){var n=798/s;e.h=798,e.w=t*n}else e.w=998,e.h=s*a}else e.w=t,e.h=s;else if(t==s)if(t>998){var o=998/t;if(s*o>798){n=798/s;e.h=698,e.w=t*n}else e.w=998,e.h=o*s}else e.w=t,e.h=s;else if(s>698){var c=698/s;e.w=t*c,e.h=698}else e.w=t,e.h=s;e.isLoad=!0}},next_tabel:function(){this.$refs.read_cont;this.showtable=!0},pre_btn:function(){this.showtable=!1},deleteFn:function(){var t=this.active,e=this.$store.state.floorData;e.marks.marks.forEach(function(i,s){i.pc_id==t&&e.marks.marks.splice(s,1)}),this.$store.commit("setfloor",e)},HEgetTime:function(){return(new Date).getTime()}}},Xt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"r_cont"},[t.showtable?t._e():i("div",{ref:"r_cont",staticClass:"view_a"},[t.showPointST?i("div",{staticClass:"view_title textcontentBar"},[i("div",{staticClass:"textBar"},[t._v("智能点位图["+t._s(t.layer?t.layer.layername:"")+"]")])]):t._e(),t._v(" "),i("div",{ref:"read_cont",staticClass:"read_cont"},[i("div",{staticClass:"img_box"},[t.layer?i("div",{ref:"congt",staticClass:"congt"},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.isLoad,expression:"isLoad"}],ref:"imgk",staticClass:"read_img",attrs:{src:t.ourl+t.layer.image,alt:"",width:t.w,height:t.h},on:{load:t.imgloadk}}),t._v(" "),"image"==t.goodstype?i("div",{staticClass:"jcontent"},t._l(t.layer.icon,function(e,s){return i("img",{staticClass:"iconPOsition",style:{top:e.posy*t.h-t.iconSize/2+"px",left:e.posx*t.w-t.iconSize/2+"px"},attrs:{src:t.ourl+e.image,width:t.iconSize,typeid:e.onegoodscategoryid,iconid:e.iconid,pointid:e.pointid,height:t.iconSize,iconname:e.iconname,"data-x":e.posx,"data-y":e.posy}})}),0):"image1"==t.goodstype?i("div",{staticClass:"jcontent"},t._l(t.layer.icon,function(e,s){return i("img",{staticClass:"iconPOsition",style:{top:e.posy*t.h-t.iconSize/2+"px",left:e.posx*t.w-t.iconSize/2+"px"},attrs:{src:t.ourl+e.image1,width:t.iconSize,typeid:e.onegoodscategoryid,iconid:e.iconid,pointid:e.pointid,height:t.iconSize,iconname:e.iconname,"data-x":e.posx,"data-y":e.posy}})}),0):i("div",{staticClass:"jcontent"},t._l(t.layer.icon,function(e,s){return i("img",{staticClass:"iconPOsition",style:{top:e.posy*t.h-t.iconSize/2+"px",left:e.posx*t.w-t.iconSize/2+"px"},attrs:{src:t.ourl+e.image2,width:t.iconSize,typeid:e.onegoodscategoryid,iconid:e.iconid,pointid:e.pointid,height:t.iconSize,iconname:e.iconname,"data-x":e.posx,"data-y":e.posy}})}),0)]):t._e(),t._v(" "),i("div",{staticClass:"pre",on:{click:t.backDetail}}),t._v(" "),i("div",{staticClass:"next_img",on:{click:t.next_tabel}})]),t._v(" "),i("div",{staticClass:"count_div"},[i("div",{staticClass:"logo"},[t.layerAll?i("img",{attrs:{src:t.ourl+t.layerAll.logo,alt:""}}):t._e()]),t._v(" "),i("div",{staticClass:"iList"},[t.layer&&t.layer.cate.length>0?i("div",{staticClass:"box_icon"},t._l(t.layer.cate,function(e){return i("div",{staticClass:"cate_item"},[i("span",{staticClass:"cicon"},[t._v(t._s(e.iconname))]),t._v(" "),i("span",{staticClass:"cname"},[t._v(t._s(e.name))]),t._v(" "),i("span",{staticClass:"cnumber"},[t._v(t._s(e.num))])])}),0):i("div",{staticClass:"box_icon"},[i("div",{staticClass:"noneInfomation"},[i("div",{staticClass:"svgContent"},[i("svg",{staticClass:"icon",attrs:{t:"1564371562868",viewBox:"0 0 1536 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4050",width:"90",height:"90"}},[i("path",{attrs:{d:"M396.878102 841.762712h670.225356a10.24 10.24 0 0 1 0 20.497356H396.878102a10.24 10.24 0 0 1 0-20.497356z m-219.77817 61.48339h302.895729a10.24 10.24 0 1 1 0 20.497356H177.099932a10.24 10.24 0 0 1 0-20.497356z m413.383593 0h754.158644a10.24 10.24 0 1 1 0 20.497356H590.483525a10.24 10.24 0 0 1 0-20.497356z m-510.811118 0h44.50061a10.24 10.24 0 1 1 0 20.497356H79.663729a10.24 10.24 0 0 1 0-20.497356zM1103.299254 841.762712h30.225356a10.24 10.24 0 0 1 0 20.497356h-30.225356a10.24 10.24 0 0 1 0-20.497356z m303.494509 61.48339h54.367457a10.24 10.24 0 1 1 0 20.497356h-54.367457a10.24 10.24 0 1 1 0-20.497356z m-334.89139 98.373423h110.644068a10.24 10.24 0 1 1 0 20.497356h-110.644068a10.24 10.24 0 1 1 0-20.497356z m-47.095322 0h15.967457a10.24 10.24 0 1 1 0 20.497356h-15.967457a10.24 10.24 0 1 1 0-20.497356z m-402.917966 0h174.808949a10.24 10.24 0 1 1 0 20.497356H621.880407a10.24 10.24 0 0 1 0-20.497356z m262.491118 0h110.652746a10.24 10.24 0 1 1 0 20.497356h-110.644068a10.24 10.24 0 1 1 0-20.497356zM328.851525 841.762712h30.225356a10.24 10.24 0 1 1 0 20.497356h-30.225356a10.24 10.24 0 0 1 0-20.497356z m198.838238 61.48339h23.985898a10.24 10.24 0 1 1 0 20.497356h-23.985898a10.24 10.24 0 0 1 0-20.497356z m36.386712-332.018983V388.495186c0-26.346305 16.600949-46.973831 41.688949-50.748745a118.836068 118.836068 0 0 1 25.304949-0.295051c7.966373 0.581424 13.797966 8.643254 13.407458 17.095593-0.312407 8.591186-6.907661 15.507525-15.177763 15.91539-5.336949 0.173559-10.673898 0-16.010848 0.034712-10.292068 0.138847-17.052203 7.159322-17.052203 17.96339v365.507254c0 10.977627 6.794847 18.032814 17.329898 18.032813h319.583458c10.847458 0 17.468746-6.985763 17.503458-18.614237V652.826034l0.034711-262.855593a20.662237 20.662237 0 0 0-3.358373-12.782644 15.655051 15.655051 0 0 0-12.687186-6.621289c-5.302237-0.104136-10.673898 0-16.010847-0.034711-8.912271 0.138847-16.262508-7.228746-16.42739-16.488136-0.069424-4.451797 1.596746-8.738712 4.616678-11.906169s7.141966-4.929085 11.428881-4.903051c9.216 0.112814 18.640271-0.355797 27.509153 1.553356 21.217627 4.529898 36.256542 24.333017 37.020203 46.756881l0.034712 3.818305v363.780339c0 21.911864-9.458983 38.044203-28.489763 47.754847a43.650169 43.650169 0 0 1-20.063457 4.503865H612.699119a47.277559 47.277559 0 0 1-34.590373-14.726509A51.052475 51.052475 0 0 1 564.067797 754.688z m209.468745-167.293831h-62.793762c-20.384542 0-33.861424-14.075661-33.930848-35.19783 0-10.187932-0.034712-20.341153 0.034712-30.563797 0.104136-20.193627 13.754576-34.442847 33.201898-34.442847h126.880543c19.239051 0 33.063051 14.405424 33.097762 34.304 0.034712 10.725966 0.069424 21.486644 0 32.247322a33.696542 33.696542 0 0 1-9.094508 23.690847 31.205966 31.205966 0 0 1-22.649492 9.892881c-21.556068 0.251661-43.146847 0.034712-64.737627 0.069424z m64.190916-66.551322H709.258847v32.976271h128.442577v-32.976271z m-99.197831 132.686102a106.817085 106.817085 0 0 1 87.343729 0 59.010169 59.010169 0 0 1 25.964474 44.856407c4.130712 14.752542 2.950508 40.126915-28.914983 79.663728a62.559458 62.559458 0 0 0-13.572339 37.775187 29.505085 29.505085 0 0 1-27.153355 31.865491 29.505085 29.505085 0 0 1-29.505085-27.144678 118.029017 118.029017 0 0 1 26.554576-79.082305 86.163525 86.163525 0 0 0 17.121627-28.324881 30.095186 30.095186 0 0 1 0-4.720814c-5.319593-7.08122-23.604068-4.720814-35.406102 0-9.806102 4.000542-32.490305 6.482441-40.864542 0a29.643932 29.643932 0 0 1-11.211932-27.448406c1.431864-10.491661 19.837831-23.430508 29.643932-27.439729z m43.667526 204.782644a27.144678 27.144678 0 0 1 29.505084 23.013966v12.982237a30.095186 30.095186 0 0 1-59.010169 0v-12.392135a27.144678 27.144678 0 0 1 29.505085-23.604068zM116.831458 277.061424a56.085695 56.085695 0 1 1 0-112.180068 56.085695 56.085695 0 0 1 0 112.180068z m0.199593-25.64339a30.25139 30.25139 0 1 0 0-60.50278 30.25139 30.25139 0 0 0 0 60.50278z m534.649491-205.928136a5.293559 5.293559 0 1 1 0 10.595797h-40.196339v40.196339a5.293559 5.293559 0 0 1-10.595796 0V56.085695H560.68339a5.293559 5.293559 0 0 1 0-10.587119h40.205017V5.293559a5.293559 5.293559 0 0 1 10.587118 0v40.205017z m-563.659932 456.374238a3.826983 3.826983 0 0 1-0.017356 7.653966l-37.948746 0.017356v38.148339a3.826983 3.826983 0 1 1-7.653966 0v-38.183051L3.818305 509.48339a3.818305 3.818305 0 0 1 0.017356-7.653966l38.573559 0.017356v-38.087594a3.826983 3.826983 0 0 1 7.662644 0v38.113628z m1403.444068-193.084746a1.752949 1.752949 0 1 1-2.481898 2.481898l-17.381966-17.381966-17.390645 17.381966a1.752949 1.752949 0 0 1-2.481898-2.481898l17.381966-17.381966-17.381966-17.390644a1.752949 1.752949 0 0 1 2.481898-2.481899l17.390645 17.381966 17.381966-17.381966a1.752949 1.752949 0 1 1 2.481898 2.481899l-17.381966 17.390644z m-366.921763 90.858305c-4.469153-4.460475-8.920949-8.938305-13.407457-13.381424-0.494644-0.485966-0.459932-0.746305 0.017356-1.197559 1.093424-1.041356 2.126102-2.13478 3.210847-3.228204l0.55539 0.520678 13.546305 13.52895c0.451254 0.451254 0.407864 0.694237-0.017356 1.102101-1.076068 1.041356-2.117424 2.13478-3.228203 3.280271-0.295051-0.269017-0.494644-0.433898-0.676882-0.624813z m33.74861 25.782237l14.04095 14.066983c0.034712 0.034712 0.052068 0.078102 0.147525 0.251661-1.180203 1.162847-2.351729 2.343051-3.557966 3.471187-0.095458 0.08678-0.520678-0.034712-0.676881-0.190916-1.978576-1.935186-3.931119-3.905085-5.892339-5.857627l-7.653967-7.662644-0.529355-0.55539c0.095458-0.138847 0.164881-0.277695 0.260339-0.38183 1.041356-1.041356 2.074034-2.065356 3.098033-3.106712 0.260339-0.260339 0.459932-0.347119 0.763661-0.034712z m-1.067389-25.964474c-0.902508-0.971932-1.865763-1.900475-2.811661-2.829017-0.260339-0.260339-0.355797-0.459932-0.052068-0.763661l13.841356-13.824c0.060746-0.060746 0.138847-0.095458 0.303729-0.208272 1.171525 1.180203 2.317017 2.317017 3.436474 3.479865 0.08678 0.08678 0.052068 0.347119 0.008678 0.494644-0.034712 0.112814-0.173559 0.199593-0.260339 0.286373-4.460475 4.460475-8.920949 8.903593-13.364068 13.372746-0.433898 0.442576-0.685559 0.433898-1.102101-0.008678z m-31.674577 26.103322c0.911186 0.971932 1.865763 1.891797 2.820339 2.820339 0.260339 0.260339 0.347119 0.459932 0.04339 0.772339l-13.832678 13.815322c-0.060746 0.060746-0.147525 0.104136-0.303729 0.216949-1.180203-1.180203-2.325695-2.317017-3.445152-3.479865-0.08678-0.08678-0.052068-0.347119 0-0.503322 0.026034-0.112814 0.173559-0.190915 0.260339-0.286373 4.451797-4.451797 8.912271-8.894915 13.35539-13.364067 0.433898-0.442576 0.694237-0.433898 1.102101 0z m16.600949-43.207594c0 2.794305-0.017356 5.58861 0.008678 8.382916 0.008678 0.607458-0.173559 0.798373-0.781017 0.781017a78.032271 78.032271 0 0 0-3.931118-0.008678c-0.433898 0-0.633492-0.095458-0.633492-0.581424V373.76c0-0.46861 0.147525-0.624814 0.607458-0.607458 1.362441 0.017356 2.716203 0.026034 4.061288 0 0.546712-0.026034 0.676881 0.173559 0.676881 0.676882-0.017356 2.837695-0.008678 5.67539-0.008678 8.513084z m-21.694915 26.259526a75.021017 75.021017 0 0 0 0 3.991864c0 0.459932-0.156203 0.607458-0.607457 0.607458-5.727458-0.017356-11.446237-0.017356-17.156339 0-0.494644 0-0.590102-0.208271-0.590102-0.64217 0.026034-1.353763 0.026034-2.707525 0-4.05261-0.008678-0.503322 0.156203-0.650847 0.650847-0.650847 2.829017 0.017356 5.666712 0.008678 8.504407 0.008678 2.811661 0 5.632 0.017356 8.443661-0.008678 0.572746 0 0.781017 0.138847 0.754983 0.746305z m60.745763-0.034712c-0.034712 1.345085-0.026034 2.698847 0 4.05261 0 0.433898-0.147525 0.572746-0.581424 0.572746h-17.147661c-0.520678 0-0.633492-0.199593-0.624813-0.668203 0.026034-1.327729 0.034712-2.664136 0-3.991865-0.017356-0.529356 0.164881-0.676881 0.685559-0.676881 2.829017 0.017356 5.666712 0.008678 8.504407 0.008678 2.820339 0 5.632 0.017356 8.443661-0.008678 0.538034 0 0.737627 0.138847 0.720271 0.711593z m-39.050848 34.451525c0 2.837695-0.017356 5.67539 0 8.504407 0.008678 0.55539-0.147525 0.737627-0.702915 0.720271a93.131932 93.131932 0 0 0-4.061288 0c-0.433898 0-0.572746-0.147525-0.572746-0.581423v-17.156339c0-0.451254 0.138847-0.624814 0.607458-0.607458 1.353763 0.017356 2.707525 0.026034 4.05261 0 0.538034-0.026034 0.694237 0.156203 0.685559 0.676881-0.026034 2.811661-0.008678 5.632-0.008678 8.443661z m357.861967 101.141695a33.436203 33.436203 0 1 1 0-66.881084 33.436203 33.436203 0 0 1 0 66.881084z m-0.026034-10.205288a23.656136 23.656136 0 1 0 0-47.312271 23.656136 23.656136 0 0 0 0 47.312271z m-416.993627-381.26644a24.280949 24.280949 0 1 1 0-48.561899 24.280949 24.280949 0 0 1 0 48.561899z m-0.260339-11.177221a13.364068 13.364068 0 1 0 0-26.710779 13.364068 13.364068 0 0 0 0 26.710779z",fill:"#768395","p-id":"4051"}})]),t._v(" "),i("div",{staticClass:"mainTips"},[t._v("没有点位信息")])])])])]),t._v(" "),i("div",{staticClass:"author"},[i("div",{staticClass:"companey"},[i("span",[t._v("公司名: ")]),t._v(t._s(t.layer.usercompany))]),t._v(" "),i("div",{staticClass:"companey"},[i("span",[t._v("制图人: ")]),t._v(t._s(t.layer.username))]),t._v(" "),i("div",{staticClass:"companey"},[i("span",[t._v("DATE: ")]),t._v(t._s(t.layer.createtime))])])])])]),t._v(" "),t.showtable?i("div",{staticClass:"box_pre"},[i("div",{staticClass:"pre",on:{click:t.pre_btn}}),t._v(" "),i("div",{staticClass:"view_title"},[t._v("智能点位图统计")])]):t._e(),t._v(" "),i("div",{staticClass:"cell_table"},[t.showtable?i("tableCell",{attrs:{layerAll:t.layerAll}}):t._e()],1)])},staticRenderFns:[]};var Gt=s("VU/8")(Jt,Xt,!1,function(t){s("vlbe")},null,null).exports,Zt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"partDetail"},[e("div",{staticClass:"conte_bg"},[e("div",{staticClass:"title"},[this._v("\n            "+this._s(this.shoiwname)+"\n            "),e("svg",{staticClass:"icon",attrs:{t:"1567580619029",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2709",width:"18",height:"18"},on:{click:this.close}},[e("path",{attrs:{d:"M583.168 523.776L958.464 148.48c18.944-18.944 18.944-50.176 0-69.12l-2.048-2.048c-18.944-18.944-50.176-18.944-69.12 0L512 453.12 136.704 77.312c-18.944-18.944-50.176-18.944-69.12 0l-2.048 2.048c-19.456 18.944-19.456 50.176 0 69.12l375.296 375.296L65.536 899.072c-18.944 18.944-18.944 50.176 0 69.12l2.048 2.048c18.944 18.944 50.176 18.944 69.12 0L512 594.944 887.296 970.24c18.944 18.944 50.176 18.944 69.12 0l2.048-2.048c18.944-18.944 18.944-50.176 0-69.12L583.168 523.776z","p-id":"2710",fill:"#fff"}})])]),this._v(" "),e("div",{staticClass:"contentDtail"},[e("iframe",{style:"height:"+(this.imgheight-90)+"px",attrs:{src:this.showimg}})])])])},staticRenderFns:[]};var Kt=s("VU/8")({data:function(){return{}},created:function(){},computed:{},props:["shoiwname","showimg"],components:{},methods:{close:function(){this.$emit("closeParts",!1)}}},Zt,!1,function(t){s("roLm")},"data-v-385a6ad0",null).exports,te={data:function(){return{showDiyPoint:!1,phone:"",usreInfo:null,category:null,oringinLayer:null,url:this.hosturl,catIndex:null,childIndex:null,roadshow:-1,isactive:-1,showFloorBox:!1,indexChildren:-1,w:0,h:0,x:0,y:0,l:0,t:0,downY:0,downX:0,addGoods:!1,sideLeft:0,sideTop:0,isload:!1,icontype:0,size:"20",useSize:!0,catId:"",operate:0,list:!0,showAdd:!1,picId:0,islocked:!0,selectCatData:null,upath:"",typeid:"",iconId:"",iconName:"",showAddWindow:!1,showMarsk:!1,editorName:"",staticFloor:!1,ispreview:!1,previewIndex:-1,ispreviewData:null,showG:!1,showUncheckedStatic:!1,addPointModel:!0,shoiwname:"",showimg:"",showSelectToast:!1,selectedGoodsList:[],isShowJump:!1,checkedPlatfor:"",jumpId:"",jumpName:"",piontStatuts:0,checkedProduct:!1,checkedAllBrand:null,isRead:!0,partsData:null,canselAll:!1,saveData:null,Oimg:null,Oname:null,showToastParts:!1}},created:function(){var t=this,e=this.storage.getSession("usreInfo"),i=this.$route.query.id;this.catId=i,this.usreInfo=e;var s=this;this.$store.commit("setNowFloor",{}),this.$Spin.show(),q.a.all([q.a.post(s.hosturl+"/index.php?m=Api&c=project&a=getIconsProjectPC",s.Qs.stringify({userId:e.user_id,projectId:i})),q.a.post(s.hosturl+"/index.php?m=Api&c=project&a=projectIconCategory",s.Qs.stringify({userId:e.user_id,projectId:i})),q.a.post(s.hosturl+"/index.php?m=Api&c=project&a=projectInfo",s.Qs.stringify({user_id:e.user_id,projectType:0,project_id:i})),q.a.post(s.hosturl+"/index.php?m=Api&c=project&a=projectSelectGoods",s.Qs.stringify({userId:e.user_id,projectId:i}))]).then(q.a.spread(function(e,i,s,a){var n=e.data.layer;t.oringinLayer=e.data,2==e.data.icontype||3==e.data.icontype?(t.useSize=!1,t.size="30"):2==e.data.pointIconSize?t.size="25":3==e.data.pointIconSize?t.size="30":t.size="20",t.icontype=e.data.icontype;var o=s.data.result,c=i.data.result;c.forEach(function(t){-1==o.functionarray.indexOf(t.id)?t.isCheck=!0:t.isCheck=!1}),t.checkedPlatfor=o.platformarray,t.category=c,void 0!=n?(n.forEach(function(t){var e=t.marks.marks;if(e)for(var i=0;e.length>i;i++)14==e[i].type&&(e[i].info.a=2*Math.PI-parseFloat(e[i].info.a))}),t.$store.commit("setlayerAll",n),t.$store.commit("setNowFloor",n[0]),0==n[0].marks.hide?t.showDiyPoint=!0:t.showDiyPoint=!1):(t.$store.commit("setlayerAll",{}),t.$store.commit("setNowFloor",{}));var r="";void 0!=n&&(r=n,t.$store.commit("setlayerAll",r),n[t.picId],c.forEach(function(t,e){n.forEach(function(e,i){e.cate.forEach(function(e,i){t.id==e.parent_id&&(t.num+=e.num),907==e.parent_id&&855==t.id&&(t.num+=e.num*e.iconname.slice(-1)),890==e.parent_id&&851==t.id&&(t.num+=e.num),t.child.forEach(function(t,i){t.iconname==e.iconname&&t.parent_id==e.parent_id&&(t.num+=e.num),t.parent_id==e.parent_id&&907==e.parent_id&&e.iconname.substring(0,2)==t.iconname.substring(0,2)&&(t.num+=e.num*e.iconname.slice(-1))})})})})),t.selectedGoodsList=a.data.result,t.$Spin.hide()}))},components:{Arrow:L,jumpPoint:$t,accessoriesList:qt,typeCatgory:Yt,readFloor:Gt,portsDtail:Kt},computed:{sum:function(){var t=0;return this.selectedGoodsList&&this.selectedGoodsList.forEach(function(e){e.goods&&e.goods.forEach(function(e){t+=e.num})}),t},nowLayer:function(){return this.$store.state.nowLayer},layerAll:function(){return this.$store.state.layerAll},goodstype:function(){var t=0;switch(this.icontype){case 0:t="image";break;case 1:t="image1";break;case 2:t="image2";break;case 3:t="image3"}return t},getCheck:function(){return this.$store.state.showUncheckedBtn}},updated:function(){this.$refs.mainbox.addEventListener("mousewheel",this.imgMoseeWheel,!1),this.$refs.mainbox.addEventListener("DOMMouseScroll",this.imgMoseeWheel,!1)},methods:{sGoods:function(){var t=this;this.axios.post("/index.php?m=Api&c=project&a=projectSelectGoods",this.Qs.stringify({userId:this.usreInfo.user_id,projectId:this.catId})).then(function(e){t.selectedGoodsList=e.data.result}).catch(function(e){t.$Message.error("出错了请联系管理员！")})},showDiy:function(){1==this.$store.state.nowLayer.marks.hide?(this.showDiyPoint=!0,this.$store.state.nowLayer.marks.hide=0):(this.showDiyPoint=!1,this.$store.state.nowLayer.marks.hide=1)},imgMoseeWheel:function(t){var e=this,i=this.$refs.img2,s=t.currentTarget,a=t||window.event,n=i.getAttribute("src"),o=new Image;o.src=n;var c=0,r=0;o.onload=function(){c=o.width,r=o.height;var t=!0;t=a.detail?a.detail>0:a.wheelDelta<0,a.preventDefault&&a.preventDefault();var i=s.offsetWidth,n=s.offsetHeight,l=s.offsetLeft,d=s.offsetTop,u=(a.clientX-l)/i,h=(a.clientY-d)/n,_=(parseFloat(s.style.width),parseFloat(s.style.height));if(t)if(r>c)if(_>e.imgheight)e.w=.95*s.offsetWidth,e.h=.95*s.offsetHeight;else{var p=e.imgheight/r;e.h=e.imgheight,e.w=c*p}else if(c>r)e.w>e.imgwidth-200&&(e.w=.95*s.offsetWidth,e.h=.95*s.offsetHeight),e.w<e.imgwidth-200&&e.h>e.imgheight&&(e.h=e.imgheight,e.w=e.h/r*c);else if(r>e.imgheight&&c>e.imgheight){var v=e.imgheight/r;e.w=v*c,e.h=e.imgheight}else e.w=c,e.h=r;else e.w<c&&(e.w=1.1*s.offsetWidth,e.h=1.1*s.offsetHeight);return s.style.left=l-u*(e.w-i)+"px",s.style.top=d-h*(e.h-n)+"px",!1}},iconhide:function(){this.$router.push({path:"/drawing/lable",query:{id:this.catId,key:0,opennames:4}})},showParstDetail:function(t){t.goods_content?(this.Oimg=t.goods_content,this.Oname=t.goods_name):this.$Message.error("暂无详情!")},confirmCheck:function(){for(var t=[],e=[],i=document.querySelectorAll(".checkparst"),s=0;s<i.length;s++)i[s].checked&&t.push(i[s].value);this.partsData.goods_ids2.forEach(function(i){t.length>0&&t.forEach(function(t){t==i.goods_id&&e.push({id:t,num:i.goods_num})})});var a=[];this.partsData.goods_ids1.forEach(function(t){a.push({id:t.goods_id,num:t.goods_num})}),this.$store.commit("partChecked",a),this.$store.commit("choosePartChecked",e),this.addGoods=!1},portReduce:function(t){var e=event.currentTarget.parentNode.parentNode.querySelector(".oinput"),i=parseFloat(e.value);e.value=Math.max(0,i-1),t.goods_num=e.value},portAdd:function(t){var e=event.currentTarget.parentNode.parentNode.querySelector(".oinput"),i=parseFloat(e.value);e.value=i+1,t.goods_num=e.value},showparts:function(t){this.partsData=t,this.addGoods=!0;var e=[];t.goods_ids1.forEach(function(t){e.push({id:t.goods_id,num:t.goods_num})}),this.$store.commit("partChecked",e)},deleteFn:function(t,e){var i=this;this.$Modal.confirm({title:"提示",content:"是否删除该楼层？",onOk:function(){i.axios.post("/index.php?m=Api&c=project&a=projectDelFloor",i.Qs.stringify({userId:i.usreInfo.user_id,projectId:i.catId,floorId:e})).then(function(s){1==s.data.status?(i.$store.state.layerAll.forEach(function(s,a){a==t&&(i.$store.state.layerAll.splice(t,1),i.nowLayer.floorid==e&&(i.$store.state.layerAll.length>1?i.$store.commit("setNowFloor",i.$store.state.layerAll[i.$store.state.defaultlayerkey]):(i.$store.commit("setNowFloor",{}),i.$store.commit("setFloorIndex",0))))}),i.countCat(),i.$Message.success(s.data.msg)):i.$Message.error(s.data.msg)})}})},countCat:function(){var t=this;this.category.forEach(function(t,e){t.num=0,t.child.forEach(function(t,e){t.num=0})}),this.category.forEach(function(e,i){t.$store.state.layerAll.forEach(function(t,i){console.log(t.cate),t.cate.forEach(function(t,i){e.id==t.parent_id&&(e.num+=t.num),907==t.parent_id&&855==e.id&&(e.num+=t.num*t.iconname.slice(-1)),890==t.parent_id&&851==e.id&&(e.num+=t.num),e.child.forEach(function(e,i){e.iconname==t.iconname&&e.parent_id==t.parent_id&&(e.num+=t.num),e.parent_id==t.parent_id&&907==t.parent_id&&t.iconname.substring(0,2)==e.iconname.substring(0,2)&&(e.num+=t.num*t.iconname.slice(-1))})})})})},windowBack:function(){this.$router.push({path:"/index",query:{type:1,opennames:4}})},hideFloor:function(){this.isRead=!0},uncheckedPoint:function(){this.checkedProduct=!1,this.canselPoint(),this.$store.commit("setchecked",!this.$store.state.showUncheckedBtn),this.isShowCheckPion()},isShowCheckPion:function(){var t=this,e=w()(this.$store.state.nowLayer),i=JSON.parse(e),s=[];this.axios.get("/index.php?m=Api&c=project&a=projectProductinfo&&userId="+this.usreInfo.user_id+"&&projectId="+this.$route.query.id).then(function(e){var a=[];e.data.products.forEach(function(t,e){""!=t.pointid&&a.push(t)}),console.log(a),a.forEach(function(t,e){i.icon.forEach(function(e,i){t.pointid==e.iconid&&s.push(e.iconid)})}),i.icon.forEach(function(t,e){t.portid&&s.push(t.iconid)}),t.saveData=JSON.parse(w()(t.$store.state.layerAll[t.$store.state.defaultlayerkey])),t.getCheck?(s.forEach(function(t){i.icon.forEach(function(e,s){e.iconid==t&&i.icon.splice(s,1)})}),t.$store.commit("setNowFloor",i)):t.$store.commit("setNowFloor",t.saveData)})},swichPiont:function(t){this.piontStatuts=t,this.catIndex=-1,1==t?(this.showUncheckedStatic=!0,this.addPointModel=!1,this.isShowJump=!1):(2!=this.icontype?this.useSize=!0:this.useSize=!1,this.isShowCheckPion(),this.showUncheckedStatic=!1,this.$store.commit("setchecked",!1),this.checkedProduct=!1,this.addPointModel=!0),this.selectCatData={id:null,src:null,srca:null,srcb:null,iconName:null,portnum:null,parent_id:null,name:null},this.canselPoint()},jumpPointAdd:function(t,e,i){var s=this;this.childIndex=-1,this.isShowJump=!0,this.indexChildren=t,this.selectCatData={id:null,src:null,srca:null,srcb:null,iconName:null,portnum:null,parent_id:null,name:null},this.$store.commit("restGoodsName","全部"),this.axios.post("/index.php?m=Api&c=project&a=projectBGList",this.Qs.stringify({userId:this.usreInfo.user_id,projectId:this.catId,categoryId:e,flatform:this.checkedPlatfor})).then(function(t){s.$store.commit("setJumpPiont",t.data),s.$store.commit("checkedJumpPiont",t.data)}),this.isShow=!0,this.jumpId=e,this.jumpName=i},showDetail:function(t){var e=this,i=t.productid;this.selectedGoodsList&&this.selectedGoodsList.forEach(function(t){t.productid==i&&(e.shoiwname=t.productname,e.showimg=t.productIntroUrl,e.showSelectToast=!0)})},showSelectGoods:function(){this.showG=!this.showG,event.currentTarget.className.indexOf("active")>0?event.currentTarget.className="icon iconfont iconnormal1 checkGoods stopSelect":(event.currentTarget.className="icon iconfont iconnormal1 checkGoods stopSelect active",this.checkedProduct=!1)},showBtn:function(){this.ispreview=!this.ispreview,this.ispreviewData&&this.$store.commit("setNowFloor",this.ispreviewData),0==this.ispreview?this.previewIndex=-1:this.catIndex=-1},eDTime:function(){return(new Date).getTime().toString().substr(0,10)},confirmFn:function(){var t,e=this;t=this.staticFloor?"pf"+(new Date).getTime():this.$store.state.nowLayer.floorid;var i=this.$refs.inputVal.value;if(!i)return this.$Message.error("楼层名称不能为空!"),!1;this.$emit("closeMask",!1),this.$Spin.show(),this.axios.post("/index.php?m=Api&c=project&a=projectAddFloor",this.Qs.stringify({userId:this.usreInfo.user_id,projectId:this.catId,floorId:t,floorName:i,time:this.eDTime()})).then(function(t){1==t.data.status?(e.reloadLayer(),e.showAddWindow=!1,e.showMarsk=!1,e.$refs.inputVal.value="",e.$Spin.hide()):e.$Message.error(t.data.msg)})},reloadLayer:function(){var t=this;this.axios.post("/index.php?m=Api&c=project&a=getIconsProject",this.Qs.stringify({userId:this.usreInfo.user_id,projectId:this.catId,layer:!0})).then(function(e){if(1==e.data.status){var i=e.data.layer;i.forEach(function(t){t.marks?t.marks=JSON.parse(t.marks):t.marks={marks:[],hide:0,v:0}}),t.$store.commit("setlayerAll",i),t.$Message.success(e.data.msg)}else t.$Message.error(e.data.msg)})},canselPoint:function(){for(var t=document.querySelectorAll(".iconPOsition"),e=0;e<t.length;e++)t[e].className="iconPOsition"},deleteBtn:function(){var t=this;this.iconId?this.axios.post("/index.php?m=Api&c=project&a=changeIconProject",this.Qs.stringify({userId:this.usreInfo.user_id,projectId:this.catId,floorId:this.$store.state.nowLayer.floorid,operate:3,typeId:this.typeid,pointId:this.iconId})).then(function(e){t.showG=!1,t.checkedProduct=!1,1==e.data.status?(t.backList(),t.$refs.checkBtn.className="icon iconfont iconnormal1 checkGoods stopSelect",t.sGoods(),t.$Message.success(e.data.msg)):t.$Message.error(e.data.msg)}):this.$Message.warning("请选择要删除的点位!")},backList:function(){var t=this;this.$store.state.nowLayer.icon.forEach(function(e,i){e.iconid==t.iconId&&(t.$store.state.nowLayer.icon.splice(i,1),t.category.forEach(function(t){t.child.forEach(function(i){e.onegoodscategoryid==i.id&&(i.num--,t.num--)})}),t.$store.state.nowLayer.cate.forEach(function(e,i){e.iconname==t.iconName&&(e.num>1?e.num--:t.$store.state.nowLayer.cate.splice(i,1))}))}),this.getAllIcon().forEach(function(t){t.className="iconPOsition"}),this.typeid=null,this.iconId=null},imgUpload:function(t){var e=this;if(!this.$store.state.nowLayer.layername)return this.$Message.error("请先添加楼层在选择楼层才能上传图片"),t.currentTarget.value="",!1;var i=new FormData,s=t.target.files[0];i.append("file",s),i.append("chunk","0"),t.target.value.endsWith(".png")||t.target.value.endsWith(".jpg")||t.target.value.endsWith(".gif")?(this.$Spin.show(),this.axios.post("/index.php?m=Api&c=Upload&a=imageUp",i).then(function(t){if("SUCCESS"==t.data.result.state){var i=t.data.result.url,s={userId:e.usreInfo.user_id,projectId:e.catId,floorId:e.$store.state.nowLayer.floorid,photoUrl:i,time:e.storage.gettime()};e.axios.post("/index.php?m=Api&c=project&a=editPhotoProject",e.Qs.stringify(s)).then(function(t){e.axios.post("/index.php?m=Api&c=project&a=getIconsProject",e.Qs.stringify({userId:e.usreInfo.user_id,projectId:e.catId,layer:!0})).then(function(s){1==s.data.status?(e.nowLayer.image=i,e.$Message.success(t.data.msg),e.reloadLayer(),e.$Spin.hide()):e.$Message.error("上传错误")})})}})):this.$Message.error("不能上传非图片文件！")},scaleImg:function(t,e){var i="",s=e.currentTarget;s.className.indexOf("active")>0?(s.className="sItem flex",i=0):(s.className="sItem flex active",i=t),3==i?(this.useSize=!1,this.size="30"):this.useSize=!0,this.icontype=i,this.changeIcon(i),this.getScaleImg()},changeIcon:function(t){var e=this;this.axios.post("/index.php?m=Api&c=project&a=changeIconProject",this.Qs.stringify({userId:this.usreInfo.user_id,projectId:this.catId,floorId:this.$store.state.nowLayer.floorid,icontype:t})).then(function(i){1==i.data.status?(e.oringinLayer.icontype=t,e.$Message.success(i.data.msg)):e.$Message.error(i.data.msg)})},chooseIoncType:function(t,e){var i="",s=e.currentTarget;s.className.indexOf("active")>0?(s.className="sItem flex",i=0):(s.className="sItem flex active",i=t),2==i||3==i?(this.useSize=!1,this.size="30"):this.useSize=!0,this.icontype=i,this.changeIcon(i)},addMark:function(t){if(!this.selectCatData)return this.$Message.warning("请选择左侧分类!"),!1;if(1!=this.piontStatuts){var e=this.$refs.mainbox.getBoundingClientRect().left,i=this.$refs.mainbox.getBoundingClientRect().top,s=this.createTime(),a=(this.selectCatData.name,this.selectCatData.id),n=this.selectCatData.portnum;this.operate=1;var o=(t.clientX-e)/this.w,c=(t.clientY-i)/this.h,r=this.selectCatData.iconName;this.changePiont(o,c,a,s,n);var l=this.selectCatData.src.replace(this.url,""),d=this.selectCatData.srca.replace(this.url,""),u=this.selectCatData.srcb.replace(this.url,""),h=this.$store.state.nowLayer,_=a;switch(a){case"switch":_="913";break;case"aiming":_="914";break;case"vaiming":_="915"}h.icon.push({iconid:s,iconname:r,onegoodscategoryid:_,portnum:n,image:l,image1:d,image2:u,image3:"/Public/images/ngoods.png",posx:o,posy:c,parent_id:this.selectCatData.parent_id});var p={iconname:r,name:this.selectCatData.name,image:this.selectCatData.src,num:1,parent_id:this.selectCatData.parent_id},v=!0;if(h.cate.forEach(function(t){t.iconname==p.iconname&&(t.num++,v=!1)}),v){var m=h.cate;m.push(p),h.cate=m}this.sumfn(p)}else this.$Message.error("选产品模式下不能添加点位!")},sumfn:function(t){var e=this;this.category.forEach(function(i){890==t.parent_id&&851==i.id&&(i.num+=1),i.child.forEach(function(e){890==t.parent_id&&890==e.parent_id&&(e.num+=1)}),i.id==t.parent_id&&(855==t.parent_id&&855==i.id&&t.num*t.iconname.slice(-1)?i.num+=t.num*t.iconname.slice(-1):i.num+=1,i.child.forEach(function(i){i.iconname==t.iconname&&(i.num+=1),i.name==t.name.slice(0,-2)&&(i.num+=e.selectCatData.portnum)}))})},createTime:function(){return"pc"+(new Date).getTime()},close:function(t){var e=t.clientX,i=t.clientY;e!=this.x&&i!=this.y||(this.$refs.dg.style.left=parseFloat(this.$refs.dg.style.left)+286+"px",this.showAdd=!0,this.list=!1)},closeAdd:function(t){var e=t.clientX,i=t.clientY;e!=this.x&&i!=this.y||(this.$refs.dg.style.left=parseFloat(this.$refs.dg.style.left)-286+"px",this.showAdd=!1,this.list=!0)},mousedownHe:function(t){var e=this,i=document.body.clientWidth,s=document.body.clientHeight,a=document.querySelector(".content ").offsetLeft,n=this.$refs.dg,o=t.clientX-n.offsetLeft,c=t.clientY-n.offsetTop;this.isDown=!0,n.style.cursor="move",this.x=t.clientX,this.y=t.clientY,this.l=n.offsetLeft,this.t=n.offsetTop,document.onmousemove=function(t){if(!e.isDown)return!1;var r=t.clientX-o,l=t.clientY-c;l<=0?l=0:l>=s&&(l=s),r<=-a?r=-a:r>=i-a-n.offsetWidth&&(r=i-a-n.offsetWidth),n.style.left=r+"px",n.style.top=l+"px",document.onmouseup=function(){document.onmousemove=null,document.onmousedown=null}}},mup:function(t){this.isDown=!1,this.$refs.dg.style.cursor="default"},changePiont:function(t,e,i,s,a){var n,o=this;switch(this.size){case 20:n=1;break;case 25:n=2;break;case 30:n=3}this.axios.post("/index.php?m=Api&c=project&a=changeIconProject",this.Qs.stringify({userId:this.usreInfo.user_id,projectId:this.catId,floorId:this.$store.state.nowLayer.floorid,pointIconSize:n,operate:this.operate,typeId:a?"":i,portId:a?i:"",posx:t,posy:e,pointId:s,portNum:a||""})).then(function(t){1!=t.data.status&&o.$Message.info(t.data.msg)})},getAllIcon:function(){for(var t=document.querySelectorAll(".iconPOsition"),e=[],i=0;i<t.length;i++)e.push(t[i]);return e},mouseUp:function(t){var e=t.currentTarget,i=e.getAttribute("typeid"),s=e.getAttribute("iconid");2==this.operate&&this.changePiont(e.getAttribute("data-x"),e.getAttribute("data-y"),i,s)},moveIcons:function(t){var e=this;t.preventDefault&&t.preventDefault();var i=t.currentTarget,s=t.target.getAttribute("iconid");if("iconPOsition"==t.target.className){var a=t.target.getAttribute("typeid"),n=t.target.getAttribute("iconname"),o=t.target.getAttribute("portid");if(this.typeid=a,this.iconId=s,this.iconName=n,o||1!=this.piontStatuts)1==this.piontStatuts&&(this.checkedProduct=!1,this.$Message.error("在附属产品中选择商品!"));else{this.$refs.checkBtn.className="icon iconfont iconnormal1 checkGoods stopSelect",this.$store.commit("setPointId",s);var c=parseInt(t.target.getAttribute("prarentId")),r="";if(c)switch(c){case 845:r="网络覆盖";break;case 850:r="安防感应";break;case 849:r="远程监控";break;case 851:r="背景音乐";break;case 852:r="电动窗帘";break;case 853:r="门禁对讲";break;case 854:r="环境控制";break;case 855:r="智能照明";break;case 856:r="智能中控";break;case 857:r="家庭影院";break;case 1011:r="卡拉OK";break;case 1012:r="智能家电"}this.checkedProduct=!1,this.canselAll=!1,this.checkProductFn(a,s,r)}this.getAllIcon().forEach(function(t){t.getAttribute("iconid")==s?t.className="iconPOsition active":t.className="iconPOsition"})}var l=i.getAttribute("data-x"),d=i.getAttribute("data-y"),u=t.clientX-i.offsetLeft,h=t.clientY-i.offsetTop;i.style.zIndex=this.Zindex++,this.operate=null;var _=null,p=null;i.getAttribute("typeid"),i.getAttribute("iconid");return 1!=this.piontStatuts&&(document.onmousemove=function(t){"iconPOsition"!=i.className&&"iconPOsition active"!=i.className||(e.operate=2);var a=e.$refs.mainbox.getBoundingClientRect().left,n=e.$refs.mainbox.getBoundingClientRect().top,o=t.clientX,c=t.clientY,r=o-u+parseInt(e.size),v=c-h+parseInt(e.size),m=e.$store.state.nowLayer.icon;if(r>e.w||r-e.size<0||v>e.h||v-e.size<0)return i.setAttribute("data-x",l),i.setAttribute("data-y",d),e.operate=null,m.forEach(function(t){t.iconid==s&&(t.posx=l,t.posy=d)}),!1;_=(o-a)/e.w,p=(c-n)/e.h,i.setAttribute("data-x",_),i.setAttribute("data-y",p),m.forEach(function(t){t.iconid==s&&(t.posx=_,t.posy=p)})},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,e.operate=null},!1)},getScaleImg:function(){var t=this;this.axios.post("/index.php?m=Api&c=project&a=SelectIconGImage",this.Qs.stringify({userId:this.usreInfo.user_id,projectId:this.catId,layerId:this.$store.state.layerAll[this.$store.state.defaultlayerkey].floorid,width:30,height:30})).then(function(e){e.data.data.forEach(function(e){t.$store.state.nowLayer.icon.forEach(function(t){e.point==t.iconid&&(t.image3=e.image)})})})},checkProductFn:function(t,e,i){var s=this;this.$Spin.show(),this.axios.post("/index.php?m=Api&c=project&a=projectBGList",this.Qs.stringify({userId:this.usreInfo.user_id,categoryId:t,projectId:this.catId,flatform:this.checkedPlatfor,pointId:e})).then(function(t){var a=t.data,n=null;s.selectedGoodsList&&s.selectedGoodsList.forEach(function(t,i){t.pointid==e&&(n=t.productid)}),a.goods.forEach(function(t,e){t.goods_id==n&&(t.checkedIndex=!0)}),a.typeName=i,s.$store.commit("checkData",a),s.$store.commit("saveList",a),s.$Spin.hide(),s.checkedProduct=!0})},imgload:function(t){var e=this;this.$Spin.show();var i=t.currentTarget.getAttribute("src"),s=t.currentTarget.parentNode;s.style.left=0,s.style.top=0;var a=new Image,n=0,o=0;a.src=i,a.onload=function(){if(n=a.height,(o=a.width)>n)if(o>e.imgwidth-200){var t=(e.imgwidth-200)/o,i=e.imgheight/n;n*t>e.imgheight?(e.h=e.imgheight,e.w=o*i):(e.w=e.imgwidth-200,e.h=n*t)}else e.w=o,e.h=n;else if(n>o)if(n>e.imgheight){i=e.imgheight/n;e.w=o*i,e.h=e.imgheight}else e.w=o,e.h=n;else if(o>e.imgheight&&n>e.imgheight){var s=e.imgheight/n;e.w=o*s,e.h=e.imgheight}else e.w=o,e.h=n;e.isload=!0,e.sideLeft=(e.imgwidth-200-e.w)/2,e.sideTop=(e.imgheight-e.h)/2,e.$Spin.hide()}},moveUp:function(t){console.log("this.downY==>"+this.downY),console.log("this.downX==>"+this.downX),console.log(t.clientX);var e=Math.sqrt((this.downX-t.clientX)*(this.downX-t.clientX)+(this.downY-t.clientY)*(this.downY-t.clientY));console.log(e),0==e&&this.addMark(t)},moveBox:function(t){t.preventDefault(),this.downX=t.clientX,this.downY=t.clientY;var e=this.$refs.img2,i=this.$refs.mainbox;e.style.cursor="move";var s=i.getBoundingClientRect().left,a=i.getBoundingClientRect().top,n=t.clientX-s,o=t.clientY-a;document.onmousemove=function(t){return i.style.left=t.clientX-n-document.querySelector(".leftSide").getBoundingClientRect().right+"px",i.style.top=t.pageY-o+"px",!1},document.onmouseup=function(){e.style.cursor="default",document.onmousemove=null}},checkCat:function(t,e){if(1!=this.piontStatuts||0!=this.ispreview){var i=t.id;if(this.ispreview)if(this.previewIndex==e)this.previewIndex=-1,this.$store.commit("setNowFloor",this.ispreviewData);else{this.previewIndex=e,this.ispreviewData||(this.ispreviewData=JSON.parse(w()(this.$store.state.nowLayer)));var s=JSON.parse(w()(this.ispreviewData)),a=JSON.parse(w()(this.$store.state.nowLayer)),n=s.icon.filter(function(t){return t.parent_id==i?t:855==i&&907==t.parent_id?t:851==i&&890==t.parent_id?t:void 0}),o=s.cate.filter(function(t){return t.parent_id==i||907==i?t:855==i&&907==t.parent_id?t:851==i&&890==t.parent_id?t:void 0});a.icon=n,a.cate=o,this.$store.commit("setNowFloor",a)}else this.childIndex=null,this.indexChildren=-1,this.catIndex==e?this.catIndex=null:this.catIndex=e}else this.$Message.error("选产品模式下不能添加点位!")},selectCat:function(t,e,i){this.isShowJump=!1,this.selectCatData={id:t.id,src:t.image[0],srca:t.image1[0],srcb:t.image2[0],iconName:t.iconname,portnum:t.portnum?t.portnum:"",parent_id:t.parent_id,name:t.name},this.childIndex=e,this.isactive=-1,this.indexChildren=e},showroad:function(t,e){this.roadshow=t,this.isactive=-1},roadClick:function(t,e,i){this.isactive=e;var s=t.name,a=i.currentTarget.getAttribute("osrc"),n=i.currentTarget.getAttribute("osrca"),o=i.currentTarget.getAttribute("osrcb"),c=i.currentTarget.getAttribute("parentId"),r=s+(e+1)+"路",l=t.iconname+(e+1),d=e+1,u={src:a,id:i.currentTarget.getAttribute("otype"),name:r,iconName:l,portnum:d,srca:n,srcb:o,parent_id:c};this.selectCatData=u},floorVal:function(t){this.isactive=t,this.$store.commit("setFloorIndex",t),this.$store.commit("setNowFloor",this.$store.state.layerAll[t]),this.floorimg=this.$store.state.nowLayer.image,this.showFloorBox=!1},editorFloor:function(t){this.showAddWindow=!0,this.showMarsk=!0,this.editorName=t,this.staticFloor="修改楼层"!=t},closeFn:function(){this.showAddWindow=!1,this.showMarsk=!1}}},ee={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detailContent"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isRead,expression:"isRead"}],staticClass:"content flex",style:{width:t.imgwidth+"px",height:t.imgheight+"px"}},[i("div",{staticClass:"leftSide"},[i("div",{staticClass:"leftTop flex"},[i("div",{staticClass:"btn textLeft",on:{click:t.windowBack}},[i("span",{staticClass:"iconfont iconblue_pt1"}),t._v(" "),i("span",[t._v("退出编辑")])]),t._v(" "),t.nowLayer&&t.nowLayer.cate&&t.nowLayer.cate.length>0?i("router-link",{staticClass:"btn textRight",attrs:{to:{path:"/detailMap/nextStep",query:{id:this.$route.query.id}}}},[i("span",[t._v("下一步")]),t._v(" "),i("span",{staticClass:"iconfont iconblue_pt2"})]):t._e()],1),t._v(" "),i("div",{staticClass:"floorBox"},[i("div",{staticClass:"floorContent flex",on:{click:function(e){t.showFloorBox=!t.showFloorBox}}},[i("span",{staticClass:"floorTitle"},[t._v("楼层")]),t._v(" "),i("span",{staticClass:"floorName"},[t._v(t._s(t.nowLayer.layername?t.nowLayer.layername:"请选择楼层"))]),t._v(" "),i("span",{staticClass:"changeIcon iconfont iconswitcher_gray"})]),t._v(" "),i("div",{staticClass:"catBox"},[i("div",{staticClass:"catTop"},[i("span",{staticClass:"checkItem",class:{active:0==t.piontStatuts},on:{click:function(e){return t.swichPiont(0)}}},[t._v("添加点位")]),t._v(" "),i("span",[t._v("/")]),t._v(" "),i("span",{staticClass:"checkItem",class:{active:1==t.piontStatuts},on:{click:function(e){return t.swichPiont(1)}}},[t._v("选产品")]),t._v(" "),i("span",{staticClass:"iconfont iconswitcher_gray"})]),t._v(" "),i("div",{staticClass:"cartorgryConten",style:{height:t.imgheight-300+"px"}},t._l(t.category,function(e,s){return i("div",{staticClass:"item"},[i("div",{staticClass:"topTtle flex",class:{active:s==t.catIndex||s==t.previewIndex,disabledClass:e.isCheck},on:{click:function(i){return t.checkCat(e,s)}}},[i("span",{staticClass:"iconfont",class:"iconx-"+e.id}),t._v(" "),i("span",{staticClass:"cateName"},[t._v(t._s(e.name))]),t._v(" "),0==e.isCheck?i("span",{directives:[{name:"show",rawName:"v-show",value:e.num>0&&0==t.ispreview,expression:"item.num>0 && ispreview == false"}],staticClass:"add_count"},[t._v(t._s(e.num))]):t._e()]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:s==t.catIndex,expression:"index == catIndex"}],staticClass:"showChild"},[t._l(e.child,function(e,s){return""!=e.image&&1==e.codes?i("div",{staticClass:"childItem flex",class:{active:s==t.childIndex},on:{click:function(i){return t.selectCat(e,s,i)}}},[i("img",{staticClass:"stopSelect",attrs:{src:t.url+e.image,width:"24",height:"24"}}),t._v(" "),i("div",{staticClass:"tName stopSelect"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"tSum"},[t._v(t._s(e.num))])]):t._e()}),t._v(" "),i("div",{staticClass:"barJump"},[t._v("—    跳过点位添加    —")]),t._v(" "),t._l(e.child,function(e,s){return""==e.image&&3!=e.codes?i("div",[i("div",{staticClass:"t_list",class:{active:t.indexChildren==s},attrs:{id:e.id,parentId:e.parent_id},on:{click:function(i){return t.jumpPointAdd(s,e.id,e.name)}}},[i("div",{staticClass:"t_name"},[t._v(t._s(e.name))])])]):t._e()}),t._v(" "),"智能照明"==e.name?i("div",{staticClass:"type_switch"},[t._m(0,!0),t._v(" "),t._l(e.child,function(e,s){return 3==e.codes?i("div",{staticClass:"switch_main"},[i("div",{staticClass:"switch_title stopSelect flex",attrs:{id:e.id,name:e.name,iconname:e.iconname},on:{click:function(e){return t.showroad(s,e)}}},[i("span",[t._v(t._s(e.name))]),t._v(" "),i("span",{staticClass:"iconfont iconblueRight"}),t._v(" "),e.num>0?i("span",{staticClass:"count fr"},[t._v(t._s(e.num))]):t._e()]),t._v(" "),t.roadshow==s?i("div",{staticClass:"switch_title_list"},[i("div",{staticClass:"sw_list flex"},t._l(e.image,function(s,a){return i("div",{staticClass:"s_item",class:{active:t.isactive==a},attrs:{osrc:e.image[a],osrca:e.image1[a],osrcb:e.image2[a],otype:(913==e.id?"switch":"")||(914==e.id?"aiming":"")||(915==e.id?"vaiming":"")||(1025==e.id?"dali":""),parentId:"855"},on:{click:function(i){return t.roadClick(e,a,i)}}},[i("div",{staticClass:"s_img"},[i("img",{attrs:{src:t.url+s,width:"26",height:"26"}})]),t._v(" "),i("div",{staticClass:"s_name"},[t._v(t._s(a+1)+"路")])])}),0)]):t._e()]):t._e()})],2):t._e(),t._v(" "),"背景音乐"==e.name?i("div",{staticClass:"type_switch"},[t._m(1,!0),t._v(" "),i("div",{staticClass:"item_box"},t._l(e.child,function(e,s){return i("div",[""!=e.image&&3==e.codes?i("div",{staticClass:"t_list bgmusic flex",class:{active:t.indexChildren==s},on:{click:function(i){return t.selectCat(e,s,i)}}},[i("img",{attrs:{src:t.url+e.image,width:"24",height:"24"}}),t._v(" "),i("div",{staticClass:"t_name"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"t_sum"},[t._v(t._s(e.num))])]):t._e()])}),0)]):t._e()],2)])}),0)])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showFloorBox,expression:"showFloorBox"}],ref:"listBox",staticClass:"foor_list"},[i("div",{staticClass:"add_floor"},t._l(t.layerAll,function(e,s){return t.layerAll?i("div",{staticClass:"floor_list",class:{active:t.isactive==s}},[i("span",{staticClass:"ospan",on:{click:function(e){return t.floorVal(s)}}},[t._v(t._s(e.layername))]),t._v(" "),i("span",{staticClass:"close",on:{click:function(i){return t.deleteFn(s,e.floorid)}}})]):t._e()}),0),t._v(" "),i("div",{staticClass:"addBox"},[i("div",{staticClass:"add_btn",on:{click:function(e){return t.editorFloor("添加楼层")}}},[i("img",{attrs:{src:"/Template/pc/oneapp/Static/images/btn-amount-add-14-pt-gray-1.png"}}),t._v(" "),i("span",[t._v("添加")])]),t._v(" "),i("div",{staticClass:"editor",on:{click:function(e){return t.editorFloor("修改楼层")}}},[t._v("修改楼层名称")])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.addPointModel,expression:"addPointModel"}],staticClass:"iconsizeBox sizeCont flex"},[t._m(2),t._v(" "),t.useSize?[i("RadioGroup",{model:{value:t.size,callback:function(e){t.size=e},expression:"size"}},[i("Radio",{attrs:{value:"1",label:"20"}},[t._v("小")]),t._v(" "),i("Radio",{attrs:{value:"2",label:"25"}},[t._v("中")]),t._v(" "),i("Radio",{attrs:{value:"3",label:"30"}},[t._v("大")])],1)]:i("div",{staticClass:"nseBel"},[t._v("暂不可用")])],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showUncheckedStatic,expression:"showUncheckedStatic "}],staticClass:"iconsizeBox flex active"},[t._m(3),t._v(" "),i("div",{staticClass:"otherSelect flex"},[i("div",{staticClass:"sItem flex",class:{active:1==t.getCheck},on:{click:t.uncheckedPoint}},[i("div",{staticClass:"iconSelect"}),t._v(" "),i("div",{staticClass:"slectInfo"},[t._v("  仅显示未选产品的点位")])])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.addPointModel,expression:"addPointModel"}],staticClass:"iconsizeBox other flex"},[t._m(4),t._v(" "),i("div",{staticClass:"otherSelect flex"},[i("div",{staticClass:"sItem flex",class:{active:1==t.icontype},on:{click:function(e){return t.chooseIoncType(1,e)}}},[i("div",{staticClass:"iconSelect"}),t._v(" "),i("div",{staticClass:"slectInfo"},[t._v("黑白")])]),t._v(" "),i("div",{staticClass:"sItem flex",class:{active:2==t.icontype},on:{click:function(e){return t.chooseIoncType(2,e)}}},[i("div",{staticClass:"iconSelect"}),t._v(" "),i("div",{staticClass:"slectInfo"},[t._v("实物")])]),t._v(" "),i("div",{staticClass:"sItem flex",class:{active:3==t.icontype},on:{click:function(e){return t.scaleImg(3,e)}}},[i("div",{staticClass:"iconSelect"}),t._v(" "),i("div",{staticClass:"slectInfo"},[t._v("缩略图")])])])]),t._v(" "),i("div",{staticClass:"toolContent flex"},[i("label",{staticClass:"icon iconfont iconnormal3",attrs:{title:"上传"},on:{change:t.imgUpload}},[i("input",{staticStyle:{display:"none"},attrs:{type:"file",name:"file"}})]),t._v(" "),i("i",{staticClass:"icon iconfont iconnormal",class:{active:t.ispreview},attrs:{title:"预览"},on:{click:t.showBtn}}),t._v(" "),i("i",{staticClass:"icon iconfont iconnormal4",attrs:{title:"删除"},on:{click:t.deleteBtn}}),t._v(" "),i("i",{ref:"checkBtn",staticClass:"icon iconfont iconnormal1 checkGoods stopSelect",attrs:{title:"已选商品"},on:{click:t.showSelectGoods}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.sum>0,expression:"sum > 0"}],staticClass:"stopSelect"},[t._v(t._s(t.sum))])])])]),t._v(" "),t.nowLayer?t._e():i("div",{staticClass:"tipsItem"},[t._m(5)]),t._v(" "),t.nowLayer?t._e():i("div",{staticClass:"tipsItem change"},[t._m(6)]),t._v(" "),t.nowLayer&&t.nowLayer.cate&&t.nowLayer.cate.length>0?i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.piontStatuts,expression:"piontStatuts==0"}],ref:"dg",staticClass:"drag",attrs:{id:"dg"},on:{mousedown:t.mousedownHe,mouseup:t.mup}},[t.list?i("div",{staticClass:"map_list"},[i("div",{staticClass:"title"},[t._v("已放置点位 "),i("span",{staticClass:"sale_btn",on:{click:t.close}},[i("i",{staticClass:"icon iconfont icongraySub1"})])]),t._v(" "),i("div",{staticClass:"add_all",style:"max-height:"+(t.imgheight-150)+"px"},[t.nowLayer?i("div",{staticClass:"cont flex"},t._l(t.nowLayer.cate,function(e,s){return i("div",{staticClass:"item"},[i("span",{staticClass:"type_item"},[t._v(t._s(e.iconname))]),t._v(" "),i("span",{staticClass:"type_name"},[t._v(t._s(e.name))]),t._v(" "),i("span",{staticClass:"type_count"},[t._v(t._s(e.num))])])}),0):i("div",{staticClass:"cont text-tips"},[t._v("\n                        没有添加的点位\n                    ")])])]):t._e(),t._v(" "),t.showAdd?i("div",{staticClass:"show_btn",on:{click:t.closeAdd}},[i("i",{staticClass:"icon iconfont iconreveal"})]):t._e()]):t._e(),t._v(" "),i("div",{staticClass:"rightSide"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.nowLayer.image,expression:"!nowLayer.image"}],staticClass:"tipsC"},[i("label",{staticClass:"icon iconfont iconlineDark"},[i("input",{staticStyle:{display:"none"},attrs:{type:"file",name:"file",id:""},on:{change:t.imgUpload}})]),t._v(" "),i("span",{staticClass:"tipsText"},[t._v("添加图片")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.nowLayer.image,expression:"nowLayer.image"}],ref:"mainbox",staticClass:"imgbox",style:{height:t.h+"px",width:t.w+"px",left:t.sideLeft+"px",top:t.sideTop+"px"},attrs:{id:"hg"},on:{mouseup:t.moveUp}},[i("div",{staticClass:"maskpb",on:{mousedown:t.moveBox}}),t._v(" "),t.nowLayer.image?i("img",{ref:"img2",attrs:{id:"oimg",src:t.url+t.nowLayer.image,alt:"",width:t.w,height:t.h},on:{load:t.imgload}}):t._e(),t._v(" "),t.nowLayer?i("div",{directives:[{name:"show",rawName:"v-show",value:t.isload,expression:"isload"}],staticClass:"conentIcon"},["image"==t.goodstype?i("div",{staticClass:"jcontent"},t._l(t.nowLayer.icon,function(e,s){return i("img",{key:s,staticClass:"iconPOsition",style:{top:e.posy*t.h-t.size/2+"px",left:e.posx*t.w-t.size/2+"px"},attrs:{src:t.url+e.image,width:t.size,portid:e.portid,typeid:e.onegoodscategoryid,iconid:e.iconid,pointid:e.pointid,height:t.size,iconname:e.iconname,"data-x":e.posx,"data-y":e.posy,prarentId:e.parent_id},on:{mousedown:t.moveIcons,mouseup:t.mouseUp}})}),0):"image1"==t.goodstype?i("div",{staticClass:"jcontent"},t._l(t.nowLayer.icon,function(e,s){return i("img",{key:s,staticClass:"iconPOsition",style:{top:e.posy*t.h-t.size/2+"px",left:e.posx*t.w-t.size/2+"px"},attrs:{src:t.url+e.image1,width:t.size,portid:e.portid,typeid:e.onegoodscategoryid,iconid:e.iconid,pointid:e.pointid,height:t.size,iconname:e.iconname,"data-x":e.posx,"data-y":e.posy,prarentId:e.parent_id},on:{mousedown:t.moveIcons,mouseup:t.mouseUp}})}),0):"image3"==t.goodstype?i("div",{staticClass:"jcontent"},t._l(t.nowLayer.icon,function(e,s){return i("img",{key:s,staticClass:"iconPOsition",staticStyle:{border:"2px solid #12a4c3"},style:{top:e.posy*t.h-t.size/2+"px",left:e.posx*t.w-t.size/2+"px"},attrs:{src:t.url+e.image3,width:"30",portid:e.portid,typeid:e.onegoodscategoryid,iconid:e.iconid,pointid:e.pointid,height:"30",iconname:e.iconname,"data-x":e.posx,"data-y":e.posy,prarentId:e.parent_id,onerror:"javascript:this.src='/Template/pc/oneapp/Static/images/disImg.png';"},on:{mousedown:t.moveIcons,mouseup:t.mouseUp}})}),0):i("div",{staticClass:"jcontent"},t._l(t.nowLayer.icon,function(e,s){return i("img",{key:s,staticClass:"iconPOsition",style:{top:e.posy*t.h-t.size/2+"px",left:e.posx*t.w-t.size/2+"px"},attrs:{src:t.url+e.image2,width:"25",portid:e.portid,typeid:e.onegoodscategoryid,iconid:e.iconid,pointid:e.pointid,height:"25",iconname:e.iconname,"data-x":e.posx,"data-y":e.posy,prarentId:e.parent_id},on:{mousedown:t.moveIcons,mouseup:t.mouseUp}})}),0)]):t._e(),t._v(" "),t.nowLayer.marks&&0==t.nowLayer.marks.hide?t._l(t.nowLayer.marks.marks,function(e,s){return i("span",[14==e.type?i("span",{staticStyle:{position:"absolute","transform-origin":"left bottom"},style:{top:e.info.y*t.h-t.w*e.info.r-4+"px",left:e.info.x*t.w-4+"px",transform:"rotate("+e.info.a*(180/Math.PI)+"deg)"}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:e.info.r*t.w+2,height:e.info.r*t.w+2}},[i("path",{staticStyle:{"stroke-width":"4"},attrs:{d:["M1 "+e.info.r*t.w+" L1 1 A"+e.info.r*t.w+" "+e.info.r*t.w+" 0 0 1 "+e.info.r*t.w+" "+e.info.r*t.w+"  Z"],fill:"none",stroke:"rgb("+e.color+")","stroke-dasharray":"8 4"}})])]):t._e(),t._v(" "),11==e.type?i("span",{staticStyle:{position:"absolute","transform-origin":"left bottom"},style:{top:e.info.y*t.h-t.h*e.info.h/2+"px",left:e.info.x*t.w-t.w*e.info.w/2+"px",transform:"rotate("+e.info.a*(180/Math.PI)+"deg)"}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:e.info.w*t.w,height:e.info.h*t.h}},[i("rect",{staticStyle:{fill:"none","stroke-width":"4px"},style:{stroke:"rgb("+e.color+")"},attrs:{width:e.info.w*t.w,height:e.info.h*t.h}})])]):t._e(),t._v(" "),12==e.type||15==e.type?i("span",{staticStyle:{position:"absolute","transform-origin":"left bottom"},style:{top:e.info.y*t.h-t.w*e.info.w/2+"px",left:e.info.x*t.w-t.h*e.info.h/2+"px",transform:"rotate("+e.info.a*(180/Math.PI)+"deg)"}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:e.info.w*t.w+8,height:e.info.h*t.h+8}},[12==e.type?i("ellipse",{staticStyle:{"stroke-width":"4"},attrs:{cx:e.info.w/2*t.w+4,cy:e.info.h/2*t.h+4,rx:e.info.w/2*t.w,ry:e.info.h/2*t.h,fill:"none",stroke:"rgb("+e.color+")"}}):t._e(),t._v(" "),15==e.type?i("ellipse",{staticStyle:{"stroke-width":"4"},attrs:{cx:e.info.w/2*t.w+4,cy:e.info.h/2*t.h+4,rx:e.info.w/2*t.w,ry:e.info.h/2*t.h,fill:"none",stroke:"rgb("+e.color+")","stroke-dasharray":"4 5"}}):t._e()])]):t._e(),t._v(" "),10==e.type?i("span",{staticStyle:{position:"absolute","transform-origin":"left bottom"},style:{top:e.info.y*t.h+"px",left:e.info.x*t.w+"px"}},[i("span",{style:{color:"rgb("+e.color+")"}},[i("pre",{staticStyle:{"line-height":"1.75",margin:"0",padding:"0","font-size":"inherit"}},[t._v(t._s(e.info.text))])])]):t._e(),t._v(" "),13==e.type?i("span",{staticStyle:{position:"absolute","transform-origin":"left bottom",top:"0",left:"0"},on:{mousedown:t.moveBox}},[i("Arrow",{attrs:{imgwidth:t.w,h:e.info.y2-e.info.y1,imgheight:t.h,x1:e.info.x1,y1:e.info.y1,x2:e.info.x2,y2:e.info.y2,canvas_id:"canvas_id"+s,color:e.color,data:e}})],1):t._e()])}):t._e()],2),t._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:t.nowLayer.image,expression:"nowLayer.image"}],staticClass:"readImgBtn",attrs:{src:"/Template/pc/oneapp/Static/images/btn-description-zoomin.png",alt:""},on:{click:t.iconhide}}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.nowLayer.image,expression:"nowLayer.image"}],staticClass:"iconfont iconhide_blue",class:{active:t.showDiyPoint},on:{click:t.showDiy}})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showMarsk,expression:"showMarsk"}],staticClass:"marsk"}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showAddWindow,expression:"showAddWindow"}],ref:"cont",staticClass:"add_floor_marsk"},[i("div",{staticClass:"add_tile"},[t._v(t._s(t.editorName)),i("i",{staticClass:"icon iconfont iconred_pt",on:{click:t.closeFn}})]),t._v(" "),i("div",{staticClass:"add_name"},[i("input",{ref:"inputVal",staticClass:"name_input_text",attrs:{type:"text",name:"",placeholder:"请输入楼层名称"}})]),t._v(" "),i("div",{staticClass:"floor_confirn_btn",on:{click:t.confirmFn}},[t._v("确定")])]),t._v(" "),t.showG?i("div",{staticClass:"list showbox"},[i("div",{staticClass:"showAll",style:{height:t.imgheight-100+"px"}},[i("div",{staticClass:"title"},[t._v("已选商品"),i("i",{staticClass:"close icon iconfont iconred_pt",on:{click:function(e){t.showG=!1}}})]),t._v(" "),i("div",{staticClass:"listItem",style:{height:t.imgheight-200+"px"}},t._l(t.selectedGoodsList,function(e,s){return null!=e?i("div",[i("div",{staticClass:"typeBar"},[i("i",{staticClass:"icon iconfont ",class:"iconx-"+e.id}),t._v(" "+t._s(e.name))]),t._v(" "),t._l(e.goods,function(s){return i("div",{staticClass:"box",staticStyle:{"margin-bottom":"2px"},on:{click:function(i){return t.showDetail(e)}}},[i("div",{staticClass:"item",staticStyle:{"margin-bottom":"0"}},[i("div",{staticClass:"imgCont"},[i("img",{attrs:{src:t.url+s.original_img,alt:""}})]),t._v(" "),i("div",{staticClass:"intro"},[i("div",{staticClass:"introTitle"},[i("div",{staticClass:"goodsTitle"},[i("div",{staticClass:"checkTitle"},[t._v(t._s(s.goods_name))]),t._v(" "),i("div",{staticClass:"sum"},[t._v("x"+t._s(s.num))])]),t._v(" "),s.typenum?i("div",{staticClass:"modle"},[t._v(t._s(s.typenum))]):t._e()]),t._v(" "),i("div",{staticClass:"price"},[i("div",{staticClass:"brand"},[i("span",{staticClass:"brandSpan"},[t._v(t._s(s.brand))])]),t._v(" "),i("div",{staticClass:"detailPrice"},[t._v(t._s(s.price))])])])]),t._v(" "),s.parts?i("div",{staticClass:"partBoxItem"},[i("div",{staticClass:"partTitle"},[t._v(" 配件")]),t._v(" "),i("div",{staticClass:"mainCon"},t._l(s.parts,function(e){return i("div",{staticClass:"touchParts"},[i("div",{staticClass:"titleParts"},[t._v(t._s(e.goods_name))]),t._v(" "),i("div",{staticClass:"sum"},[t._v(" x"+t._s(e.num)+" "),e.belt_throughput?i("span",[t._v("/"+t._s(e.belt_throughput))]):t._e()])])}),0)]):t._e()])})],2):t._e()}),0),t._v(" "),i("div",{staticClass:"closeBtn"},[i("router-link",{attrs:{to:{path:"/detailMap/nextStep",query:{id:this.$route.query.id}}}},[i("span",[t._v("下一步")])])],1)])]):t._e(),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showSelectToast,expression:"showSelectToast"}],staticClass:"partDetail"},[i("div",{staticClass:"conte_bg"},[i("div",{staticClass:"title"},[t._v("\n                    "+t._s(t.shoiwname)+"\n                    "),i("svg",{staticClass:"icon",attrs:{t:"1567580619029",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2709",width:"18",height:"18"},on:{click:function(e){t.showSelectToast=!1}}},[i("path",{attrs:{d:"M583.168 523.776L958.464 148.48c18.944-18.944 18.944-50.176 0-69.12l-2.048-2.048c-18.944-18.944-50.176-18.944-69.12 0L512 453.12 136.704 77.312c-18.944-18.944-50.176-18.944-69.12 0l-2.048 2.048c-19.456 18.944-19.456 50.176 0 69.12l375.296 375.296L65.536 899.072c-18.944 18.944-18.944 50.176 0 69.12l2.048 2.048c18.944 18.944 50.176 18.944 69.12 0L512 594.944 887.296 970.24c18.944 18.944 50.176 18.944 69.12 0l2.048-2.048c18.944-18.944 18.944-50.176 0-69.12L583.168 523.776z","p-id":"2710",fill:"#fff"}})])]),t._v(" "),i("div",{staticClass:"contentDtail"},[i("iframe",{attrs:{src:t.showimg}})])])]),t._v(" "),t.isShowJump?i("jumpPoint",{attrs:{ids:t.jumpId,catName:t.jumpName},on:{closeJump:function(e){t.isShowJump=!1}}}):t._e(),t._v(" "),1==t.piontStatuts?i("accessoriesList"):t._e(),t._v(" "),t.checkedProduct?i("typeCatgory",{attrs:{ids:t.iconId,checkedProduct:t.checkedProduct},on:{changeData:t.sGoods,canselPoint:t.canselPoint,showSelectG:t.showparts,showproduct:function(e){t.checkedProduct=!1}}}):t._e()],1),t._v(" "),t.addGoods?i("div",{staticClass:"addProject_bg"},[i("div",{staticClass:"mainAdd"},[i("div",{staticClass:"title"},[t._v("标题"),i("span",{staticClass:"iconfont iconred_pt",on:{click:function(e){t.addGoods=!1}}})]),t._v(" "),i("div",{staticClass:"contCenterTop"},[i("p",{staticClass:"info"},[t._v("直接关联配件（默认）")]),t._v(" "),t._m(7),t._v(" "),t._l(t.partsData.goods_ids1,function(e){return i("div",{staticClass:"listCont"},[i("div",{staticClass:"itemName"},[t._v(t._s(e.goods_name)),i("span",{staticClass:"brand"},[t._v(t._s(e.name))])]),t._v(" "),i("div",{staticClass:"itemModel"},[t._v(t._s(e.typenum))]),t._v(" "),e.belt_throughput?i("div",{staticClass:"itemSum"},[t._v(t._s(e.goods_num)+"/"+t._s(e.belt_throughput))]):i("div",{staticClass:"itemSum"},[t._v(t._s(e.goods_num))]),t._v(" "),i("div",{staticClass:"itemPrice colorPrice"},[t._v("￥"+t._s(e.shop_price))]),t._v(" "),i("div",{staticClass:"itemCount flex"},[e.belt_throughput?i("span",{staticStyle:{flex:"1"}}):i("span",{staticStyle:{flex:"1"}},[t._v("￥"+t._s(e.total_price))]),t._v(" "),i("span",{staticClass:"detaiMark",on:{click:function(i){return t.showParstDetail(e)}}},[t._v("详情"),i("span",{staticClass:"iconfont iconblue1"})])])])}),t._v(" "),i("div",{staticClass:"line"}),t._v(" "),i("p",{staticClass:"info "},[t._v("直接关联配件（可选）")]),t._v(" "),t._l(t.partsData.goods_ids2,function(e){return i("div",{staticClass:"listCont"},[i("div",{staticClass:"itemName"},[i("input",{staticClass:"checkparst",attrs:{type:"checkbox",name:""},domProps:{value:e.goods_id}}),t._v(" "+t._s(e.goods_name)),i("span",{staticClass:"brand"},[t._v(t._s(e.name))])]),t._v(" "),i("div",{staticClass:"itemModel"},[t._v(t._s(e.typenum))]),t._v(" "),i("div",{staticClass:"itemSum flex"},[i("div",{staticClass:"countBox"},[i("input",{staticClass:"oinput",attrs:{type:"text",readonly:""},domProps:{value:e.goods_num}}),t._v(" "),i("div",{staticClass:"addDiv"},[i("div",{staticClass:"btn btnUp",on:{click:function(i){return t.portAdd(e)}}}),t._v(" "),i("div",{staticClass:"btn btnDown",on:{click:function(i){return t.portReduce(e)}}})])]),t._v(" "),e.belt_throughput?i("div",[t._v("  /  ")]):t._e(),t._v(" "),e.belt_throughput?i("div",[t._v(t._s(e.belt_throughput))]):t._e()]),t._v(" "),i("div",{staticClass:"itemPrice colorPrice"},[t._v("￥"+t._s(e.shop_price))]),t._v(" "),i("div",{staticClass:"itemCount flex"},[i("span",{staticStyle:{flex:"1"}},[e.belt_throughput?t._e():i("span",[t._v("￥")]),t._v(" "),e.belt_throughput?t._e():i("span",[t._v(t._s(e.goods_num?e.shop_price*e.goods_num:e.shop_price))])]),t._v(" "),i("span",{staticClass:"detaiMark",on:{click:function(i){return t.showParstDetail(e)}}},[t._v("详情"),i("span",{staticClass:"iconfont iconblue1"})])])])})],2),t._v(" "),i("div",{staticClass:"confirmBtn",on:{click:t.confirmCheck}},[t._v("确认")])])]):t._e(),t._v(" "),t.showToastParts?i("portsDtail",{attrs:{showimg:t.Oimg,shoiwname:t.Oname},on:{closeParts:function(e){t.showParts=!t.showParts}}}):t._e(),t._v(" "),t.addGoods?i("div",{staticClass:"marsk",class:{active:0==t.nowLayer.marks.hide}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"otitle"},[e("div",{staticClass:"switch_tips flex"},[e("div",[this._v("—")]),this._v(" "),e("div",{staticClass:"info"},[this._v("以下图标请根据实际需求放置点位")]),this._v(" "),e("div",[this._v("—")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"otitle"},[e("div",{staticClass:"switch_tips flex"},[e("div",[this._v("—")]),this._v(" "),e("div",{staticClass:"info"},[this._v("以下图标请根据实际需求放置点位")]),this._v(" "),e("div",[this._v("—")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"iconName"},[e("div",{staticClass:"word"},[this._v("尺")]),this._v(" "),e("div",{staticClass:"word"},[this._v("寸")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"iconName"},[e("div",{staticClass:"word"},[this._v("显")]),this._v(" "),e("div",{staticClass:"word"},[this._v("示")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"iconName"},[e("div",{staticClass:"word"},[this._v("其")]),this._v(" "),e("div",{staticClass:"word"},[this._v("他")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cont flex"},[e("img",{attrs:{src:"/Template/pc/oneapp/Static/images/icon-arrow-left.png",alt:"",width:"28",height:"16"}}),this._v(" "),e("div",{staticClass:"info"},[this._v("点这里切换楼层")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cont flex"},[e("img",{attrs:{src:"/Template/pc/oneapp/Static/images/icon-arrow-left.png",alt:"",width:"28",height:"16"}}),this._v(" "),e("div",{staticClass:"info"},[this._v("点这里切换模式")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"listCont"},[i("div",{staticClass:"itemName"}),t._v(" "),i("div",{staticClass:"itemModel grayColor"},[t._v("型号")]),t._v(" "),i("div",{staticClass:"itemSum grayColor"},[t._v("数量")]),t._v(" "),i("div",{staticClass:"itemPrice grayColor"},[t._v("单价")]),t._v(" "),i("div",{staticClass:"itemCount grayColor"},[t._v("汇总")])])}]};var ie=s("VU/8")(te,ee,!1,function(t){s("aH1E")},"data-v-32c0ad62",null).exports,se={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"product"},[i("div",{staticClass:"p_title"},[t._v("占用口总汇")]),t._v(" "),i("div",{staticClass:"p_content"},[i("input",{attrs:{type:"hidden",name:""},domProps:{value:t.catAll}}),t._v(" "),t.showTitle?i("div",[t._m(0),t._v(" "),i("div",{staticClass:"main",style:"height:"+(t.imgheight-320)+"px"},t._l(t.catAll,function(e){return e.hold>0?i("div",{staticClass:"p_list"},[i("div",{staticClass:"p_cat"},[t._v("\n\t\t\t\t\t"+t._s(e.name)+t._s(e.fill)+"\n\t\t\t\t\t"),1==e.fill?i("span",{staticClass:"iconfont iconblue3"}):t._e()]),t._v(" "),t._l(e.mouth,function(e){return e.hold>0?i("div",{staticClass:"item",class:{active:e.mname==t.iconName},on:{click:function(i){return t.showCat(e)}}},[i("div",{staticClass:"item_name"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"sum"},[t._v(t._s(e.hold?e.hold:0)+"/"+t._s(e.output?e.output:0))])]):t._e()})],2):t._e()}),0)]):i("div",{staticStyle:{"text-align":"center"},style:(t.imgheight,"line-height:"+(t.imgheight-300)+"px")},[t._v("\n\t\t无占用口\n\t")]),t._v(" "),i("div",{staticClass:"allProduct"},[i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.goAnchor("0")}}},[t._v("全部附属产品")])]),t._v(" "),i("div",{staticClass:"p_allList"},[i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.goAnchor("922")}}},[t._v("跳转配件列表")])]),t._v(" "),i("div",{staticClass:"checkProduct",on:{click:t.showProduct}},[i("span",{staticClass:"iconfont"},[t._v("")]),t._v("\n\t\t已选附属产品("+t._s(t.sumFn)+")\n\t\t"),t.isShowSatus?t._e():i("span",{staticClass:"iconfont"},[t._v("")]),t._v(" "),t.isShowSatus?i("span",{staticClass:"iconfont"},[t._v("")]):t._e()])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"p_tips"},[e("span",{staticClass:"name"},[this._v("名称")]),this._v(" "),e("span",{staticClass:"s_port"},[this._v("占用/提供接口")])])}]};var ae=s("VU/8")({data:function(){return{typePort:null,iconName:null,showTitle:!1}},components:{},props:["isShowSatus"],computed:{catAll:function(){var t=this,e=this.$store.state.portData;return this.showTitle=!1,e&&e.forEach(function(e){e.output=0,e.hold=0,e.mouth.forEach(function(t){e.output+=t.output,e.hold+=t.hold});for(var i=0;i<e.mouth.length;i++){if(e.mouth[i].hold>e.mouth[i].output){e.fill=0;break}e.fill=1}e.hold>0&&(t.showTitle=!0)}),e},sumFn:function(){var t=this.$store.state.Igoods,e=0;return t&&t.forEach(function(t){t.goods.forEach(function(t){e+=t.num})}),e}},methods:{showProduct:function(){this.$emit("showMak"),this.deretion=!this.deretion},goAnchor:function(t){this.$emit("BackScrollTop",t)},showCat:function(t){var e="";this.iconName==t.mname?(this.iconName=null,e=!1):(this.iconName=t.mname,e=t.mname),this.$emit("checkCat",e)}}},se,!1,function(t){s("Zp2g")},"data-v-9af55642",null).exports,ne={data:function(){return{isconfirm:!1,dataObj:null,focusDataHold:null,focusDataOutput:null,userInfo:null}},props:["typeData"],created:function(){this.userInfo=this.storage.getSession("usreInfo")},computed:{goodsData:function(){return this.$store.state.Igoods}},components:{confirm:confirm},methods:{confirm:function(t){var e=this;this.dataObj=t,this.$Modal.confirm({title:"提示",content:"是否删除该商品？",onOk:function(){var i=t.g_id,s=e.$store.state.Igoods,a=t.hold,n=t.output,o=e.typeData;s.forEach(function(t){t.goods.forEach(function(e,s){e.g_id==i&&t.goods.splice(s,1)})}),e.deletPortTotal(a,n,o),e.changeNum(0,i)},onCancel:function(){}})},confrimBack:function(t){if(t){var e=this.dataObj.g_id,i=this.$store.state.Igoods,s=this.dataObj.hold,a=this.dataObj.output,n=this.typeData;i.forEach(function(t){t.goods.forEach(function(i,s){i.g_id==e&&t.goods.splice(s,1)})}),this.deletPortTotal(s,a,n),this.changeNum(0,e)}this.isconfirm=!1},deletPortTotal:function(t,e,i){var s=this,a=this.$store.state.portData;t&&t.forEach(function(t,e){a.forEach(function(e,i){e.mouth.forEach(function(e){e.mname==t.id&&(e.hold-=t.val*s.dataObj.num)})})}),e&&e.forEach(function(t,e){a.forEach(function(e,i){e.mouth.forEach(function(e){e.mname==t.id&&(e.output-=t.val*s.dataObj.num)})})});var n=this.dataObj;i.forEach(function(t){t.goods.forEach(function(t){t.g_id==n.g_id&&(t.num=0)})})},reduce:function(t){var e=this.$store.state.Igoods,i=this.$store.state.portData,s=this.typeData,a=t.g_id,n=t.hold,o=t.output,c=0;e.forEach(function(t){t.goods.forEach(function(e,s){e.g_id==a&&(e.num-=1,0==e.num&&t.goods.splice(s,1),n&&n.forEach(function(t){i.forEach(function(e){e.mouth.forEach(function(e){t.id==e.mname&&(e.hold-=parseInt(t.val))})})}),o&&o.forEach(function(t){i.forEach(function(e){e.mouth.forEach(function(e){t.id==e.mname&&(e.output-=parseInt(t.val))})})}),c=Math.max(0,e.num))})}),s.forEach(function(t){t.goods.forEach(function(t){t.g_id==a&&t.num>0&&(t.num-=1)})}),this.changeNum(c,a)},add:function(t){var e=this.$store.state.Igoods,i=this.typeData,s=t.hold,a=t.output,n=t.g_id,o=0;e.forEach(function(t){t.goods.forEach(function(t){t.g_id==n&&(t.num+=1,o=t.num)})}),this.portToal(s,a),i.forEach(function(t){t.goods.forEach(function(t){t.g_id==n&&(t.num+=1)})}),this.changeNum(o,n)},portToal:function(t,e){var i=this.$store.state.portData;t&&t.forEach(function(t){i.forEach(function(e){e.mouth.forEach(function(e){t.id==e.mname&&(e.hold+=parseInt(t.val))})})}),e&&e.forEach(function(t){i.forEach(function(e){e.mouth.forEach(function(e){t.id==e.mname&&(e.output+=parseInt(t.val))})})})},changeNum:function(t,e){var i=this;this.axios.post("index.php?m=Api&c=project&a=projectProductedit",this.Qs.stringify({userId:this.userInfo.user_id,projectId:this.$route.query.id,pointIds:"",productInfoJson:w()({num:t,productid:e,defaultFittings:[],customFittings:[]})})).then(function(t){i.$Message.success(t.data.msg)}).catch(function(t){i.$Message.error(t)})},inputSumport:function(t,e){},saveNum:function(t){}},mounted:function(){}},oe={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"goodsContent"},[i("div",{staticClass:"g_title"},[t._v("已选附属产品")]),t._v(" "),i("div",{staticClass:"scrollBox",style:"height:"+(t.imgheight-71)+"px"},t._l(t.goodsData,function(e,s){return i("div",{staticClass:"contChck"},[e.goods.length>0?i("div",{staticClass:"barTitle"},[i("span",{staticClass:"iconfont",class:"icon-x-"+e.id}),t._v("\n          "+t._s(e.name)+"\n      ")]):t._e(),t._v(" "),t._l(e.goods,function(e,s){return e.num>0?i("div",{staticClass:"item"},[i("div",{staticClass:"boximg"},[i("img",{attrs:{src:e.product_img,alt:""}})]),t._v(" "),i("div",{staticClass:"cont"},[i("div",{staticClass:"name"},[i("div",{staticClass:"name_left"},[t._v(t._s(e.product_name))]),t._v(" "),i("div",{staticClass:"name_count"},[t._v("x"+t._s(e.num))])]),t._v(" "),i("div",{staticClass:"type type_no"},[t._v(t._s(e.typenum))]),t._v(" "),i("div",{staticClass:"type ty_border"},[i("span",[t._v(t._s(e.product_brandname))])])]),t._v(" "),i("div",{staticClass:"count"},[i("span",{staticClass:"iconfont",on:{click:function(i){return t.reduce(e)}}},[t._v("")]),t._v(" "),i("input",{attrs:{type:"text","data-val":e.num,readonly:""},domProps:{value:e.num},on:{blur:function(i){return t.inputSumport(e)},focus:function(i){return t.saveNum(e)}}}),t._v(" "),i("span",{staticClass:"iconfont",on:{click:function(i){return t.add(e)}}},[t._v("")])]),t._v(" "),i("span",{staticClass:"iconfont delete",on:{click:function(i){return t.confirm(e)}}},[t._v("")])]):t._e()})],2)}),0)])},staticRenderFns:[]};var ce=s("VU/8")(ne,oe,!1,function(t){s("Bt7X")},"data-v-1f74a6f7",null).exports,re={data:function(){return{typelist:null,oul:this.hosturl,brandIndex:null,saveData:null,showParts:!1,Oimg:null,Oname:null,selectData:null,goodsStu:!1,userInfo:null}},created:function(){this.userInfo=this.storage.getSession("usreInfo"),this.getMpoint(),this.getGoods()},components:{portsDtail:Kt,portTotal:ae,checkProduct:ce},methods:{checkPort:function(){var t=this,e=this.$store.state.portData,i=!1;if(e){for(var s=0;s<e.length;s++)if(0==e[s].fill){i=!0;break}i?this.$Modal.confirm({title:"提示",content:"有未满足占用口，是否继续报价？",okText:"继续报价",onOk:function(){t.$router.push({path:"/offer",query:{id:t.$route.query.id,opennames:4}})},onCancel:function(){}}):this.$router.push({path:"/offer",query:{id:this.$route.query.id,opennames:4}})}},backBtn:function(){window.history.go(-1)},checkList:function(t){var e=JSON.parse(w()(this.saveData));JSON.parse(w()(this.typelist));if(t){for(var i=[],s=0;s<e.length;s++)for(var a=0;a<e[s].goods.length;a++)if(e[s].goods[a].output)for(var n=0;n<e[s].goods[a].output.length;n++)if(e[s].goods[a].output[n].id==t){i.push(e[s]);break}s=0;for(var o=i.length;s<o;s++)for(a=s+1;a<o;a++)i[s]==i[a]&&(i.splice(a,1),o--,a--);e.forEach(function(t){"配件"==t.name&&i.push(t)}),this.typelist=i}else this.typelist=e},backScroll:function(t){if(0==t){this.$el.querySelector("top");this.$refs.listRight.scrollTop=0}else{var e=this.$el.querySelector("#p"+t);this.$refs.listRight.scrollTop=e.offsetTop}},getGoods:function(){var t=this;this.$Spin.show(),this.axios.post("/index.php?m=Api&c=project&a=ProjectAccessories",this.Qs.stringify({userId:this.userInfo.user_id,projectId:this.$route.query.id})).then(function(e){var i=e.data.result;i.forEach(function(t){t.brandCheck="全部",t.brand.length>0&&t.brand.unshift({id:0,name:"全部"})}),t.typelist=i,t.saveData=JSON.parse(w()(i)),t.$Spin.hide()}).catch(function(t){})},getMpoint:function(){var t=this;this.$Spin.show(),this.axios.post("/index.php?m=Api&c=project&a=getProjectHolds",this.Qs.stringify({userId:this.userInfo.user_id,projectId:this.$route.query.id})).then(function(e){var i=e.data;i.holds.forEach(function(t){t.mouth.forEach(function(e){t.hold+=e.hold,t.output+=e.output})}),t.$store.commit("totalPort",i.holds),t.$store.commit("selectProduct",i.products),t.$Spin.hide()}).catch(function(e){t.$Message.error(e)})},checkBrand:function(t){this.brandIndex=t},checkItem:function(t,e,i){var s=JSON.parse(w()(this.saveData)),a=JSON.parse(w()(this.typelist)),n=[];s.forEach(function(i){i.id==e&&i.goods.forEach(function(e,i){e.product_brandname==t?n.push(e):"全部"==t&&n.push(e)})}),a.forEach(function(i){i.id==e&&(i.brandCheck=t,i.goods=n)}),this.typelist=a,this.brandIndex=null},reduce:function(t,e){var i=JSON.parse(w()(this.$store.state.portData)),s=this.typelist,a=t.g_id,n=t.hold,o=t.output,c=0;s.forEach(function(t){t.goods.forEach(function(t){t.g_id==a&&(t.num>0&&(t.num-=1,n&&n.forEach(function(t){i.forEach(function(e){e.mouth.forEach(function(e){t.id==e.mname&&(e.hold-=parseInt(t.val))})})}),o&&o.forEach(function(t){i.forEach(function(e){e.mouth.forEach(function(e){t.id==e.mname&&(e.output-=parseInt(t.val))})})})),c=Math.max(0,t.num))})}),this.$store.commit("totalPort",i);var r=this.$store.state.Igoods;c>0?r.forEach(function(t){t.goods.forEach(function(t){a==t.g_id&&(t.num-=1)})}):0==c&&r.forEach(function(t){t.goods.forEach(function(e,i){a==e.g_id&&t.goods.splice(i,1)})}),this.changeNum(c,a)},add:function(t,e){var i=this.typelist,s=t.g_id,a=0,n=t.hold,o=t.output,c=JSON.parse(w()(this.$store.state.portData));n&&n.forEach(function(t){c.forEach(function(e){e.mouth.forEach(function(e){t.id==e.mname&&(e.hold+=parseInt(t.val))})})}),o&&o.forEach(function(t){c.forEach(function(e){e.mouth.forEach(function(e){t.id==e.mname&&(e.output+=parseInt(t.val))})})}),console.log(c),this.$store.commit("totalPort",c),i.forEach(function(t){t.goods.forEach(function(t){t.g_id==s&&(t.num++,a=t.num)})});for(var r=JSON.parse(w()(this.$store.state.Igoods)),l=e.parent_name,d=!1,u=0;u<r.length;u++)if(r[u].name==l){d=!0;break}var h=!1;d?(r.forEach(function(t){for(var e=0;e<t.goods.length;e++)if(t.goods[e].g_id==s){h=!0;break}}),r.forEach(function(i){h?i.goods.forEach(function(t){s==t.g_id&&(t.num+=1)}):i.id==e.parent_id&&i.goods.push({c_id:t.c_id,g_id:t.g_id,goods_content:t.goods_content,hold:t.hold,num:t.num,output:t.output,product_brand:t.product_brand,product_brandname:t.product_brandname,product_img:t.product_img,product_model:t.product_model,product_name:t.product_name,product_price:t.product_price,typenum:t.typenum})})):r.push({goods:[t],id:l,name:e.parent_name}),this.$store.commit("selectProduct",r),this.changeNum(a,s)},inputSum:function(t,e){},changeNum:function(t,e){var i=this;this.axios.post("index.php?m=Api&c=project&a=projectProductedit",this.Qs.stringify({userId:this.userInfo.user_id,projectId:this.$route.query.id,pointIds:"",productInfoJson:w()({num:t,productid:e,defaultFittings:[],customFittings:[]})})).then(function(t){1!=i.$store.state.msg&&i.$Message.success(t.data.msg)}).catch(function(t){i.$Message.error(t)})},showDetail:function(t){this.showParts=!0,this.Oimg=t.goods_content,this.Oname=t.product_name}}},le={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box"},[i("div",{staticClass:"largeTitle"},[i("span",{staticClass:"btnStep",on:{click:t.backBtn}},[i("span",{staticClass:"iconfont icongrayLeft"}),t._v("上一步")]),t._v("\n            附属产品选择 \n            "),t._v(" "),i("span",{staticClass:"next_btn send",on:{click:t.checkPort}},[t._v("\n                    下一步\n                    "),i("span",{staticClass:"iconfont icongrayRight"})])]),t._v(" "),i("div",{staticClass:"center_content"},[i("portTotal",{attrs:{isShowSatus:t.goodsStu},on:{showMak:function(e){t.goodsStu=!t.goodsStu},BackScrollTop:t.backScroll,checkCat:t.checkList}}),t._v(" "),i("div",{ref:"listRight",staticClass:"listRight",style:"height:"+(t.imgheight-60)+"px"},[i("div",{attrs:{id:"top"}}),t._v(" "),t._l(t.typelist,function(e,s){return e.goods.length>0?i("div",{staticClass:"contentBox",attrs:{id:"p"+e.id}},[i("div",{staticClass:"titleBar"},[t._v("\n                        "+t._s(e.name)+" \n                        "),i("div",{staticClass:"brand",on:{click:function(e){return t.checkBrand(s)}}},[t._v("\n                            筛选品牌: "),i("span",{staticClass:"all"},[t._v(t._s(e.brandCheck))]),t._v(" "),i("svg",{staticClass:"icon",attrs:{t:"1574412724080",viewBox:"0 0 1706 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5078",width:"16",height:"16"}},[i("path",{attrs:{d:"M853.338738 1024a99.498501 99.498501 0 0 1-75.093208-33.791944L31.92144 193.70805A112.981145 112.981145 0 0 1 0.006827 113.836184C0.006827 83.116235 10.588142 56.321613 31.750774 33.622984A99.498501 99.498501 0 0 1 106.673316 0.001707h1493.330844c29.013285 0 53.930577 11.263981 75.093208 33.791943A112.981145 112.981145 0 0 1 1706.670649 113.836184c0 30.719949-10.581316 57.343904-31.743947 79.871866L928.431946 990.208056A99.498501 99.498501 0 0 1 853.338738 1024z",fill:"#ffffff","p-id":"5079"}})])]),t._v(" "),t.brandIndex==s?i("div",{staticClass:"brandList"},t._l(e.brand,function(a){return i("div",{staticClass:"brandItem",on:{click:function(i){return t.checkItem(a.name,e.id,s)}}},[t._v(t._s(a.name))])}),0):t._e()]),t._v(" "),i("div",{staticClass:"content_goods"},t._l(e.goods,function(s){return i("div",{staticClass:"item_olist fl"},[i("div",{staticClass:"type"},[t._v(t._s(s.typenum))]),t._v(" "),i("div",{staticClass:"img",on:{click:function(e){return t.showDetail(s)}}},[i("img",{attrs:{src:s.product_img,alt:"",onerror:"javascript:this.src='/Template/pc/oneapp/Static/images/disImg.png';"}})]),t._v(" "),i("div",{staticClass:"goods_brand "},[i("span",[t._v(t._s(s.product_brandname))])]),t._v(" "),i("div",{staticClass:"goods_title "},[t._v(t._s(s.product_name))]),t._v(" "),i("div",{staticClass:"port"},[i("div",{staticClass:"port_tips"},[t._v("——— 提供口 ———")]),t._v(" "),t._l(s.output,function(e){return i("div",{staticClass:"port_list"},[t._v(t._s(e.name)+"   "+t._s(e.val))])})],2),t._v(" "),i("div",{staticClass:"item_price"},[t._v("￥"+t._s(s.product_price))]),t._v(" "),i("div",{staticClass:"total"},[i("span",{staticClass:"iconfont",on:{click:function(i){return t.reduce(s,e)}}},[t._v("")]),t._v(" "),i("input",{attrs:{type:"text","data-val":s.num,readonly:""},domProps:{value:s.num},on:{blur:function(i){return t.inputSum(s,e)}}}),t._v(" "),i("span",{staticClass:"iconfont",on:{click:function(i){return t.add(s,e)}}},[t._v("")])])])}),0)]):t._e()})],2),t._v(" "),t.goodsStu?i("div",{staticClass:"imaask",on:{click:function(e){t.goodsStu=!t.goodsStu}}}):t._e()],1),t._v(" "),t.showParts?i("portsDtail",{attrs:{showimg:t.Oimg,shoiwname:t.Oname},on:{closeParts:function(e){t.showParts=!t.showParts}}}):t._e(),t._v(" "),t.goodsStu?i("checkProduct",{attrs:{typeData:t.typelist}}):t._e()],1)},staticRenderFns:[]};var de=s("VU/8")(re,le,!1,function(t){s("jRSo")},"data-v-663d7627",null).exports,ue={data:function(){return{userInfo:"",visible:!0,cate:[],productsnum:0,totalcost:0,installtotal:0,debugtotal:0,productprice:0}},filters:{numFilter:function(t){var e=Number(t).toFixed(2);return Number(e)}},props:["settindata"],methods:{colseBtn:function(){this.visible=!1,this.$emit("closeFn",!1)}},created:function(){var t=this,e=this.settindata,i=this.storage.getSession("usreInfo");i.user_id;this.userInfo=i;var s=e.id,a=this;if(s){this.project_id=s,q.a.all([q.a.post(a.hosturl+"/index.php?m=Api&c=project&a=getProducts",a.Qs.stringify({user_id:i.user_id,project_id:s})),q.a.post(a.hosturl+"/index.php?m=Api&c=project&a=projectinfos",a.Qs.stringify({userId:i.user_id,projectId:s}))]).then(q.a.spread(function(e,i){var s=0,a=e.data.result,n=[],o=0,c=0,r=0;if(a)for(;s<a.length;s++){a[s].discountRate=a[s].discountRate?parseFloat(a[s].discountRate):100,a[s].installtotal=parseFloat(a[s].installtotal),a[s].debugtotal=parseFloat(a[s].debugtotal),a[s].threeSummaryTotal=parseFloat(a[s].ratetotal),a[s].threeSummaryTotal1=parseFloat(a[s].threeSummaryTotal),a[s].productprice=parseFloat(a[s].productprice),a[s].rate=parseFloat(a[s].rate),a[s].ratetotal=parseFloat(a[s].ratetotal);for(var l=a[s].project,d=0,u=0;u<l.length;u++)d+=parseFloat(l[u].cost_price*l[u].number);a[s].cost_price=d,r+=parseFloat(a[s].ratetotal),o+=parseFloat(a[s].installtotal),c+=parseFloat(a[s].debugtotal),n.push(a[s].id)}t.productprice=r,t.installtotal=o,t.debugtotal=c,t.cate=a;var h=0,_=0,p=0,v=i.data.products;if(v){for(;_<v.length;_++)h+=parseFloat(v[_].num),p+=parseFloat(v[_].cost_price*v[_].num);t.totalcost=p,t.productsnum=h}}))}}},he={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"ivu-modal-mask"}),t._v(" "),i("div",{staticClass:"body"},[i("div",{staticClass:"s_content"},[i("div",{staticClass:"s_title"},[i("div",{staticClass:"s_t_text",staticStyle:{width:"344px"}},[t._v("\n          项目成本\n        ")]),t._v(" "),i("i",{staticClass:"close icon iconfont iconred_pt",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.colseBtn()}}})]),t._v(" "),i("div",[t._m(0),t._v(" "),i("div",{staticClass:"ttitle"},[t._m(1),t._v(" "),i("div",{staticClass:"ttitle_text",staticStyle:{height:"30px"}},[i("div",{staticClass:"text-center ttitle_text_li"},[t._v(t._s(t.productsnum))]),t._v(" "),i("div",{staticClass:"text-center ttitle_text_li"},[t._v(t._s(t._f("numFilter")(t.productprice)))]),t._v(" "),i("div",{staticClass:"text-center ttitle_text_li"},[t._v(t._s(t._f("numFilter")(t.totalcost)))]),t._v(" "),i("div",{staticClass:"text-center ttitle_text_li"},[t._v(t._s(t._f("numFilter")(t.installtotal)))]),t._v(" "),i("div",{staticClass:"text-center ttitle_text_li",staticStyle:{"border-right":"none"}},[t._v(t._s(t._f("numFilter")(t.debugtotal)))])])]),t._v(" "),i("div",{staticClass:"ttitle",staticStyle:{"margin-top":"20px"}},[t._m(2),t._v(" "),t._l(t.cate,function(e,s){return i("div",{staticClass:"ttitle_text"},[i("div",{staticClass:"text-center ttitle_text_li",staticStyle:{width:"25%"}},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"text-center ttitle_text_li",staticStyle:{width:"25%"}},[t._v(t._s(t._f("numFilter")(e.threeSummaryTotal)))]),t._v(" "),i("div",{staticClass:"text-center ttitle_text_li",staticStyle:{width:"25%"}},[t._v(" "+t._s(t._f("numFilter")(e.cost_price)))]),t._v(" "),i("div",{staticClass:"text-center ttitle_text_li",staticStyle:{"border-right":"none",width:"25%"}},[t._v(" "+t._s(t._f("numFilter")((e.threeSummaryTotal-e.cost_price)/e.threeSummaryTotal*100))+" %")])])})],2)])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"size12 text-center"},[e("i",{staticClass:"icon iconfont iconhint_gray"}),this._v("\n          以下成本价格根据您后台上传的产品成本价计算，毛利率仅供参考。\n        ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ttitle_text",staticStyle:{background:"#EAEFF5"}},[i("div",{staticClass:"text-center ttitle_text_li"},[t._v("总产品数量")]),t._v(" "),i("div",{staticClass:"text-center ttitle_text_li"},[t._v("产品总价")]),t._v(" "),i("div",{staticClass:"text-center ttitle_text_li"},[t._v("产品总成本")]),t._v(" "),i("div",{staticClass:"text-center ttitle_text_li"},[t._v("安装费总计")]),t._v(" "),i("div",{staticClass:"text-center ttitle_text_li",staticStyle:{"border-right":"none"}},[t._v("调试费总计")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ttitle_text",staticStyle:{background:"#EAEFF5"}},[e("div",{staticClass:"text-center ttitle_text_li",staticStyle:{width:"25%"}},[this._v("分类")]),this._v(" "),e("div",{staticClass:"text-center ttitle_text_li",staticStyle:{width:"25%"}},[this._v("产品总价")]),this._v(" "),e("div",{staticClass:"text-center ttitle_text_li",staticStyle:{width:"25%"}},[this._v("产品成本价")]),this._v(" "),e("div",{staticClass:"text-center ttitle_text_li",staticStyle:{"border-right":"none",width:"25%"}},[this._v("毛利率")])])}]};var _e={name:"offer",data:function(){return{project_id:"",userInfo:"",discountRates:[],cate:[],otherCost:"",installtotal:"",debugtotal:"",valueAddedTaxRate:"",otherCostlist:"",itemset:"",leftmenushow:!1,t_menuid:"",leftmenuid:0,soll:"",infotype:0,settingshow:!1,settingdata:"",sendemaildata:"",sendemailshow:!1,opennames:3}},components:{Email:f,Cost:s("VU/8")(ue,he,!1,function(t){s("JfR1")},"data-v-07a36e06",null).exports},methods:{offers:function(){this.settingdata={id:this.project_id},this.settingshow=!this.settingshow},sendemail:function(t){this.sendemaildata={createtime:1564366e3,customeraddress:"地址2",customername:"她",customertelephone:"15123456789",functionarray:[],id:this.project_id,platformarray:"",projectname:"项目名称",projectstate:0,x_createtime:"2019.07.29"},this.sendemailshow=!this.sendemailshow},canceldleitem:function(){this.dleitemid=0,this.delitemkey=-1},closesendemail:function(){this.sendemailshow=!this.sendemailshow,this.sendemaildata=""},closeset:function(){this.settingshow=!this.settingshow,this.settingdata="",this.showcreated(this.project_id,this.userInfo)},info:function(t){this.infotype==t?this.infotype=0:this.infotype=t},back:function(){this.$router.back()},discountRate:function(t,e,i,s){var a=this.itemset,n=a.cate,o=s.target.value>0?s.target.value:1;if(parseFloat(a.mindiscount)>0){if(parseFloat(o)<parseFloat(a.mindiscount))return o=a.mindiscount,this.$Message.info("该分类最低折扣率为"+a.mindiscount+"%"),!1}else if(parseInt(n[t])>0&&parseFloat(n[t])>parseFloat(o))return o=n[t],this.$Message.info("该分类最低折扣率为"+o+"%"),!1;this.cate[e].discountRate=o,this.cate[e].threeSummaryTotal1=i*o/100,this.axios.post("/index.php?m=Api&c=project&a=projectDiscount",this.Qs.stringify({userId:this.userInfo.user_id,projectId:this.project_id,typeId:t,newRate:o}))},showmenu:function(t,e,i){if(t==this.leftmenuid)return this.leftmenuid=0,!1;this.leftmenushow=0==t,this.leftmenuid=t,this.leftmenushow=!0,0==this.soll?this.soll=0==this.soll?1:2:this.soll=1==this.soll?2:1},menuall:function(){this.leftmenuid=0},showcreated:function(t,e){var i=this,s=this;q.a.all([q.a.post(s.hosturl+"/index.php?m=Api&c=project&a=getProducts",s.Qs.stringify({user_id:e.user_id,project_id:t})),q.a.get(s.hosturl+"/index.php?m=Api&c=project&a=projectPriceSystem&projectId="+t+"&userId="+e.user_id),q.a.post(s.hosturl+"/index.php?m=Api&c=goods&a=goodsCategoryInfo",s.Qs.stringify({type:!0})),q.a.post(s.hosturl+"/index.php?m=Api&c=project&a=getProjectsystem",s.Qs.stringify({user_id:e.first_leader>0?e.first_leader:e.user_id}))]).then(q.a.spread(function(t,e,s,a){i.itemset=a.data.result;for(var n=t.data.result,o=s.data.result,c=[],r=0;o.length>r;r++)844==o[r].parent_id&&c.push({id:o[r].id,name:o[r].name,cost_price:null,debugtotal:0,discountRate:null,installtotal:0,productprice:0,project:[],rate:0,ratetotal:0,threeSummaryTotal:0,threeSummaryTotal1:0,selected:!1});c.push({id:922,name:"配件",cost_price:null,debugtotal:0,discountRate:null,installtotal:0,productprice:0,project:[],rate:0,ratetotal:0,threeSummaryTotal:0,threeSummaryTotal1:0,selected:!1});var l=[],d=0,u=0,h=e.data.debugCost,_=e.data.installCost;for(r=0;r<n.length;r++)for(var p=0;p<c.length;p++)if(n[r].id==c[p].id){var v=_.eachTypeCost;if(v.length<=0)c[p].iallTypeRate=_.allTypeRate,c[p].icanDiscount=_.canDiscount,c[p].ifixedCost="",c[p].itype=1;else for(var m=0;m<v.length;m++)_.eachTypeCost[m].typeId==c[p].id&&(c[p].iallTypeRate=_.eachTypeCost[m].rate,c[p].icanDiscount=_.eachTypeCost[m].canDiscount,c[p].ifixedCost=_.eachTypeCost[m].fixedCost,c[p].itype=2);var f=h.eachTypeCost;if(f.length<=0)c[p].eallTypeRate=h.allTypeRate,c[p].ecanDiscount=h.canDiscount,c[p].efixedCost="",c[p].etype=1;else for(var g=0;g<f.length;g++)h.eachTypeCost[g].typeId==c[p].id&&(c[p].eallTypeRate=h.eachTypeCost[g].rate,c[p].ecanDiscount=h.eachTypeCost[g].canDiscount,c[p].efixedCost=h.eachTypeCost[g].fixedCost,c[p].etype=2);c[p].cost_price=n[r].cost_price,c[p].debugtotal=parseFloat(n[r].debugtotal),c[p].discountRate=n[r].discountRate?parseFloat(n[r].discountRate):100,c[p].installtotal=parseFloat(n[r].installtotal),c[p].productprice=parseFloat(n[r].productprice),c[p].project=n[r].project,c[p].rate=parseFloat(n[r].rate),c[p].ratetotal=parseFloat(n[r].ratetotal),c[p].threeSummaryTotal=parseFloat(n[r].ratetotal),c[p].selected=!0,c[p].threeSummaryTotal1=parseFloat(n[r].threeSummaryTotal),d+=parseFloat(n[r].installtotal),u+=parseFloat(n[r].debugtotal),l.push(n[r].id)}i.cate=c,i.installtotal=d,i.debugtotal=u;var y,C=0,x=e.data.otherCost;if(i.otherCostlist=x,x)for(y=0;y<x.length;y++)C+=parseFloat(x[y].cost)>0?parseFloat(x[y].cost):0;i.otherCost=C,i.installCost=e.data.installCost,i.valueAddedTaxRate=e.data.valueAddedTaxRate,i.debugCost=e.data.debugCost}))}},created:function(){var t=this.$route.query.id,e=this.storage.getSession("usreInfo");this.userInfo=e,this.project_id=t,this.showcreated(t,e)},filters:{numFilter:function(t){if("NaN"==t||"undefined"==t)return 0;var e=Number(t).toFixed(2);return Number(e)},summary:function(t){var e=t.itype,i=t.ifixedCost,s=t.icanDiscount,a=null==t.iallTypeRate?0:t.iallTypeRate,n=t.etype,o=t.efixedCost,c=t.ecanDiscount,r=null==t.eallTypeRate?0:t.eallTypeRate,l=parseFloat(t.productprice)*(parseFloat(t.discountRate)/100),d=0;d=i>0&&2==e?i:1==s?parseFloat(l)*(parseFloat(a)/100):parseFloat(t.productprice)*parseFloat(a)/100;var u=0;u=o>0&&2==n?o:1==c?parseFloat(l)*(parseFloat(r)/100):parseFloat(t.productprice)*parseFloat(r)/100;var h=l+parseFloat(d)+parseFloat(u);h=Number(h).toFixed(2);return Number(h)},inputnum:function(t){if(t>=100)Number(100);else if(t<=0)Number(0);else var e=Number(e);return Number(realVal)}},computed:{total:function(){for(var t=this.cate,e=0,i=0,s=0,a=0,n=1==this.valueAddedTaxRate.useDefault?this.valueAddedTaxRate.defaultRate:this.valueAddedTaxRate.customRate,o=0,c=t.length;o<c;o++)if(t[o].id,t[o].itype>0&&t[o].etype>0){var r=t[o].itype,l=t[o].ifixedCost&&parseFloat(t[o].ifixedCost)>0?parseFloat(t[o].ifixedCost):0,d=t[o].icanDiscount,u=null==t[o].iallTypeRate?0:t[o].iallTypeRate,h=t[o].etype,_=t[o].efixedCost,p=t[o].ecanDiscount,v=null==t[o].eallTypeRate?0:t[o].eallTypeRate,m=0;null!=t[o].discountRate&&(m=parseFloat(t[o].productprice)*(parseFloat(t[o].discountRate)/100)),a+=m;var f=0;f=parseFloat(l)>0&&2==r?l:1==d?parseFloat(m)*(parseFloat(u)/100):parseFloat(t[o].productprice)*parseFloat(u)/100;var g=0;g=_>0&&2==h?_:1==p?parseFloat(m)*(parseFloat(v)/100):parseFloat(t[o].productprice)*parseFloat(v)/100,t[o].anzhuan=f,t[o].tiaoshi=g,s+=parseFloat(t[o].ratetotal),e+=parseFloat(f),i+=parseFloat(g)}else t[o].anzhuan=0,t[o].tiaoshi=0;this.cate=t;var y=parseFloat(this.otherCost),C=0;C=(e+i+a+y)*(n/100);var x=parseFloat(s)+parseFloat(i)+parseFloat(e)+parseFloat(C)+parseFloat(y);return{installtotal:e.toFixed(2),debugtotal:i.toFixed(2),productprice:s.toFixed(2),valueAddedTaxRate:C.toFixed(2),huizong:x.toFixed(2),allsummary:a.toFixed(2),cate:t}}}},pe={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"offerbody"},[i("div",{staticClass:"top"},[i("div",{staticClass:"top_left text-00b9e0 cursor",on:{click:t.back}},[i("i",{staticClass:"icon iconfont iconblue_pt1"}),t._v("返回")]),t._v(" "),i("div",{staticClass:"size20 top_centre text-center"},[t._v(" 报价汇总")]),t._v(" "),i("div",{staticClass:"top_right"})]),t._v(" "),i("div",{staticClass:"bottomcenter"},[i("div",{staticClass:"b_left"},[i("div",{staticClass:"b_left_nav"},[i("div",{staticClass:"text-center b_left_nav_all cursor ",class:0==t.leftmenuid&&922!=t.t_menuid?"text-00b9e0":"",on:{click:function(e){return t.menuall()}}},[t._v("汇总\n        ")]),t._v(" "),i("div",{staticClass:"hr"}),t._v(" "),i("div",{staticClass:"b_left_nav_item_ul"},[t._l(t.cate,function(e,s){return e.selected?i("div",{key:s,staticClass:"b_left_nav_item_ul_li cursor",class:t.leftmenuid==e.id?"text-00b9e0":"",on:{click:function(i){return t.showmenu(e.id,s,e)}}},[i("div",{staticClass:"b_left_nav_item_left text-center"},[i("i",{staticClass:"icon iconfont size22 ",class:"iconx-"+e.id})]),t._v(" "),i("div",{staticClass:"b_left_nav_item_center"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"b_left_nav_item_right"})]):t._e()}),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"b_left_nav_item_ul_li cursor",class:-2==t.leftmenuid?"text-00b9e0":"",on:{click:function(e){return t.showmenu(-2,-2)}}},[t._m(1),t._v(" "),i("div",{staticClass:"b_left_nav_item_center"},[t._v("其它")]),t._v(" "),i("div",{staticClass:"b_left_nav_item_right"})])],2)])]),t._v(" "),i("div",{staticClass:"b_center"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.leftmenuid,expression:"leftmenuid==0"}],staticClass:"b_center_items "},[i("div",{staticClass:"b_center_items_title text-center size18 text-00b9e0"},[t._v("汇总")]),t._v(" "),i("div",{staticClass:"b_center_items_top"},[i("div",{staticClass:"b_center_items_top_title"},[i("div",{staticClass:"b_center_items_top_title_li text-center"},[t._v("\n              设备总计\n              "),i("img",{staticClass:"cursor",attrs:{src:"https://cdn.zeplin.io/5a3a303748258f1e7e4bea6b/assets/95BB3863-FE9C-4C4D-A732-7B4A6D58FF47.svg",alt:""},on:{click:function(e){return t.info(1)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.infotype,expression:"infotype==1"}],staticClass:"size12",staticStyle:{"z-index":"9",position:"absolute",left:"95px",top:"0",width:"160px",background:"#F9FBFF"}},[t._v("\n                设备总计设备总计设备总计\n              ")])]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center"},[t._v("\n              总设备安装费\n              "),i("img",{staticClass:"cursor",attrs:{src:"https://cdn.zeplin.io/5a3a303748258f1e7e4bea6b/assets/95BB3863-FE9C-4C4D-A732-7B4A6D58FF47.svg",alt:""},on:{click:function(e){return t.info(2)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2==t.infotype,expression:"infotype==2"}],staticClass:"size12",staticStyle:{"z-index":"9",position:"absolute",left:"100px",top:"0",width:"160px",background:"#F9FBFF"}},[t._v("\n                设备总计设备总计设备总计\n              ")])]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center"},[t._v("\n              总设备调试费\n              "),i("img",{staticClass:"cursor",attrs:{src:"https://cdn.zeplin.io/5a3a303748258f1e7e4bea6b/assets/95BB3863-FE9C-4C4D-A732-7B4A6D58FF47.svg",alt:""},on:{click:function(e){return t.info(3)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:3==t.infotype,expression:"infotype==3"}],staticClass:"size12",staticStyle:{"z-index":"9",position:"absolute",left:"100px",top:"0",width:"160px",background:"#F9FBFF"}},[t._v("\n                设备总计设备总计设备总计\n              ")])]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center"},[t._v("\n              总其他费用\n              "),i("img",{staticClass:"cursor",attrs:{src:"https://cdn.zeplin.io/5a3a303748258f1e7e4bea6b/assets/95BB3863-FE9C-4C4D-A732-7B4A6D58FF47.svg",alt:""},on:{click:function(e){return t.info(4)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:4==t.infotype,expression:"infotype==4"}],staticClass:"size12",staticStyle:{"z-index":"9",position:"absolute",left:"100px",top:"0",width:"160px",background:"#F9FBFF"}},[t._v("\n                设备总计设备总计设备总计\n              ")])]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center"},[t._v("\n              增值税率("+t._s(1==t.valueAddedTaxRate.useDefault?t.valueAddedTaxRate.defaultRate:t.valueAddedTaxRate.customRate)+"%)\n              "),i("img",{staticClass:"cursor",attrs:{src:"https://cdn.zeplin.io/5a3a303748258f1e7e4bea6b/assets/95BB3863-FE9C-4C4D-A732-7B4A6D58FF47.svg",alt:""},on:{click:function(e){return t.info(5)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:5==t.infotype,expression:"infotype==5"}],staticClass:"size12",staticStyle:{"z-index":"9",position:"absolute",left:"-70px",top:"0",width:"160px",background:"#F9FBFF"}},[t._v("\n                设备总计设备总计设备总计\n              ")])])]),t._v(" "),i("div",{staticClass:"b_center_items_top_num",staticStyle:{"border-bottom":"2px solid #E3E8EF"}},[i("div",{staticClass:"b_center_items_top_title_li text-center"},[t._v(t._s(t._f("numFilter")(t.total.allsummary)))]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center"},[t._v(t._s(t._f("numFilter")(t.total.installtotal)))]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center"},[t._v(t._s(t._f("numFilter")(t.total.debugtotal)))]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center"},[t._v(t._s(t._f("numFilter")(t.otherCost)))]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center"},[t._v(t._s(t._f("numFilter")(t.total.valueAddedTaxRate)))])]),t._v(" "),i("div",{staticClass:"b_center_items_top_num"},[i("div",{staticClass:"b_center_items_top_title_li text-center"}),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center"}),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center"}),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{background:"#E3E8EF","font-weight":"bold",color:"#333"}},[t._v("汇总")]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{background:"#E3E8EF","font-weight":"bold",color:"#333"}},[t._v(t._s(t.total.huizong))])])]),t._v(" "),i("div",{staticClass:"b_center_items_list"},[t._m(2),t._v(" "),t._l(t.cate,function(e,s){return i("div",[e.selected?i("div",{staticClass:"b_center_items_list_ul",staticStyle:{height:"34px"}},[i("div",{staticClass:"b_center_items_list_ul_li text-center"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center"},[t._v(t._s(t._f("numFilter")(e.productprice)))]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center"},[i("input",{staticClass:"b_center_items_list_ul_li_input",attrs:{type:"text",disabled:"disabled"},domProps:{value:e.discountRate}})]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center"},[t._v(t._s(t._f("numFilter")(e.productprice*e.discountRate/100)))]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center b_center_items_list_ul_li_end"},[t._v(t._s(t._f("summary")(e)))])]):t._e()])}),t._v(" "),i("div",{staticClass:"b_center_items_list_ul text-00b9e0",on:{click:function(e){return t.offers()}}},[t._v("\n            项目成本\n          ")])],2)]),t._v(" "),t._l(t.cate,function(e){return i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.leftmenuid==e.id,expression:"leftmenuid == vo.id"}],staticClass:"b_center_items "},[i("div",[i("div",{staticClass:"b_center_items_title text-center size18 text-00b9e0"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"b_center_items_top"},[i("div",{staticClass:"b_center_items_top_title"},[i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%",position:"relative"}},[t._v("\n                  设备总计\n                  ")]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%"}},[t._v("\n                  设备优惠合计\n                  "),i("img",{staticClass:"cursor",attrs:{src:"https://cdn.zeplin.io/5a3a303748258f1e7e4bea6b/assets/95BB3863-FE9C-4C4D-A732-7B4A6D58FF47.svg",alt:""},on:{click:function(e){return t.info(1)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.infotype,expression:"infotype==1"}],staticClass:"size12",staticStyle:{"z-index":"9",position:"absolute",left:"120px",top:"0",width:"160px",background:"#F9FBFF"}},[t._v("\n                    设备总计设备总计设备总计\n                  ")])]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%"}},[t._v("\n                  设备安装费\n                  "),i("img",{staticClass:"cursor",attrs:{src:"https://cdn.zeplin.io/5a3a303748258f1e7e4bea6b/assets/95BB3863-FE9C-4C4D-A732-7B4A6D58FF47.svg",alt:""},on:{click:function(e){return t.info(2)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2==t.infotype,expression:"infotype==2"}],staticClass:"size12",staticStyle:{"z-index":"9",position:"absolute",left:"105px",top:"0",width:"160px",background:"#F9FBFF"}},[t._v("\n                    设备总计设备总计设备总计\n                  ")])]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%"}},[t._v("\n                  设备调试费\n                  "),i("img",{staticClass:"cursor",attrs:{src:"https://cdn.zeplin.io/5a3a303748258f1e7e4bea6b/assets/95BB3863-FE9C-4C4D-A732-7B4A6D58FF47.svg",alt:""},on:{click:function(e){return t.info(3)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:3==t.infotype,expression:"infotype==3"}],staticClass:"size12",staticStyle:{"z-index":"9",position:"absolute",left:"105px",top:"0",width:"160px",background:"#F9FBFF"}},[t._v("\n                    设备总计设备总计设备总计\n                  ")])])]),t._v(" "),i("div",{staticClass:"b_center_items_top_num",staticStyle:{"border-bottom":"2px solid #E3E8EF"}},[i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%"}},[t._v(t._s(t._f("numFilter")(e.productprice)))]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%"}},[t._v(t._s(t._f("numFilter")(e.productprice*(e.discountRate/100))))]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%"}},[t._v(t._s(t._f("numFilter")(e.anzhuan)))]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%"}},[t._v(t._s(t._f("numFilter")(e.tiaoshi)))])]),t._v(" "),i("div",{staticClass:"b_center_items_top_num"},[i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%"}}),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%"}}),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%",background:"#E3E8EF","font-weight":"bold",color:"#333"}},[t._v("\n                  分类总计\n                  "),i("img",{staticClass:"cursor",attrs:{src:"https://cdn.zeplin.io/5a3a303748258f1e7e4bea6b/assets/95BB3863-FE9C-4C4D-A732-7B4A6D58FF47.svg",alt:""},on:{click:function(e){return t.info(4)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:4==t.infotype,expression:"infotype==4"}],staticClass:"size12",staticStyle:{"z-index":"9",position:"absolute",left:"105px",top:"0",width:"160px",background:"#F9FBFF"}},[t._v("\n                    设备总计设备总计设备总计\n                  ")])]),t._v(" "),i("div",{staticClass:"b_center_items_top_title_li text-center",staticStyle:{width:"25%",background:"#E3E8EF","font-weight":"bold",color:"#333"}},[t._v(t._s(t._f("numFilter")(e.productprice*(e.discountRate/100)+e.anzhuan+e.tiaoshi)))])])]),t._v(" "),i("div",{staticClass:"b_center_items_list"},[t._m(3,!0),t._v(" "),t._l(e.project,function(e,s){return i("div",{staticClass:"b_center_items_list_ul",staticStyle:{"flex-direction":"column","min-height":"70px","flex-flow":"wrap"}},[i("div",{staticStyle:{width:"100%",display:"flex","align-items":"center","justify-content":"center",height:"70px"}},[i("div",{staticClass:"b_center_items_list_ul_li text-center title",staticStyle:{width:"37%"}},[i("div",{staticClass:"title_img"},[i("img",{staticStyle:{width:"100%"},attrs:{src:t.hosturl+e.original_img,alt:""}})]),t._v(" "),i("div",{staticClass:"title_text"},[t._v(t._s(e.goods_name))])]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center ",staticStyle:{width:"20%"}},[i("div",{staticClass:"brand size12"},[i("div",{staticClass:"brand1"},[t._v(t._s(e.brand_name))]),t._v(" "),i("div",{staticClass:"brand2"},[t._v(t._s(e.typenum))]),t._v(" "),i("div",{staticClass:"brand2"})])]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center",staticStyle:{width:"13%"}},[t._v(t._s(t._f("numFilter")(e.shop_price)))]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center",staticStyle:{width:"10%"}},[t._v(t._s(e.number))]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center b_center_items_list_ul_li_end",staticStyle:{width:"20%"}},[t._v(t._s(t._f("numFilter")(e.devicetotal)))])]),t._v(" "),t._l(e.parts,function(e){return 4==t.opennames?i("div",{staticStyle:{width:"100%",display:"flex","align-items":"center","justify-content":"center",height:"70px",background:"#E3E8EF","border-radius":"5px"}},[i("div",{staticClass:"b_center_items_list_ul_li text-center title",staticStyle:{width:"37%"}},[i("div",{staticClass:"title_img"},[i("img",{staticStyle:{width:"100%"},attrs:{src:t.hosturl+e.original_img,alt:""}})]),t._v(" "),i("div",{staticClass:"title_text"},[t._v(t._s(e.goods_name))])]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center ",staticStyle:{width:"20%"}},[i("div",{staticClass:"brand size12"},[i("div",{staticClass:"brand1"},[t._v(t._s(e.brand_name))]),t._v(" "),i("div",{staticClass:"brand2"},[t._v(t._s(e.typenum))]),t._v(" "),i("div",{staticClass:"brand2"})])]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center",staticStyle:{width:"13%"}},[t._v(t._s(t._f("numFilter")(e.shop_price)))]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center",staticStyle:{width:"10%"}},[t._v(t._s(e.num))]),t._v(" "),i("div",{staticClass:"b_center_items_list_ul_li text-center b_center_items_list_ul_li_end",staticStyle:{width:"20%"}})]):t._e()})],2)})],2)])])])}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:-2==t.leftmenuid,expression:"leftmenuid == -2"}],staticClass:"b_center_items "},[i("div",{staticClass:"b_center_items_title text-center size18 text-00b9e0"},[t._v("其它费用")]),t._v(" "),i("div",{staticClass:"b_center_items_other"},[t._m(4),t._v(" "),t._l(t.otherCostlist,function(e){return i("div",{staticClass:"b_center_items_other_li"},[i("div",{staticClass:"text-center",staticStyle:{width:"50%"}},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"text-center",staticStyle:{width:"50%"}},[t._v(t._s(e.cost))])])}),t._v(" "),i("div",{staticClass:"b_center_items_other_title",staticStyle:{background:"none"}},[i("div",{staticClass:"text-center",staticStyle:{width:"50%"}},[t._v("其它费用合计")]),t._v(" "),i("div",{staticClass:"text-center",staticStyle:{width:"50%"}},[t._v(t._s(t._f("numFilter")(t.otherCost)))])])],2)])],2),t._v(" "),i("div",{staticClass:"b_right"},[i("div",{staticClass:"b_right_free "},[i("div",{staticClass:"b_right_free_set text-00b9e0 text-center cursor",on:{click:function(e){return t.sendemail()}}},[i("i",{staticClass:"icon iconfont iconsharept_blue"}),t._v("发送\n        ")])])])]),t._v(" "),i("Email",{attrs:{sendtype:t.opennames,itemdata:t.sendemaildata,value:t.sendemailshow},on:{closeFn:t.closesendemail}}),t._v(" "),t.settingshow&&t.settingdata?i("Cost",{attrs:{settindata:t.settingdata},on:{closeFn:t.closeset}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"b_left_nav_item_ul_li",staticStyle:{height:"20px"}},[e("div",{staticClass:"hr"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"b_left_nav_item_left text-center"},[e("i",{staticClass:"icon iconfont  iconx_normal11 size22 "})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"b_center_items_list_title"},[i("div",{staticClass:"b_center_items_list_title_li text-center"},[t._v("首选系统")]),t._v(" "),i("div",{staticClass:"b_center_items_list_title_li text-center"},[t._v("主设备汇总")]),t._v(" "),i("div",{staticClass:"b_center_items_list_title_li text-center"},[t._v("折扣率")]),t._v(" "),i("div",{staticClass:"b_center_items_list_title_li text-center"},[t._v("设备优惠汇总")]),t._v(" "),i("div",{staticClass:"b_center_items_list_title_li text-center"},[t._v("分类汇总")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"b_center_items_list_title"},[i("div",{staticClass:"b_center_items_list_title_li text-center",staticStyle:{width:"37%"}},[t._v("设备图片/名称")]),t._v(" "),i("div",{staticClass:"b_center_items_list_title_li text-center",staticStyle:{width:"20%"}},[t._v("品牌/型号")]),t._v(" "),i("div",{staticClass:"b_center_items_list_title_li text-center",staticStyle:{width:"13%"}},[t._v("单价")]),t._v(" "),i("div",{staticClass:"b_center_items_list_title_li text-center",staticStyle:{width:"10%"}},[t._v("数量")]),t._v(" "),i("div",{staticClass:"b_center_items_list_title_li text-center",staticStyle:{width:"20%"}},[t._v("总价")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"b_center_items_other_title"},[e("div",{staticClass:"text-center",staticStyle:{width:"50%"}},[this._v("费用名")]),this._v(" "),e("div",{staticClass:"text-center",staticStyle:{width:"50%"}},[this._v("金额")])])}]};var ve=s("VU/8")(_e,pe,!1,function(t){s("w9Q1")},"data-v-62ff4dad",null).exports,me={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"passWord"},[i("div",{staticClass:"item flex"},[i("div",{staticClass:"iName"},[t._v("旧密码:")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.inputData.old_password,expression:"inputData.old_password"}],staticClass:"pwInput",attrs:{type:"password",name:""},domProps:{value:t.inputData.old_password},on:{input:function(e){e.target.composing||t.$set(t.inputData,"old_password",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"item flex"},[i("div",{staticClass:"iName"},[t._v("新密码:")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.inputData.new_password,expression:"inputData.new_password"}],staticClass:"pwInput",attrs:{type:"password",name:""},domProps:{value:t.inputData.new_password},on:{input:function(e){e.target.composing||t.$set(t.inputData,"new_password",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"item flex"},[i("div",{staticClass:"iName"},[t._v("重复一次:")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.inputData.confirm_password,expression:"inputData.confirm_password"}],staticClass:"pwInput",attrs:{type:"password",name:""},domProps:{value:t.inputData.confirm_password},on:{input:function(e){e.target.composing||t.$set(t.inputData,"confirm_password",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"compalete"},[i("span",{staticClass:"ospan",on:{click:t.confirm}},[t._v("完成")])])])},staticRenderFns:[]};var fe=s("VU/8")({data:function(){return{inputData:{username:"",old_password:"",new_password:"",confirm_password:""}}},props:["pw"],created:function(){var t=this.storage.getSession("usreInfo");this.inputData.username=t.mobile},methods:{confirm:function(){var t=this;if(""!=this.inputData.old_password)return this.inputData.old_password.length<8||this.inputData.old_password.length>21?(this.inputData.old_password="",void this.$Message.warning("密码长度为8至21位之间！")):this.inputData.new_password.length<8||this.inputData.new_password.length>21?(this.inputData.old_password="",void this.$Message.warning("密码长度为8至21位之间！")):this.inputData.confirm_password.length<8||this.inputData.confirm_password.length>21?(this.inputData.old_password="",void this.$Message.warning("密码长度为8至21位之间！")):this.inputData.new_password!=this.inputData.confirm_password?(this.$Message.warning("新旧密码不一致请重新输入！"),this.inputData.new_password="",void(this.inputData.confirm_password="")):void this.axios.post("/index.php?m=Api&c=User&a=password",this.Qs.stringify(this.inputData)).then(function(e){1==e.data.status&&t.$emit("pwSuccess"),t.$Spin.hide(),t.$Message.success(e.data.msg)});this.$Message.warning("请输入旧密码！")}}},me,!1,function(t){s("2GT4")},"data-v-5582c89a",null).exports,ge={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"contBox"},[i("div",{staticClass:"info"},[i("div",{staticClass:"item flex"},[i("div",{staticClass:"iName"},[t._v("昵称:")]),t._v(" "),i("div",{staticClass:"detailInfo"},[t._v(t._s(t.usreInfo.nickname))])]),t._v(" "),i("div",{staticClass:"item flex"},[i("div",{staticClass:"iName"},[t._v("账号:")]),t._v(" "),i("div",{staticClass:"tel detailInfo"},[t._v(t._s(t.usreInfo.mobile))])]),t._v(" "),i("div",{staticClass:"item flex"},[i("div",{staticClass:"iName"},[t._v("公司:")]),t._v(" "),i("div",{staticClass:"detailInfo"},[t._v(t._s(t.usreInfo.usercompany))])]),t._v(" "),i("div",{staticClass:"item flex"},[i("div",{staticClass:"iName"},[t._v("其他:")]),t._v(" "),i("div",{staticClass:"tel detailInfo"},[i("div",{staticClass:"oitem flex",on:{click:t.showBusiness}},[i("div",{staticClass:"cont"},[t._v("营业执照、品牌授权")]),t._v(" "),i("span",{staticClass:"iconfont iconblue_pt2"})]),t._v(" "),i("div",{staticClass:"oitem flex",on:{click:t.showLogo}},[i("div",{staticClass:"cont"},[t._v("企业Logo")]),t._v(" "),i("span",{staticClass:"iconfont iconblue_pt2"})])])])]),t._v(" "),i("div",{staticClass:"btnBox flex"},[i("div",{staticClass:"otherTitle"},[i("span",{on:{click:t.changePassWord}},[t._v("更改密码")])]),t._v(" "),i("div",{staticClass:"editor",on:{click:t.editor}},[t._m(0)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("span",{staticClass:"iconfont iconmodify"}),this._v(" 修改")])}]};var ye=s("VU/8")({data:function(){return{usreInfo:null,url:this.hosturl}},components:{},methods:{changePassWord:function(){this.$emit("changePassWord",!1)},editor:function(){this.$emit("statusEditor")},showBusiness:function(){this.$emit("showBusiness")},showLogo:function(){this.$emit("showLogo")}},created:function(){var t=this.storage.getSession("usreInfo");this.usreInfo=t}},ge,!1,function(t){s("4BZX")},"data-v-7be45ce5",null).exports,Ce={name:"Salesman",data:function(){return{usreInfo:null,url:this.hosturl}},components:{Password:fe,Showinfo:ye},methods:{backBtn:function(){this.$emit("backFn")},confirm:function(){var t=this;this.axios.post("/index.php?m=Api&c=user&a=updateUserInfo",this.Qs.stringify({user_id:this.usreInfo.user_id,nickname:this.usreInfo.nickname,usercompany:this.usreInfo.usercompany})).then(function(e){1==e.data.status&&(t.storage.setSession("usreInfo",t.usreInfo),t.backBtn()),t.$Spin.hide(),t.$Message.success(e.data.msg)})}},created:function(){var t=this.storage.getSession("usreInfo");this.usreInfo=t}},xe={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"center"},[i("div",{staticClass:"main"},[i("span",{staticClass:"iconfont iconblue_pt1 back",on:{click:t.backBtn}}),t._v(" "),i("div",{staticClass:"name textCenter"},[t._v(t._s(t.usreInfo.nickname))]),t._v(" "),i("div",{staticClass:"dateTime textCenter"},[t._v(t._s(t.usreInfo.level_endtimes)+"到期")]),t._v(" "),i("div",{staticClass:"userImg"},[t.usreInfo.head_pic?i("img",{attrs:{src:t.url+t.usreInfo.head_pic,alt:"",width:"100",height:"100"}}):i("img",{attrs:{src:"/Template/pc/oneapp/Static/images/User select.png",alt:"",width:"100",height:"100"}})]),t._v(" "),i("div",{staticClass:"editorItem flex niName"},[i("div",{staticClass:"eName"},[t._v("昵称 : ")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.usreInfo.nickname,expression:"usreInfo.nickname"}],staticClass:"infoItem",attrs:{type:"text",name:"",id:""},domProps:{value:t.usreInfo.nickname},on:{input:function(e){e.target.composing||t.$set(t.usreInfo,"nickname",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"editorItem flex"},[i("div",{staticClass:"eName"},[t._v("账号 :")]),t._v(" "),i("div",{staticClass:"eInfo infoItem"},[t._v(t._s(t.usreInfo.mobile))])]),t._v(" "),i("div",{staticClass:"editorItem flex"},[i("div",{staticClass:"eName"},[t._v("公司 :")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.usreInfo.usercompany,expression:"usreInfo.usercompany"}],staticClass:"infoItem textarea",attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:t.usreInfo.usercompany},on:{input:function(e){e.target.composing||t.$set(t.usreInfo,"usercompany",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"editorItem flex"},[i("div",{staticClass:"eName"},[t._v("其他 :")]),t._v(" "),i("div",{staticClass:"eInfo infoItem"},[i("p",[t.usreInfo.agent_img?i("span",[t._v("营业执照")]):t._e(),t._v(" "),t.usreInfo.agent_img&&t.usreInfo.agent_imgs?i("span",[t._v("、")]):t._e(),t._v(" "),t.usreInfo.agent_imgs?i("span",[t._v("品牌授权")]):t._e()]),t._v(" "),t.usreInfo.logo?i("p",[t._v("企业Logo")]):t._e()])]),t._v(" "),i("div",{staticClass:"conpelete"},[i("div",{staticClass:"btn",on:{click:t.confirm}},[t._v("完成")])])])])},staticRenderFns:[]};var we={data:function(){return{usreInfo:null,url:this.hosturl}},components:{},created:function(){var t=this.storage.getSession("usreInfo");this.usreInfo=t},methods:{backInfo:function(){this.$emit("oback")},change:function(){this.$Modal.info({title:"温馨提示",content:"<p>如有修改,请与客服联系,发邮件至info@oneapptech.cn,或在工作时间致电:021-62363016</p>",onOk:function(){}})},uploadImg:function(){var t=this,i=new FormData,s=e.target.files[0];i.append("file",s),i.append("chunk","0"),e.target.value.endsWith(".png")||e.target.value.endsWith(".jpg")||e.target.value.endsWith(".gif")?(this.$Spin.show(),this.axios.post("/index.php?m=Api&c=Upload&a=imageUp",i).then(function(e){if("SUCCESS"==e.data.result.state){var i=e.data.result.url;console.log(i);var s={user_id:t.usreInfo.user_id,agent_img:i};t.axios.post("/index.php?m=Api&c=user&a=updateUserInfo",t.Qs.stringify(s)).then(function(e){1==e.data.status&&(t.usreInfo.agent_img=i,t.storage.setSession("usreInfo",t.usreInfo)),t.$Spin.hide(),t.$Message.success(e.data.msg)})}})):this.$Message.error("不能上传非图片文件！")},uploadBrand:function(t){var e=this,i=new FormData,s=t.target.files[0];i.append("file",s),i.append("chunk","0"),t.target.value.endsWith(".png")||t.target.value.endsWith(".jpg")||t.target.value.endsWith(".gif")?(this.$Spin.show(),this.axios.post("/index.php?m=Api&c=Upload&a=imageUp",i).then(function(t){if("SUCCESS"==t.data.result.state){var i=t.data.result.url;console.log(i);var s={user_id:e.usreInfo.user_id,agent_imgs:i};e.axios.post("/index.php?m=Api&c=user&a=updateUserInfo",e.Qs.stringify(s)).then(function(t){1==t.data.status&&(e.usreInfo.agent_imgs=i,e.storage.setSession("usreInfo",e.usreInfo)),e.$Spin.hide(),e.$Message.success(t.data.msg)})}})):this.$Message.error("不能上传非图片文件！")}}},be={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"business"},[i("span",{staticClass:"iconfont iconblue_pt1 back",on:{click:t.backInfo}}),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"titel"},[t._v("营业执照")]),t._v(" "),i("div",{staticClass:"showImg"},[t.usreInfo.agent_img?i("div",{staticClass:"cont"},[i("img",{attrs:{src:t.url+t.usreInfo.agent_img,alt:""}}),t._v(" "),i("div",{staticClass:"mars"}),t._v(" "),i("span",{staticClass:"change",on:{click:t.change}},[t._v("修改")])]):i("label",{staticClass:"upBox"},[i("svg",{staticClass:"icon",attrs:{t:"1577949581926",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1991",width:"100",height:"100"}},[i("path",{attrs:{d:"M1000.05183154 1009.45715539h-58.80986304v-16.80341709h42.00749433c9.27815331 0 16.80341709-7.52526378 16.80341708-16.80341708v-42.00854271h16.80341709v58.81195979c0 9.27710493-7.5242154 16.80341709-16.80341709 16.80341709h-0.00209675z m0-226.83355011h16.8023687v67.20842646H1000.05183154v-67.20842646z m0-151.22341512h16.8023687v67.20842645H1000.05183154V631.40123855z m0-151.22131836h16.8023687v67.20947484H1000.05183154v-67.20947484z m0-159.62512366h16.8023687v75.61328014H1000.05183154v-75.61328014z m0-151.22131835h16.8023687v67.20947482H1000.05183154v-67.20947482z m0-134.41685291c0-9.27920169-7.52316701-16.80341709-16.80446547-16.80341707h-42.00749433V1.30769433h58.80881465c9.27920169 0 16.80446546 7.52316701 16.80446547 16.80446548v67.20842644h-16.80446547V34.91348013z m-210.03222978 957.73816142h67.20842644V1009.45715539h-67.20947482z m0-991.3439472h67.20842644v16.80446546h-67.20947482zM529.58131423 757.41743128h-25.20302887V530.58388116H277.54473525v-25.20302886H504.37828536V270.14664202h25.20302887v235.23421028h235.23525866v25.20302886H529.58131423v226.83355012zM638.79933177 1.3097911h67.20842645v16.80446546h-67.20842645V1.3097911z m-151.22131835 0h67.21052319v16.80446546h-67.21157158V1.3097911z m-159.62617205 0h75.61118337v16.80446546h-75.61013499V1.3097911z m-151.22026998 991.3439472h67.20842645V1009.45715539h-67.20842645v-16.80341709z m0-991.3439472h67.20842645v16.80446546h-67.20842645V1.3097911zM8.70578756 992.6537383v-58.81091141h16.80341709v42.00749433c0 9.27605654 7.52316701 16.80341709 16.80341708 16.80341708h50.40710614V1009.45715539H25.51130141c-9.27815331 0-16.80341709-7.5242154-16.80341709-16.80341709h-0.00209676zM25.50920465 34.91557688v50.40605775H8.70578756V18.11530494c0-9.27920169 7.5242154-16.80446546 16.80341709-16.80446547h67.21157159v16.80446547H42.31157336c-9.27815331 0-16.80341709 7.52211864-16.80341709 16.80341708z m0 201.62632773H8.70578756v-67.20947482h16.80341709l0.00209676 67.20947482h-0.00209676z m0 159.62512367H8.70578756v-75.61328014h16.80341709l0.00209676 75.61328014h-0.00209676z m0 151.22131836H8.70578756v-67.20947484h16.80341709l0.00209676 67.20947484h-0.00209676z m0 151.22026997H8.70578756V631.40123855h16.80341709l0.00209676 67.20842644h-0.00209676z m0 151.22131836H8.70578756v-67.20842645h16.80341709l0.00209676 67.20842645zM403.56616988 1009.45715539h-75.61118337v-16.80341709h75.61013499V1009.45715539z m151.22236673 0h-67.21157158v-16.80341709h67.21157158V1009.45715539z m151.21817323 0h-67.20737807v-16.80341709h67.20842645V1009.45715539z",fill:"","p-id":"1992"}})]),t._v(" "),i("input",{staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.uploadImg}})])]),t._v(" "),i("div",{staticClass:"titel"},[t._v("品牌授权")]),t._v(" "),i("div",{staticClass:"showImg"},[t.usreInfo.agent_imgs?i("div",{staticClass:"cont"},[i("img",{attrs:{src:t.url+t.usreInfo.agent_imgs,alt:""}}),t._v(" "),i("div",{staticClass:"mars"}),t._v(" "),i("span",{staticClass:"change",on:{click:t.change}},[t._v("修改")])]):i("label",{staticClass:"upBox"},[i("svg",{staticClass:"icon",attrs:{t:"1577949581926",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1991",width:"100",height:"100"}},[i("path",{attrs:{d:"M1000.05183154 1009.45715539h-58.80986304v-16.80341709h42.00749433c9.27815331 0 16.80341709-7.52526378 16.80341708-16.80341708v-42.00854271h16.80341709v58.81195979c0 9.27710493-7.5242154 16.80341709-16.80341709 16.80341709h-0.00209675z m0-226.83355011h16.8023687v67.20842646H1000.05183154v-67.20842646z m0-151.22341512h16.8023687v67.20842645H1000.05183154V631.40123855z m0-151.22131836h16.8023687v67.20947484H1000.05183154v-67.20947484z m0-159.62512366h16.8023687v75.61328014H1000.05183154v-75.61328014z m0-151.22131835h16.8023687v67.20947482H1000.05183154v-67.20947482z m0-134.41685291c0-9.27920169-7.52316701-16.80341709-16.80446547-16.80341707h-42.00749433V1.30769433h58.80881465c9.27920169 0 16.80446546 7.52316701 16.80446547 16.80446548v67.20842644h-16.80446547V34.91348013z m-210.03222978 957.73816142h67.20842644V1009.45715539h-67.20947482z m0-991.3439472h67.20842644v16.80446546h-67.20947482zM529.58131423 757.41743128h-25.20302887V530.58388116H277.54473525v-25.20302886H504.37828536V270.14664202h25.20302887v235.23421028h235.23525866v25.20302886H529.58131423v226.83355012zM638.79933177 1.3097911h67.20842645v16.80446546h-67.20842645V1.3097911z m-151.22131835 0h67.21052319v16.80446546h-67.21157158V1.3097911z m-159.62617205 0h75.61118337v16.80446546h-75.61013499V1.3097911z m-151.22026998 991.3439472h67.20842645V1009.45715539h-67.20842645v-16.80341709z m0-991.3439472h67.20842645v16.80446546h-67.20842645V1.3097911zM8.70578756 992.6537383v-58.81091141h16.80341709v42.00749433c0 9.27605654 7.52316701 16.80341709 16.80341708 16.80341708h50.40710614V1009.45715539H25.51130141c-9.27815331 0-16.80341709-7.5242154-16.80341709-16.80341709h-0.00209676zM25.50920465 34.91557688v50.40605775H8.70578756V18.11530494c0-9.27920169 7.5242154-16.80446546 16.80341709-16.80446547h67.21157159v16.80446547H42.31157336c-9.27815331 0-16.80341709 7.52211864-16.80341709 16.80341708z m0 201.62632773H8.70578756v-67.20947482h16.80341709l0.00209676 67.20947482h-0.00209676z m0 159.62512367H8.70578756v-75.61328014h16.80341709l0.00209676 75.61328014h-0.00209676z m0 151.22131836H8.70578756v-67.20947484h16.80341709l0.00209676 67.20947484h-0.00209676z m0 151.22026997H8.70578756V631.40123855h16.80341709l0.00209676 67.20842644h-0.00209676z m0 151.22131836H8.70578756v-67.20842645h16.80341709l0.00209676 67.20842645zM403.56616988 1009.45715539h-75.61118337v-16.80341709h75.61013499V1009.45715539z m151.22236673 0h-67.21157158v-16.80341709h67.21157158V1009.45715539z m151.21817323 0h-67.20737807v-16.80341709h67.20842645V1009.45715539z",fill:"","p-id":"1992"}})]),t._v(" "),i("input",{staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.uploadBrand}})])])])])},staticRenderFns:[]};var ke={data:function(){return{usreInfo:null,url:this.hosturl}},components:{},created:function(){var t=this.storage.getSession("usreInfo");this.usreInfo=t},methods:{backInfo:function(){this.$emit("oback")},change:function(){this.$Modal.info({title:"温馨提示",content:"<p>如有修改,请与客服联系,发邮件至info@oneapptech.cn,或在工作时间致电:021-62363016</p>",onOk:function(){}})},uploadImg:function(){var t=this,i=new FormData,s=e.target.files[0];i.append("file",s),i.append("chunk","0"),e.target.value.endsWith(".png")||e.target.value.endsWith(".jpg")||e.target.value.endsWith(".gif")?(this.$Spin.show(),this.axios.post("/index.php?m=Api&c=Upload&a=imageUp",i).then(function(e){if("SUCCESS"==e.data.result.state){var i=e.data.result.url;console.log(i);var s={user_id:t.usreInfo.user_id,logo:i};t.axios.post("/index.php?m=Api&c=user&a=updateUserInfo",t.Qs.stringify(s)).then(function(e){1==e.data.status&&(t.usreInfo.logo=i,t.storage.setSession("usreInfo",t.usreInfo)),t.$Spin.hide(),t.$Message.success(e.data.msg)})}})):this.$Message.error("不能上传非图片文件！")}}},Ie={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"business"},[i("span",{staticClass:"iconfont iconblue_pt1 back",on:{click:t.backInfo}}),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"titel"},[t._v("企业Logo")]),t._v(" "),i("div",{staticClass:"showImg"},[t.usreInfo.agent_img?i("div",{staticClass:"cont"},[i("img",{attrs:{src:t.url+t.usreInfo.logo,alt:""}}),t._v(" "),i("div",{staticClass:"mars"}),t._v(" "),i("span",{staticClass:"change",on:{click:t.change}},[t._v("修改")])]):i("label",{staticClass:"upBox"},[i("svg",{staticClass:"icon",attrs:{t:"1577949581926",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1991",width:"100",height:"100"}},[i("path",{attrs:{d:"M1000.05183154 1009.45715539h-58.80986304v-16.80341709h42.00749433c9.27815331 0 16.80341709-7.52526378 16.80341708-16.80341708v-42.00854271h16.80341709v58.81195979c0 9.27710493-7.5242154 16.80341709-16.80341709 16.80341709h-0.00209675z m0-226.83355011h16.8023687v67.20842646H1000.05183154v-67.20842646z m0-151.22341512h16.8023687v67.20842645H1000.05183154V631.40123855z m0-151.22131836h16.8023687v67.20947484H1000.05183154v-67.20947484z m0-159.62512366h16.8023687v75.61328014H1000.05183154v-75.61328014z m0-151.22131835h16.8023687v67.20947482H1000.05183154v-67.20947482z m0-134.41685291c0-9.27920169-7.52316701-16.80341709-16.80446547-16.80341707h-42.00749433V1.30769433h58.80881465c9.27920169 0 16.80446546 7.52316701 16.80446547 16.80446548v67.20842644h-16.80446547V34.91348013z m-210.03222978 957.73816142h67.20842644V1009.45715539h-67.20947482z m0-991.3439472h67.20842644v16.80446546h-67.20947482zM529.58131423 757.41743128h-25.20302887V530.58388116H277.54473525v-25.20302886H504.37828536V270.14664202h25.20302887v235.23421028h235.23525866v25.20302886H529.58131423v226.83355012zM638.79933177 1.3097911h67.20842645v16.80446546h-67.20842645V1.3097911z m-151.22131835 0h67.21052319v16.80446546h-67.21157158V1.3097911z m-159.62617205 0h75.61118337v16.80446546h-75.61013499V1.3097911z m-151.22026998 991.3439472h67.20842645V1009.45715539h-67.20842645v-16.80341709z m0-991.3439472h67.20842645v16.80446546h-67.20842645V1.3097911zM8.70578756 992.6537383v-58.81091141h16.80341709v42.00749433c0 9.27605654 7.52316701 16.80341709 16.80341708 16.80341708h50.40710614V1009.45715539H25.51130141c-9.27815331 0-16.80341709-7.5242154-16.80341709-16.80341709h-0.00209676zM25.50920465 34.91557688v50.40605775H8.70578756V18.11530494c0-9.27920169 7.5242154-16.80446546 16.80341709-16.80446547h67.21157159v16.80446547H42.31157336c-9.27815331 0-16.80341709 7.52211864-16.80341709 16.80341708z m0 201.62632773H8.70578756v-67.20947482h16.80341709l0.00209676 67.20947482h-0.00209676z m0 159.62512367H8.70578756v-75.61328014h16.80341709l0.00209676 75.61328014h-0.00209676z m0 151.22131836H8.70578756v-67.20947484h16.80341709l0.00209676 67.20947484h-0.00209676z m0 151.22026997H8.70578756V631.40123855h16.80341709l0.00209676 67.20842644h-0.00209676z m0 151.22131836H8.70578756v-67.20842645h16.80341709l0.00209676 67.20842645zM403.56616988 1009.45715539h-75.61118337v-16.80341709h75.61013499V1009.45715539z m151.22236673 0h-67.21157158v-16.80341709h67.21157158V1009.45715539z m151.21817323 0h-67.20737807v-16.80341709h67.20842645V1009.45715539z",fill:"","p-id":"1992"}})]),t._v(" "),i("input",{staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.uploadImg}})])]),t._v(" "),i("div",{staticClass:"tips"},[t._v("建议上传尺寸为417x240px的PNG图片")])])])},staticRenderFns:[]};var Se={name:"Salesman",data:function(){return{usreInfo:null,url:this.hosturl,showComponets:!0,isEditor:!0,isBusiness:0}},components:{NavMenu:u,Password:fe,Showinfo:ye,Editor:s("VU/8")(Ce,xe,!1,function(t){s("X1pS")},"data-v-75b2219e",null).exports,Business:s("VU/8")(we,be,!1,function(t){s("UHZN")},"data-v-6f623630",null).exports,Logo:s("VU/8")(ke,Ie,!1,function(t){s("XC+3")},"data-v-1481539f",null).exports},methods:{outlogin:function(){var t=this;this.$Modal.confirm({title:"提示",content:"<p>是否退出登录!</p>",onOk:function(){window.sessionStorage.clear(),window.location.reload(),t.$router.push({path:"/login"})},onCancel:function(){}})},imgUpload:function(t){var e=this,i=new FormData,s=t.target.files[0];i.append("file",s),i.append("chunk","0"),t.target.value.endsWith(".png")||t.target.value.endsWith(".jpg")||t.target.value.endsWith(".gif")?(this.$Spin.show(),this.axios.post("/index.php?m=Api&c=Upload&a=imageUp",i).then(function(t){if("SUCCESS"==t.data.result.state){var i=t.data.result.url,s={user_id:e.usreInfo.user_id,head_pic:i};e.axios.post("/index.php?m=Api&c=user&a=updateUserInfo",e.Qs.stringify(s)).then(function(t){1==t.data.status&&(e.usreInfo.head_pic=i,e.storage.setSession("usreInfo",e.usreInfo),e.$Spin.hide(),e.$Message.success(t.data.msg))})}})):this.$Message.error("不能上传非图片文件！")}},created:function(){var t=this.storage.getSession("usreInfo");this.usreInfo=t}},je={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",style:{height:t.imgheight+"px"}},[i("NavMenu",{staticClass:"nav"}),t._v(" "),t.isEditor?i("div",{staticClass:"center"},[0==t.isBusiness?i("div",{staticClass:"main"},[i("div",{staticClass:"logout",on:{click:t.outlogin}},[i("span",{staticClass:"iconfont iconlogout_gray"}),t._v(" 注销")]),t._v(" "),t.showComponets?t._e():i("span",{staticClass:"iconfont iconblue_pt1 back",on:{click:function(e){t.showComponets=!0}}}),t._v(" "),i("div",{staticClass:"name textCenter"},[t._v(t._s(t.usreInfo.nickname))]),t._v(" "),i("div",{staticClass:"dateTime textCenter"},[t._v(t._s(t.usreInfo.level_endtimes)+"到期")]),t._v(" "),i("div",{staticClass:"userImg"},[t.usreInfo.head_pic?i("img",{attrs:{src:t.url+t.usreInfo.head_pic,alt:"",width:"100",height:"100"}}):i("img",{attrs:{src:"/Template/pc/oneapp/Static/images/User select.png",alt:"",width:"100",height:"100"}})]),t._v(" "),i("div",{staticClass:"changeUser textCenter"},[i("label",[i("input",{staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.imgUpload}}),t._v("更改头像")])]),t._v(" "),t.showComponets?i("Showinfo",{on:{changePassWord:function(e){t.showComponets=!1},statusEditor:function(e){t.isEditor=!1},showBusiness:function(e){t.isBusiness=1},showLogo:function(e){t.isBusiness=2}}}):t._e(),t._v(" "),t.showComponets?t._e():i("Password",{on:{pwSuccess:function(e){t.showComponets=!0}}})],1):t._e(),t._v(" "),1==t.isBusiness?i("Business",{staticClass:"main",on:{oback:function(e){t.isBusiness=0}}}):t._e(),t._v(" "),2==t.isBusiness?i("Logo",{staticClass:"main",on:{oback:function(e){t.isBusiness=0}}}):t._e()],1):i("Editor",{on:{backFn:function(e){t.isEditor=!0}}})],1)},staticRenderFns:[]};var De=s("VU/8")(Se,je,!1,function(t){s("JnWQ")},"data-v-f4152e04",null).exports;a.default.use(c.a);var Fe=new c.a({routes:[{meta:{requireAuth:!0},path:"/Login",name:"Login",component:dt},{path:"/index",name:"Dindex",component:M},{path:"/message",name:"Message",component:yt},{path:"/setting",name:"Setting",component:I},{path:"/set",name:"Set",component:wt},{path:"/preview",name:"Preview",component:_t},{path:"/offer",name:"Offer",component:mt},{path:"/drawing/bitmap",name:"Dbitmap",component:Y},{path:"/drawing/lable",name:"Dlable",component:W},{path:"/speediness/index",name:"Sindex",component:G},{path:"/cate",name:"Scate",component:it},{path:"/sbitmap",name:"Sbitmap",component:nt},{path:"/salesman",name:"Salesman",component:At},{path:"/salesdetails",name:"Salesdetails",component:jt},{path:"/mitemlist",name:"Mitemlist",component:Mt},{path:"/detailMap",name:"DetailMap",component:ie},{path:"/jumpPoint",name:"JumpPoint",component:$t},{path:"/accessoriesList",name:"accessoriesList",component:qt},{path:"/typeCatgory",name:"typeCatgory",component:Yt},{path:"/read_floor",name:"read_floor",component:Gt},{path:"/tableCell",name:"tableCell",component:Wt},{path:"/detailMap/nextStep",name:"nextStep",component:de},{path:"/portsDtail",name:"portsDtail",component:Kt},{path:"/portTotal",name:"portTotal",component:ae},{path:"/checkProduct",name:"checkProduct",component:ce},{path:"/moffer",name:"Moffer",component:ve},{path:"/jurisdiction",name:"Jurisdiction",component:Pt},{path:"/changeinfo",name:"Changeinfo",component:De},{path:"*",component:M}]}),Ae=(s("j1ja"),s("mw3O")),Ee=s.n(Ae),ze={set(t,e){localStorage.setItem(t,JSON.stringify(e))},get:t=>JSON.parse(localStorage.getItem(t)),remove(t){localStorage.removeItem(t)},clear(){localStorage.clear()},setSession(t,e){window.sessionStorage.setItem(t,JSON.stringify(e))},getSession(t){let e=window.sessionStorage.getItem(t);return JSON.parse(e)},clearOneSession(t){window.sessionStorage.removeItem(t)},clearAllSession(){window.sessionStorage.clear()},gettime:()=>Date.parse(new Date).toString().substr(0,10)},Me=s("NYxO");a.default.use(Me.a);var Ne=new Me.a.Store({state:{jumpData:null,jumpDataCopy:null,resetGname:"全部",clickPointGoods:null,clickPointGoodsOringin:null,portData:null,Igoods:null,defaultData:"",chooseData:"",nowLayer:{},defaultlayerkey:0,layerAll:{},pointId:"",showUncheckedBtn:!1},mutations:{setchecked:function(t,e){t.showUncheckedBtn=e},setPointId:function(t,e){t.pointId=e},setNowFloor:function(t,e){t.nowLayer=e},setlayerAll:function(t,e){t.layerAll=e},setFloorIndex:function(t,e){t.defaultlayerkey=e},setJumpPiont:function(t,e){var i=!0;if(e.brand&&e.brand.length>0){for(var s=0;s<e.brand.length;s++)if(0==e.brand[s].id){i=!1;break}i&&e.brand.unshift({id:0,name:"全部"})}t.jumpData=e,t.jumpDataCopy=e},checkedJumpPiont:function(t,e){var i=!0;if(e.brand&&e.brand.length>0){for(var s=0;s<e.brand.length;s++)if(0==e.brand[s].id){i=!1;break}i&&e.brand.unshift({id:0,name:"全部"})}t.jumpData=e},restGoodsName:function(t,e){t.resetGname=e},checkData:function(t,e){t.clickPointGoods=e},saveList:function(t,e){t.clickPointGoodsOringin=e},totalPort:function(t,e){t.portData=e},selectProduct:function(t,e){t.Igoods=e},choosePartChecked:function(t,e){t.chooseData=e},partChecked:function(t,e){t.defaultData=e}},getters:{}}),Te=s("b3L9"),Pe=s.n(Te),Re=s("ibnl"),Be=s.n(Re);s("7QVd"),s("XlLT"),s("a0kR");a.default.use(Be.a),a.default.use(Pe.a),a.default.prototype.pagewidth={width:document.documentElement.clientWidth+"px"},a.default.prototype.pageheight={height:document.documentElement.clientHeight+"px"},a.default.prototype.imgwidth=""+document.documentElement.clientWidth,a.default.prototype.imgheight=""+document.documentElement.clientHeight,a.default.prototype.pagebg={background:"#E3E8EF"},Fe.beforeEach(function(t,e,i){t.matched.some(function(t){return t.meta.requireAuth})?i():ze.getSession("usreInfo")?i():i({path:"/login"})});var $e=window.location.protocol+"//"+window.location.host,Le=q.a.create({baseURL:$e});a.default.prototype.axios=Le,a.default.prototype.Qs=Ee.a,a.default.prototype.hosturl=$e,a.default.prototype.storage=ze,a.default.config.productionTip=!1,new a.default({el:"#app",router:Fe,store:Ne,components:{App:o},template:"<App/>"})},P6tt:function(t,e){},StqT:function(t,e){},TTH5:function(t,e){},UHZN:function(t,e){},VXkj:function(t,e){},X1pS:function(t,e){},"XC+3":function(t,e){},XlLT:function(t,e){},Zp2g:function(t,e){},a0kR:function(t,e){},aH1E:function(t,e){},ac0U:function(t,e){},brUZ:function(t,e){},c4xX:function(t,e){},eSef:function(t,e){},jRSo:function(t,e){},jS86:function(t,e){},k2bj:function(t,e){},kg6F:function(t,e){},oo7C:function(t,e){},roLm:function(t,e){},tOCg:function(t,e){},tsJl:function(t,e){},vhKi:function(t,e){},vlbe:function(t,e){},w9Q1:function(t,e){},yK5e:function(t,e){}},["NHnr"]);